---
title: "[K8S] Security"
# author: wrkholic84
date: 2024-02-08 00:06:00 +0900
categories: [Development, Kubernetes]
tags: [kubernetes, security]
math: true
mermaid: true
# image:
#   path: /commons/devices-mockup.png
#   width: 800
#   height: 500
#   alt: Responsive rendering of Chirpy theme on multiple devices.
---

## Kubernetes for RedTeam
Kubernetes에 대한 이해가 달라
보안 취약점 점검 시 관련 내용에 대한 공감과 소통이 어려운 이유로,
kubernetes 취약점 발견과 연구를 충분히 수행하기에 어려움이 있다.
이를 위해, 지난 몇 년간 연구한 내용을 바탕으로 다음 과정을 통해 kubernetes에 대한 지식 평준화를 이루고자 한다.

Understanding of Kubernetes varies,
making it challenging to empathize and communicate during security vulnerability checks.
Due to this, even when one intends to discover and research kubernetes vulnerabilities, executing this sufficiently is difficult.
To address this, based on the research conducted over the past few years, the following process aims to achieve a standardization of knowledge on kubernetes.

### Prerequisite Knowledge (Introduction - What we don't know)
#### Abstract Concept
![00](/assets/images/posts/20221226Security/00.png)
일반적으로 Kubernets 환경에 구축된 서비스는 위 그림과 같이 Api server와 Service 두 개의 접근 경로를 가진다.  
1. Apiserver는 kubernetes 환경 전체를 제어한다.
2. Service(kuberntes resource)는 웹서비스를 인터넷과 연결해주는 역할을 한다.

Typically, Application deployed in a Kubernetes environment have two access points, as shown in the figure above: the api-server and the service.

1. Api-server controls the entire Kubernetes environment.
2. Service (a Kubernetes resource) connects the web service to the internet as NodePort or LoadBalancer.

#### Api-server
api-server는 정말 API 서버임. api를 호출하는 방식으로 kubernetes 전체 환경을 제어할 수 있음. api 호출은 authn > authz > ??하나는 뭐였지?? 3단계에 걸쳐 진행.
#### How to access api-server
##### Authn 1. User Certificate
CSR > CERT > kube config > Kubectl
##### Authn 2. Service Account
SA > export bearer > Kubectl


#### Service


