[
  
  {
    "title": "[K8S] TroubleShooting",
    "url": "/posts/TroubleShooting/",
    "categories": "Development, Kubernetes",
    "tags": "kubernetes, setup, troubleshooting",
    "date": "2022-12-26 00:07:00 +0900",
    





    
    "snippet": "CoreDNS ë¬¸ì œì•„ë¬´ë¦¬ í•´ë„ DNS Queryê°€ ì•ˆë˜ëŠ” ìƒí™©ì´ ë°œìƒ. kube-dns ì¬ì‹œì‘í•˜ë‹ˆê¹Œ ë¨.iMacPro:~$ kubectl delete pod -n kube-system -l k8s-app=kube-dnsVerifying that DNS is working correctly within your Kubernetes platformVeri...",
    "content": "CoreDNS ë¬¸ì œì•„ë¬´ë¦¬ í•´ë„ DNS Queryê°€ ì•ˆë˜ëŠ” ìƒí™©ì´ ë°œìƒ. kube-dns ì¬ì‹œì‘í•˜ë‹ˆê¹Œ ë¨.iMacPro:~$ kubectl delete pod -n kube-system -l k8s-app=kube-dnsVerifying that DNS is working correctly within your Kubernetes platformVerify that DNS is working correctly within the Kubernetes cluster used by Component Pack forÂ IBM Connectionsâ„¢.About this taskBefore you install Component Pack, you must verify that DNS is working correctly in the Kubernetes cluster, to ensure that pods can communicate with each other over the network.Important:Â Do not proceed with installing Component Pack until DNS has been verified as working correctly.Procedure      On the Kubernetes master (if you used an HA deployment, select the primary master), set up a test environment by running the following command:     kubectl create -f https://k8s.io/examples/admin/dns/busybox.yaml        This command returns the following result when successful:Â pod/busybox created.        Verify that the test pod is running by executing the following command:    kubectl get pods busybox    If the pod is running, the command returns the following response:Â NAME READY STATUS RESTARTS AGE busybox 1/1 Running 0Â some-amount-of-time        Verify that DNS is working correctly by running the following command:     kubectl exec -ti busybox -- nslookup kubernetes.default        If DNS is working correctly, the command returns a response like the following example:Â Server: 10.96.0.10 Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local Name: kubernetes.default Address 1: 10.96.0.1 kubernetes.default.svc.cluster.local    Errors such as the following message indicate a problem with DNS:Â Server: 10.0.0.10 Address 1: 10.0.0.10 nslookup: canâ€™t resolve â€˜kubernetes.defaultâ€™        If you encounter a DNS problem, you must correct it.    If the nslookup command fails, execute the following command on all Kubernetes nodes in your cluster (including all masters and worker nodes):     iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X        Then repeat step 3 to verify that the DNS is now working correctly. If DNS problems persist, recreate the core-dns pods on the Kubernetes master by running the following command (in an HA deployment, execute this command on the primary Kubernetes master):     kubectl delete pod -n kube-system -l k8s-app=kube-dns        Remember that you must repeat step 3 to verify that the DNS is now working correctly.    For additional troubleshooting tips, see theÂ Debugging DNS ResolutionÂ section of the Kubernetes.        When the DNS is working correctly, delete the test environment by running the following command:     kubectl delete -f https://k8s.io/examples/admin/dns/busybox.yaml        This command returns the following response to confirm that the test environment was deleted:Â pod â€œbusyboxâ€ deleted  "
  },
  
  {
    "title": "[K8S] Security",
    "url": "/posts/Security/",
    "categories": "Development, Kubernetes",
    "tags": "kubernetes, security",
    "date": "2022-12-26 00:06:00 +0900",
    





    
    "snippet": "",
    "content": ""
  },
  
  {
    "title": "[K8S] Database",
    "url": "/posts/Database/",
    "categories": "Development, Kubernetes",
    "tags": "kubernetes, setup",
    "date": "2022-12-26 00:05:00 +0900",
    





    
    "snippet": "PV, PVC ìƒì„±iMacPro:~$ vi domain-volume.yamlapiVersion: v1kind: PersistentVolumemetadata:  name: mysql-pv-volume  labels:    type: localspec:  storageClassName: manual  capacity:    storage: 10Gi  ac...",
    "content": "PV, PVC ìƒì„±iMacPro:~$ vi domain-volume.yamlapiVersion: v1kind: PersistentVolumemetadata:  name: mysql-pv-volume  labels:    type: localspec:  storageClassName: manual  capacity:    storage: 10Gi  accessModes:    - ReadWriteOnce  hostPath:    path: \"/mnt/data\"---apiVersion: v1kind: PersistentVolumeClaimmetadata:  name: mysql-pv-claim  namespace: domain-devspec:  storageClassName: manual  accessModes:    - ReadWriteOnce  resources:    requests:      storage: 10GiSecret(MySQL Root Password) ìƒì„±iMacPro:~$ k -n domain-dev create secret generic mysql-root-password --from-literal='password=root'MySQL Service ë° Deployment ìƒì„±pvì—ì„œ ë§ˆìš´íŠ¸í•œ /mnt/data ì— ë°ì´í„°ê°€ ìˆì„ ê²½ìš° í™˜ê²½ë³€ìˆ˜ ê°’ì´ ì ìš©ë˜ì§€ ì•ŠìŒ. ìƒˆë¡œ ë§Œë“¤ ê²½ìš° ë§ˆìš´íŠ¸ ê²½ë¡œì˜ ë°ì´í„°ë¥¼ ëª¨ë‘ ì§€ìš°ê³  ì§„í–‰í•´ì•¼ í•¨iMacPro:~$ vi domain-mysql.yamlapiVersion: v1kind: Servicemetadata:  name: mysql  namespace: domain-devspec:  ports:  - port: 3306  selector:    app: mysql  clusterIP: None---apiVersion: apps/v1kind: Deploymentmetadata:  name: mysql  namespace: domain-devspec:  selector:    matchLabels:      app: mysql  strategy:    type: Recreate  template:    metadata:      labels:        app: mysql    spec:      containers:      - image: mysql:5.6        name: mysql        env:        - name: MYSQL_ROOT_PASSWORD          valueFrom:            secretKeyRef:              name: mysql-root-password              key: password        - name: MYSQL_DATABASE          value: domain        - name: MYSQL_USER          value: domainops        - name: MYSQL_PASSWORD          value: tlsxhqnfdl#        - name: MYSQL_ROOT_HOST          value: '%'        ports:        - containerPort: 3306          name: mysql        volumeMounts:        - name: mysql-persistent-storage          mountPath: /var/lib/mysql      volumes:      - name: mysql-persistent-storage        persistentVolumeClaim:          claimName: mysql-pv-claimí´ëŸ¬ìŠ¤í„° ë‚´ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì† í™•ì¸iMacPro:~$ k -n domain-dev run -it --rm --image=mysql:5.6 --restart=Never mysql-client -- mysql -h mysql -ptlsxhqnfdl# -udomainopsIf you don't see a command prompt, try pressing enter.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || domain              |+--------------------+2 rows in set (0.00 sec)mysql&gt;ì™¸ë¶€ ì ‘ì†ì„ ìœ„í•œ ì„œë¹„ìŠ¤ ìƒì„± (Optional)ì™¸ë¶€ì—ì„œ ì ‘ì†í•˜ê¸° ìœ„í•œ ì„œë¹„ìŠ¤ëŠ” ì•„ë˜ì™€ ê°™ì´ ìƒì„±. ì´í›„ ingressì™€ ì—°ê²°í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— clusteripë¡œ ì„¤ì •iMacPro:~$ cat ./domain-mysql.yamlapiVersion: v1kind: Servicemetadata:  labels:    app: mysql  name: mysql  namespace: domain-devspec:  ports:  - name: mysql    port: 3306    protocol: TCP    targetPort: 3306  selector:    app: mysql  type: NodePortstatus:  loadBalancer: {}ubuntu@master:~$ k -n domain-dev get svcNAME           TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGEdemo-web-svc   ClusterIP   10.101.167.253   &lt;none&gt;        80/TCP           9dmysql          NodePort    10.105.168.240   &lt;none&gt;        3306:32334/TCP   12m"
  },
  
  {
    "title": "[K8S] Deployment, Service, Ingress",
    "url": "/posts/Deployment,-Service,-Ingress/",
    "categories": "Development, Kubernetes",
    "tags": "kubernetes, setup",
    "date": "2022-12-26 00:04:00 +0900",
    





    
    "snippet": "Namespace ìƒì„±í•„ìš”í•œ Namespace ë¥¼ ìƒì„±iMacPro:~$ k create ns domain-deviMacPro:~$ k create ns domain-prodDeployment ìƒì„±Container Repository ì—ì„œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ Demployment ìƒì„±iMacPro:~$ k -n domain-dev create deploy...",
    "content": "Namespace ìƒì„±í•„ìš”í•œ Namespace ë¥¼ ìƒì„±iMacPro:~$ k create ns domain-deviMacPro:~$ k create ns domain-prodDeployment ìƒì„±Container Repository ì—ì„œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ Demployment ìƒì„±iMacPro:~$ k -n domain-dev create deploy domain-web --image=??? --port 8080 --replicas 2iMacPro:~$ k -n domain-dev create deploy domain-api --image=??? --port 8080 --replicas 2Service ìƒì„±iMacPro:~$ k -n domain-dev expose deployment domain-api --name domain-api-svc --port=80 --target-port=8080iMacPro:~$ k -n domain-dev expose deployment domain-web --name domain-web-svc --port=80 --target-port=8080Ingress ìƒì„±iMacPro:~$ vi domain-dev-ingress.yamlapiVersion: networking.k8s.io/v1kind: Ingressmetadata:  annotations:    nginx.ingress.kubernetes.io/rewrite-target: /  name: domain-web-ingress  namespace: domain-devspec:  ingressClassName: nginx  rules:  - host: dev.domain.com    http:      paths:      - path: /        pathType: Prefix        backend:          service:            name: domain-web-svc            port:              number: 80---apiVersion: networking.k8s.io/v1kind: Ingressmetadata:  annotations:    nginx.ingress.kubernetes.io/rewrite-target: /  name: domain-api-ingress  namespace: domain-devspec:  ingressClassName: nginx  rules:  - host: dev.domain.com    http:      paths:      - path: /api        pathType: Prefix        backend:          service:            name: domain-api-svc            port:              number: 80"
  },
  
  {
    "title": "[K8S] Cluster Setup",
    "url": "/posts/Cluster-Setup/",
    "categories": "Development, Kubernetes",
    "tags": "kubernetes, setup",
    "date": "2022-12-26 00:03:00 +0900",
    





    
    "snippet": "ìš´ì˜ì PCì— í´ëŸ¬ìŠ¤í„° ì„¤ì •1.1. kubectl ì„¤ì¹˜ (Mac ê¸°ì¤€)iMacPro:~$ brew install kubectl1.2. Master ë…¸ë“œì— ê°œë°œìš© ì¸ì¦ì„œ ìƒì„± (optional)ubuntu@master:/etc/kubernetes/pki$ sudo openssl genrsa -out domain.com.ca.key 2048ubuntu@m...",
    "content": "ìš´ì˜ì PCì— í´ëŸ¬ìŠ¤í„° ì„¤ì •1.1. kubectl ì„¤ì¹˜ (Mac ê¸°ì¤€)iMacPro:~$ brew install kubectl1.2. Master ë…¸ë“œì— ê°œë°œìš© ì¸ì¦ì„œ ìƒì„± (optional)ubuntu@master:/etc/kubernetes/pki$ sudo openssl genrsa -out domain.com.ca.key 2048ubuntu@master:/etc/kubernetes/pki$ sudo openssl req -x509 -new -nodes -key ./domain.com.ca.key -subj \"/CN=domain.com\" -addext \"subjectAltName = DNS:domain.com,DNS:domain.com.default,DNS:domain.com.default.svc,DNS:domain.com.default.svc.cluster.local,DNS:master,IP:10.96.0.1,IP:172.31.28.166\" -out domain.com.ca.crt1.3. Master ë…¸ë“œì— í´ëŸ¬ìŠ¤í„° ë“±ë¡ (optional)apiserver.crt ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ”, í´ëŸ¬ìŠ¤í„°ì™€ í†µì‹ í•œë‹¤ëŠ” ê²ƒì´ ê²°êµ­ apiserverì™€ í†µì‹ ì„ ì˜ë¯¸í•˜ê¸°ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ apiserverì˜ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œë‹¤.ì´ ì¸ì¦ì„œë¥¼ ìœ„ì—ì„œ ë§Œë“  ê°œë°œìš© ì¸ì¦ì„œë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´, kube-apiserver.yamlì—ì„œ -tls-cert-file ì˜µì…˜ì„ ë³€ê²½í•´ì¤˜ì•¼í•œë‹¤.ubuntu@master:~$ k config set-cluster domain.com --server https://172.x.x.x:6443 --embed-certs --certificate-authority=/etc/kubernetes/pki/apiserver.crt1.4. ìš´ì˜ì PC í˜¸ìŠ¤íŠ¸íŒŒì¼ ë³€ê²½Master ë…¸ë“œì—ì„œ apiserver.crt(/etc/kubernetes/pki/)ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ì€ í›„, ì•„ë˜ ëª…ë ¹ìœ¼ë¡œ ì •ë³´ í™•ì¸.í´ëŸ¬ìŠ¤í„°ë¥¼ ë“±ë¡í•˜ë©´ì„œ ì‚¬ìš©í•œ ì¸ì¦ì„œ(crt) íŒŒì¼ì€ kubernetesë¥¼ í˜¸ìŠ¤íŠ¸ë¡œ ìš”ì²­ ì‹œì—ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.iMacPro:~$ openssl x509 -in ./apiserver.crt -noout -textCertificate:    Data:        Version: 3 (0x2)        ...        **Issuer: CN = kubernetes**        ...        X509v3 extensions:            ...            **X509v3 Subject Alternative Name:                DNS:kubernetes, DNS:kubernetes.default, DNS:kubernetes.default.svc, DNS:kubernetes.default.svc.cluster.local, DNS:master, IP Address:10.96.0.1, IP Address:172.x.x.x**    Signature Algorithm: sha256WithRSAEncryption    ...ë³„ë„ë¡œ ì¸ì¦ì„œë¥¼ ë°”ê¾¸ì§€ ì•Šê³ , ê¸°ë³¸ì ìœ¼ë¡œ ìƒì„±ëœ ì¸ì¦ì„œ(apiserver.crt)ë¥¼ ì‚¬ìš©í•  ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ìš´ì˜ì PCì˜ í˜¸ìŠ¤íŠ¸ íŒŒì¼ì— kubernetesë¥¼ ì•„ë˜ì™€ ê°™ì´ ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•˜ë©´ ëœë‹¤./etc/hosts...13.206.22.22  kubernetes...1.5. ìš´ì˜ì PCì— í´ëŸ¬ìŠ¤í„° ë“±ë¡iMacPro:~$ k config set-cluster domain.com --server https://kubernetes:6443 --embed-certs --certificate-authority=./apiserver.crtê°œë°œì(ìš´ì˜) ê³„ì • ì¶”ê°€ìš´ì˜ì ê³„ì •ìœ¼ë¡œ, Dev,Stg,Prod Namespaceì—ì„œ ë™ì‹œì— ì‚¬ìš©í•  ì˜ˆì •2.1. ê°œë°œì ê³„ì • ì¸ì¦ì„œ ìƒì„±ubuntu@master:~/domain$ openssl genrsa -out domain-ops.key 2048ubuntu@master:~/domain$ openssl req -new -key domain-ops.key -out domain-ops.csr...Common Name (e.g. server FQDN or YOUR name) []:**domain-ops**...2.2. CSR ìƒì„±ubuntu@master:~/domain$ cat ./domain-ops.yamlapiVersion: certificates.k8s.io/v1kind: CertificateSigningRequestmetadata:  name: domain-opsspec:  request: LS0tLS1CRU...  # cat ./domain-ops.csr | base64 | tr -d \"\\n\"   signerName: kubernetes.io/kube-apiserver-client  usages:  - client authubuntu@master:~/domain$ k apply -f ./domain-ops.yaml2.3. CSR ìŠ¹ì¸ubuntu@master:~/domain$ k get csrNAME        AGE   SIGNERNAME                            REQUESTOR          REQUESTEDDURATION   CONDITIONdomain-ops   5s    kubernetes.io/kube-apiserver-client   kubernetes-admin   &lt;none&gt;              **Pending**ubuntu@master:~/domain$ k certificate approve domain-opsubuntu@master:~/domain$ k get csrNAME        AGE     SIGNERNAME                            REQUESTOR          REQUESTEDDURATION   CONDITIONdomain-ops   2m34s   kubernetes.io/kube-apiserver-client   kubernetes-admin   &lt;none&gt;              **Approved,Issued**2.4. ì¸ì¦ì„œ ì¶”ì¶œubuntu@master:~/domain$ k get csr domain-ops -o jsonpath='{.status.certificate}' | base64 -d &gt; domain-ops.crt2.5. ê°œë°œì ê³„ì • kubeconfigì— ë“±ë¡ubuntu@master:~/domain$ k config set-credentials domain-ops --client-key ./domain-ops.key --client-certificate ./domain-ops.crt --embed-certs=true2.6. ìš´ì˜ìPCì— ê°œë°œì ê³„ì • ë“±ë¡. ìœ„ì—ì„œ ë§Œë“  ì‚¬ìš©ì í‚¤, ì¸ì¦ì„œëŠ” ì„œë²„ë¡œë¶€í„° ë‹¤ìš´ë¡œë“œ ë°›ì•„ì˜¨ë‹¤.iMacPro:~$ k config set-credentials domain-ops --client-key ./domain-ops.key --client-certificate ./domain-ops.crt --embed-certs=true2.7. ìš´ì˜ìPCì— ì»¨í…ìŠ¤íŠ¸ ìƒì„±iMacPro:~$ k config set-context domain-ops@domain.com --cluster domain.com --user domain-opsìš´ì˜ì PCì— ìµœì¢…. ì¶”ê°€ëœ í´ëŸ¬ìŠ¤í„°, ì‚¬ìš©ì, ì»¨í…ìŠ¤íŠ¸ ì •ë³´iMacPro:~$ k config viewapiVersion: v1clusters:**- cluster:    certificate-authority-data: DATA+OMITTED    server: https://kubernetes:6443  name: domain.com**...contexts:...**- context:    cluster: domain.com    user: domain-ops  name: domain-ops@domain.com**current-context: domain-ops@domain.comkind: Configpreferences: {}users:...**- name: domain-ops  user:    client-certificate-data: REDACTED    client-key-data: REDACTED**ê°œë°œì(ìš´ì˜) ê³„ì • RBAC ì¶”ê°€3.1. ê°œë°œì(ìš´ì˜)ì—ê²Œ í•„ìš”í•œ role í™•ì¸ìš°ì„ , ëª¨ë“  ê¶Œí•œì„ ë¶€ì—¬í•´ì£¼ì.ubuntu@master:~$ k create clusterrolebinding domain-ops --clusterrole cluster-admin --user domain-opsí´ëŸ¬ìŠ¤í„°, ë¦¬ì†ŒìŠ¤ë³„ ê¶Œí•œì€ ì°¨ì°¨ ë¶€ì—¬í•˜ê¸°ë¡œ í•œë‹¤."
  },
  
  {
    "title": "[K8S] Install Kubernetes Dashboard",
    "url": "/posts/Install-Kubernetes-Dashboard/",
    "categories": "Development, Kubernetes",
    "tags": "kubernetes, setup",
    "date": "2022-12-26 00:02:00 +0900",
    





    
    "snippet": "Deploy Kubernetes Dashboard UIubuntu@master:~$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.0/aio/deploy/recommended.yamlDeployment ë³€ê²½dashboardëŠ” http ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°, ë¡œê·¸ì¸ ...",
    "content": "Deploy Kubernetes Dashboard UIubuntu@master:~$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.0/aio/deploy/recommended.yamlDeployment ë³€ê²½dashboardëŠ” http ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°, ë¡œê·¸ì¸ ì—†ì´ ì ‘ì† ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •.spec:  containers:    - args:      - --enable-skip-login        # ë¡œê·¸ì¸ ì—†ì´ ì‹¤í–‰      - --enable-insecure-login    # http      - --namespace=kubernetes-dashboard      image: kubernetesui/dashboard:v2.5.0      imagePullPolicy: Always      livenessProbe:        failureThreshold: 3        httpGet:          path: /          port: 9090          scheme: HTTP        initialDelaySeconds: 30        periodSeconds: 10        successThreshold: 1        timeoutSeconds: 3      name: kubernetes-dashboard      ports:      - containerPort: 9090        protocol: TCPService ë³€ê²½spec:  internalTrafficPolicy: Cluster  ipFamilies:  - IPv4  ipFamilyPolicy: SingleStack  ports:  - port: 9090    protocol: TCP    targetPort: 9090  selector:    k8s-app: kubernetes-dashboardIngress ë“±ë¡ubuntu@master:~$k -n kubernetes-dashboard get ingress kubernetes-dashboard-ingress -o yamlapiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: kubernetes-dashboard-ingress  namespace: kubernetes-dashboard  annotations:    nginx.ingress.kubernetes.io/rewrite-target: /spec:  ingressClassName: nginx  rules:  - host: ### í•„ìš”í•œ ë„ë©”ì¸    http:      paths:      - path: /        pathType: Prefix        backend:          service:            name: kubernetes-dashboard            port:              number: 9090RBAC ì„¤ì •Dashboardì˜ ServiceAccountëŠ” í´ëŸ¬ìŠ¤í„° ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ê¶Œí•œì´ ì—†ê¸°ë•Œë¬¸ì—, Cluster Roleì˜ â€˜cluster-adminâ€™ ê¶Œí•œì„ ë°”ì¸ë”©# Cluster Role í™•ì¸ubuntu@master:~$ k get clusterrole | grep adminadmin                                                                  2022-11-07T02:03:19Z**cluster-admin**                                                          2022-11-07T02:03:19Zsystem:aggregate-to-admin                                              2022-11-07T02:03:19Zsystem:kubelet-api-admin                                               2022-11-07T02:03:19Z# Dashboard's ServiceAccount í™•ì¸ubuntu@master:~$ k -n kubernetes-dashboard describe deployments.apps kubernetes-dashboardName:                   kubernetes-dashboard...Pod Template:  Labels:           k8s-app=kubernetes-dashboard  Service Account:  **kubernetes-dashboard**...# ServiceAccount í™•ì¸ubuntu@master:~$ k -n kubernetes-dashboard get sa  # ServiceAccount í™•ì¸NAME                   SECRETS   AGEdefault                0         18m**kubernetes-dashboard**   0         18m# ClusterRolebinding ìƒì„± (ì´ ì„¤ì •ì€ ìœ„í—˜í•œ ì„¤ì •ì´ë‹¤)ubuntu@master:~$ k create clusterrolebinding kubernetes-dashboard-cluster-admin --serviceaccount kubernetes-dashboard:kubernetes-dashboard --clusterrole cluster-adminRBAC ì„¤ì • 2kubernetes-dashboardì— ì‚¬ìš©ì(ServiceAccount)ë¥¼ ì¶”ê°€í•˜ì—¬ ì´ ì‚¬ìš©ìì˜ í† í°ìœ¼ë¡œ dashboardì— ë¡œê·¸ì¸6.1. admin-user ì¶”ê°€apiVersion: v1kind: ServiceAccountmetadata:  name: admin-user  namespace: kubernetes-dashboard6.2. clusterrolebinding ì¶”ê°€apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata:  name: admin-userroleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: cluster-adminsubjects:- kind: ServiceAccount  name: admin-user  namespace: kubernetes-dashboard6.3. token ìƒì„±ì—¬ê¸°ì„œ ìƒì„±ëœ í† í°ì„ ì´ìš©í•˜ì—¬ dashboard ì— ë¡œê·¸ì¸í•˜ë©´ cluster-admin ê¶Œí•œìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.ubuntu@master:~$ kubectl -n kubernetes-dashboard create token admin-usereyJhbGciOiJSUzI1NiIsImtpZCI6IklMM192eWF..."
  },
  
  {
    "title": "[K8S] Install Nginx Ingress Controller",
    "url": "/posts/Install-Nginx-Ingress-Controller/",
    "categories": "Development, Kubernetes",
    "tags": "kubernetes, setup",
    "date": "2022-12-26 00:01:00 +0900",
    





    
    "snippet": "Nginx ê¸°ë°˜ Ingress ControllerëŠ” ë‹¤ì–‘í•œ ì¢…ë¥˜ê°€ ìˆëŠ”ë° ëŒ€í‘œì ìœ¼ë¡œ ì•„ë˜ 2ê°€ì§€ê°€ ìˆë‹¤.  kubernetes/ingress-nginx  nginxinc/kubernetes-ingressìš°ë¦¬ëŠ” ì²«ë²ˆì§¸ Ingress Controllerë¥¼ ì‚¬ìš©í•œë‹¤. (Kubernetes Docs ê¸°ì¤€)Nginx Ingress Controller ì„¤ì¹˜ì„¤ì¹˜ ...",
    "content": "Nginx ê¸°ë°˜ Ingress ControllerëŠ” ë‹¤ì–‘í•œ ì¢…ë¥˜ê°€ ìˆëŠ”ë° ëŒ€í‘œì ìœ¼ë¡œ ì•„ë˜ 2ê°€ì§€ê°€ ìˆë‹¤.  kubernetes/ingress-nginx  nginxinc/kubernetes-ingressìš°ë¦¬ëŠ” ì²«ë²ˆì§¸ Ingress Controllerë¥¼ ì‚¬ìš©í•œë‹¤. (Kubernetes Docs ê¸°ì¤€)Nginx Ingress Controller ì„¤ì¹˜ì„¤ì¹˜ í›„ì— Ingress Controllerì˜ validatingwebhookconfigurationsì„ ì‚­ì œ. 2020ë…„ 3ì›” ì—…ë°ì´íŠ¸ í›„ ìƒê¸´ê±´ë°, ì¸ì¦ ê´€ë ¨ ë³´ì•ˆì—…ë°ì´íŠ¸ë¡œ ìƒê¸´ ê²ƒìœ¼ë¡œ ë³´ì„. ì‚­ì œ í›„ ì§„í–‰.ubuntu@master:~$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.5.1/deploy/static/provider/baremetal/deploy.yamlubuntu@master:~$ kubectl delete validatingwebhookconfigurations.admissionregistration.k8s.io ingress-nginx-admissionNginx Ingress Controller í…ŒìŠ¤íŠ¸2.1. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ Namespace ìƒì„±ubuntu@master:~$ k create ns ingress-test2.2. í…ŒìŠ¤íŠ¸ìš© ì›¹ì„œë¹„ìŠ¤ Deploymentsë¡œ ìƒì„±ubuntu@master:~$ k -n ingress-test create deploy demo-web --image=whatwant/node-web:1.0 --port 8080 --replicas 22.3. ì„œë¹„ìŠ¤ ìƒì„±ubuntu@master:~$ kubectl -n ingress-test expose deployment demo-web --name demo-web-svc --port=80 --target-port=80802.4. ingress resource ì‘ì„±ubuntu@master:~$ vi ingress-test.yamlapiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: demo-web-ingress  namespace: ingress-test  annotations:    nginx.ingress.kubernetes.io/rewrite-target: /spec:  ingressClassName: nginx  rules:  - host: demo.domain.com    http:      paths:      - path: /test        pathType: Prefix        backend:          service:            name: demo-web-svc            port:              number: 802.5. ingress ë°˜ì˜ubuntu@master:~$ k apply -f ./ingress-test.yaml2.6. ì ‘ì† í…ŒìŠ¤íŠ¸ubuntu@master:~$ k get nodes -o wideNAME     STATUS   ROLES           AGE     VERSION   INTERNAL-IP     EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION    CONTAINER-RUNTIMEmaster   Ready    control-plane   4d1h    v1.25.3   172.x.x.x   &lt;none&gt;        Ubuntu 22.04.1 LTS   5.15.0-1019-aws   docker://20.10.12worker   Ready    &lt;none&gt;          3d20h   v1.25.3   172.x.x.x    &lt;none&gt;        Ubuntu 22.04.1 LTS   5.15.0-1019-aws   docker://20.10.12ubuntu@master:~$ k -n ingress-nginx get svcNAME                                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                      AGEingress-nginx-controller             NodePort    10.97.203.183   &lt;none&gt;        80:31280/TCP,443:31227/TCP   138mingress-nginx-controller-admission   ClusterIP   10.97.125.41    &lt;none&gt;        443/TCP                      138mubuntu@master:~$ curl http://172.31.20.49:31280/testYou've hit demo-web-69d8dc7db6-lppch  # ì˜ë¨AWS ALB ì„¤ì •3.1. AWSì—ì„œ ë¡œë“œë°¸ëŸ°ì„œì˜ ëŒ€ìƒê·¸ë£¹ì— Worker Node ë¡œ ì‚¬ìš©ë˜ëŠ” EC2 ë“±ë¡. í¬íŠ¸ëŠ” 31280."
  },
  
  {
    "title": "[K8S] Install Kubernetes with Kubeadm",
    "url": "/posts/Install-Kubernetes-with-Kubeadm/",
    "categories": "Development, Kubernetes",
    "tags": "kubernetes, setup",
    "date": "2022-12-26 00:00:00 +0900",
    





    
    "snippet": "Production í™˜ê²½ êµ¬ì„±1.1. ë…¸ë“œê°„ ì›í™œí•œ í†µì‹ ì„ ìœ„í•œ hostname ì„¤ì • (Master; worker ë³„ë„ ì„¤ì • í•„ìš”)root@ip:~# hostnamectl set-hostname master1.2. Host íŒŒì¼ ì„¤ì • (Master; worker ë³„ë„ ì„¤ì • í•„ìš”)root@ip:~# vi /etc/hosts127.0.0.1 localho...",
    "content": "Production í™˜ê²½ êµ¬ì„±1.1. ë…¸ë“œê°„ ì›í™œí•œ í†µì‹ ì„ ìœ„í•œ hostname ì„¤ì • (Master; worker ë³„ë„ ì„¤ì • í•„ìš”)root@ip:~# hostnamectl set-hostname master1.2. Host íŒŒì¼ ì„¤ì • (Master; worker ë³„ë„ ì„¤ì • í•„ìš”)root@ip:~# vi /etc/hosts127.0.0.1 localhost172.x.x.x master172.x.x.x worker...1.3. ë…¸ë“œ í™•ì¸ - 2Core CPU, 2GB ì´ìƒ RAM, swap ë©”ëª¨ë¦¬ ë¹„í™œì„±í™”. AWSëŠ” ê¸°ë³¸ì ìœ¼ë¡œ swap ë©”ëª¨ë¦¬ê°€ ë¹„í™œì„±í™” ë˜ì–´ ìˆìŒ.ubuntu@master:~$ free -h               total        used        free      shared  buff/cache   availableMem:           1.8Gi       170Mi       1.3Gi       0.0Ki       318Mi       1.5GiSwap:             0B          0B          0B1.4. iptablesê°€ bridgeëœ íŠ¸ë˜í”½ì„ ë³´ë„ë¡ ì„¤ì • (Master, Worker)root@master:~# cat &lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.confoverlaybr_netfilterEOFroot@master:~# modprobe overlayroot@master:~# modprobe br_netfilterroot@master:~# cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.confnet.bridge.bridge-nf-call-iptables  = 1net.bridge.bridge-nf-call-ip6tables = 1net.ipv4.ip_forward                 = 1EOFroot@master:~# sysctl --systemContainer Runtime ì„¤ì¹˜2.1. Docker ì—”ì§„ ì„¤ì¹˜ (Master, Worker)root@master:~# apt updateroot@master:~# apt install -y docker.ioroot@master:~# systemctl enable --now docker2.2. cri-dockerd ì„¤ì¹˜ (Master, Worker)root@master:~# cat /etc/os-release  # OS ë²„ì „ í™•ì¸root@master:~# wget https://github.com/Mirantis/cri-dockerd/releases/download/v0.2.6/cri-dockerd_0.2.6.3-0.ubuntu-jammy_amd64.debroot@master:~# dpkg -i ./cri-dockerd_0.2.6.3-0.ubuntu-jammy_amd64.debroot@master:~# systemctl status cri-docker3. kubeadm, kubelet, kubectl ì„¤ì¹˜3.1. apt íŒ¨í‚¤ì§€ ìƒ‰ì¸ ì—…ë°ì´íŠ¸, kubernetes íŒ¨í‚¤ì§€ ì„¤ì¹˜ (Master, Worker)root@master:~# sudo apt-get updateroot@master:~# sudo apt-get install -y apt-transport-https ca-certificates curl3.2. êµ¬ê¸€ í´ë¼ìš°ë“œ public singing key (Master, Worker)root@master:~# sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg3.3. kubernetes repository ì¶”ê°€ (Master, Worker)root@master:~# echo \"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main\" | sudo tee /etc/apt/sources.list.d/kubernetes.list3.4. apt package index update, kubelet, kubeadm, kubectl ì„¤ì¹˜ (Master, Worker)root@master:~# sudo apt-get updateroot@master:~# sudo apt-get install -y kubelet kubeadm kubectlroot@master:~# sudo apt-mark hold kubelet kubeadm kubectlí´ëŸ¬ìŠ¤í„° ìƒì„±4.1. Kubeadmì„ ì´ìš©í•œ Cluster ìƒì„± (Master)root@master:~# kubeadm init --pod-network-cidr=192.168.0.0/16 --cri-socket unix:///var/run/cri-dockerd.sock# kubectlì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì•„ë˜ ëª…ë ¹ ì‹¤í–‰ (ìœ„ ëª…ë ¹ì˜ ì‹¤í–‰ê²°ê³¼ë¡œ ë‚˜ì˜´)root@master:~# mkdir -p $HOME/.kube  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config  sudo chown $(id -u):$(id -g) $HOME/.kube/configroot@master:~# kubectl get nodesNAME     STATUS     ROLES           AGE   VERSIONmaster   **NotReady**   control-plane   15m   v1.25.3CNI - Calico ì„¤ì¹˜5.1. Calico ì„¤ì¹˜ (ì°¸ì¡° : https://projectcalico.docs.tigera.io/getting-started/kubernetes/quickstart)root@master:~# kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.24.4/manifests/tigera-operator.yamlroot@master:~# kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.24.4/manifests/custom-resources.yamlroot@master:~# kubectl get nodesNAME     STATUS   ROLES           AGE   VERSIONmaster   **Ready**    control-plane   17m   v1.25.3Calico ë¼ìš°íŒ… ì„¤ì •6.1. calicoctl ì„¤ì¹˜root@master:~# cd /usr/local/binroot@master:/usr/local/bin# curl -L https://github.com/projectcalico/calico/releases/download/v3.24.4/calicoctl-linux-amd64 -o calicoctlroot@master:/usr/local/bin# chmod +x ./calicoctl6.2. calicoëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Host Route ê¸°ëŠ¥ì´ ì—†ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì€ ì‘ì—…ì„ í•´ì¤˜ì•¼ í•œë‹¤. (ì°¸ê³  : https://coffeewhale.com/calico-mode) ê·¸ëŸ°ë° calico 3.42 ë²„ì „ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ vxlanì´ CrossSubnetìœ¼ë¡œ í™œì„±í™”ë˜ì–´ ìˆë‹¤. ìš°ë¦¬ëŠ” worker ë…¸ë“œë¥¼ 1ê°œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ ë‘ë„ë¡ í•œë‹¤. í…ŒìŠ¤íŠ¸í•´ë³´ë‹ˆ 1ê°œ ë…¸ë“œì— ìˆëŠ” ì—¬ëŸ¬ íŒŒë“œê°€ ì„œë¡œ í†µì‹ í•˜ëŠ”ë°ëŠ” ë¬¸ì œê°€ ì—†ì–´ ë³´ì¸ë‹¤. ê·¸ë˜ë„ ë¼ìš°íŒ… ì˜µì…˜ì„ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´ 6.3 ì§„í–‰.ubuntu@master:~$ calicoctl get ippool -o wideNAME                  CIDR             NAT    IPIPMODE   VXLANMODE     DISABLED   DISABLEBGPEXPORT   SELECTORdefault-ipv4-ippool   192.168.0.0/16   true   Never      CrossSubnet   false      false              all()6.3. (Optional) Calicoì˜ ë¼ìš°íŒ…ì„ IP-in-IP ëª¨ë“œë¡œ ë³€ê²½. íŒŒë“œê°„ í„°ë„ë§. ì™¸ë¶€(host) ë„¤íŠ¸ì›Œí¬ê°€ ë‚´ë¶€(íŒŒë“œ) ë„¤íŠ¸ì›Œí¬ë¥¼ ê°ì‹¼ í˜•íƒœroot@master:~# cat ./mycni.yamlapiVersion: projectcalico.org/v3kind: IPPoolmetadata:  name: default-ipv4-ippoolspec:  blockSize: 26  cidr: 192.168.0.0/16  ipipMode: Always  natOutgoing: true  nodeSelector: all()  vxlanMode: Neverroot@master:~# calicoctl apply -f ./mycni.yamlWorker Node ì—°ê²°7.1. Master Nodeì— Worker Node ì—°ê²°# 4.1. ì—ì„œ ì‹¤í–‰í•œ ëª…ë ¹ì˜ ê²°ê³¼ë¡œ token ê°’ ì¶œë ¥. cri-socket ì˜µì…˜ ì¶”ê°€ í• ê²ƒ.root@master:~# kubeadm join 172.x.x.x:6443 --token &lt;token&gt; \\        --discovery-token-ca-cert-hash &lt;sha256:token&gt; \\        --cri-socket unix:///var/run/cri-dockerd.sock"
  },
  
  {
    "title": "Warp Starship with zsh",
    "url": "/posts/Warp-Starship-with-zsh/",
    "categories": "Computer, Environments",
    "tags": "mac, zsh",
    "date": "2022-11-21 00:00:00 +0900",
    





    
    "snippet": "Install Starship Terminalbrewë¥¼ í†µí•´ starship terminalì„ ì„¤ì¹˜í•œë‹¤.brew install starship1.1. starship terminalì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Nerd Fontë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. https://www.nerdfonts.com/font-downloads ì—ì„œ ì ë‹¹í•œ í°íŠ¸ë¥¼ ê³¨ë¼ ì„¤ì¹˜í•˜ì. Hac...",
    "content": "Install Starship Terminalbrewë¥¼ í†µí•´ starship terminalì„ ì„¤ì¹˜í•œë‹¤.brew install starship1.1. starship terminalì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Nerd Fontë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. https://www.nerdfonts.com/font-downloads ì—ì„œ ì ë‹¹í•œ í°íŠ¸ë¥¼ ê³¨ë¼ ì„¤ì¹˜í•˜ì. Hack Nerd Fontë¥¼ ì¶”ì²œ.ë‹¤ìš´ë¡œë“œ í›„ Hack Regular Nerd Font Complete.ttf íŒŒì¼ë§Œ ì„¤ì¹˜í•´ì£¼ë©´ ëœë‹¤.1.2. ëª…ë ¹ í”„ë¡¬í”„íŠ¸ì—ì„œ starship configë¥¼ ì‹¤í–‰í•˜ë©´ vi editorê°€ ì—´ë¦°ë‹¤. ì•„ë˜ ë‚´ìš©ì„ ë„£ê³  ì €ì¥í•œë‹¤.https://raw.githubusercontent.com/ChristianLempa/dotfiles/main/.config/starship.toml ì°¸ì¡°# ~/.config/starship.toml# Inserts a blank line between shell promptsadd_newline = false# Change command timeout from 500 to 1000 mscommand_timeout = 1000# Change the default prompt format# ---# old config ...# format = \"\"\"\\# [â•­â•´](238)$env_var \\# $all[â•°â”€îªœ](238)$character\"\"\"# new configformat = \"\"\"$env_var $all\"\"\"# Change the default prompt characters[character]# old config# success_symbol = \"[ï•“](238)\"# error_symbol = \"[ï•“](238)\"success_symbol = \"\"error_symbol = \"\"# Shows an icon that should be included by zshrc script based on the distribution or os[env_var.STARSHIP_DISTRO]format = '[$env_value](white)'variable = \"STARSHIP_DISTRO\"disabled = false# Shows the username[username]style_user = \"white\"style_root = \"white\"format = \"[$user]($style) \"disabled = falseshow_always = true[hostname]ssh_only = falseformat = \"on [$hostname](bold yellow) \"disabled = false[directory]truncation_length = 1truncation_symbol = \"â€¦/\"home_symbol = \"ïŸ ~\"read_only_style = \"197\"read_only = \" ï€£ \"format = \"at [$path]($style)[$read_only]($read_only_style) \"[git_branch]symbol = \"ï¡ \"format = \"via [$symbol$branch]($style) \"# truncation_length = 4truncation_symbol = \"â€¦/\"style = \"bold green\"[git_status]format = '[\\($all_status$ahead_behind\\)]($style) 'style = \"bold green\"conflicted = \"ğŸ³\"up_to_date = \"ï† \"untracked = \"ï”© \"ahead = \"â‡¡${count}\"diverged = \"â‡•â‡¡${ahead_count}â‡£${behind_count}\"behind = \"â‡£${count}\"stashed = \"ï£– \"modified = \"ï„ \"staged = '[++\\($count\\)](green)'renamed = \"è¥ \"deleted = \"ï€” \"[kubernetes]format = 'via [ï´± $context\\($namespace\\)](bold purple) 'disabled = false# (deactivated because of no space left)# [terraform]format = \"via [ï„µ terraform $version]($style) å£Ÿ [$workspace]($style) \"disabled = true[vagrant]format = \"via [ï„µ vagrant $version]($style) \"disabled = true[docker_context]format = \"via [ïŒˆ $context](bold blue) \"disabled = true[helm]format = \"via [ïˆš $version](bold purple) \"disabled = true[python]symbol = \"ï Ÿ \"python_binary = \"python3\"disabled = true[nodejs]format = \"via [ï¢˜ $version](bold green) \"disabled = true[ruby]format = \"via [îˆ¾ $version]($style) \"disabled = true1.3. í”„ë¡¬í”„íŠ¸ë¥¼ ì˜ˆì˜ê²Œ í‘œì‹œí•˜ê¸° ìœ„í•´ í™ˆë””ë ‰í„°ë¦¬ ë°‘ ë‹¤ìŒ ê²½ë¡œ(.zsh/starship.zsh)ì— ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ íŒŒì¼ì„ ë§Œë“¤ì–´ ì¤€ë‹¤. https://raw.githubusercontent.com/ChristianLempa/dotfiles/main/.zsh/starship.zsh ì°¸ì¡°# find out which distribution we are running onLFILE=\"/etc/*-release\"MFILE=\"/System/Library/CoreServices/SystemVersion.plist\"if [[ -f $LFILE ]]; then  _distro=$(awk '/^ID=/' /etc/*-release | awk -F'=' '{ print tolower($2) }')elif [[ -f $MFILE ]]; then  _distro=\"macos\"fi# set an icon based on the distro# make sure your font is compatible with https://github.com/lukas-w/font-logoscase $_distro in    *kali*)                  ICON=\"ï´£\";;    *arch*)                  ICON=\"ïŒƒ\";;    *debian*)                ICON=\"î½\";;    *raspbian*)              ICON=\"ïŒ•\";;    *ubuntu*)                ICON=\"ïŒ›\";;    *elementary*)            ICON=\"ïŒ‰\";;    *fedora*)                ICON=\"ïŒŠ\";;    *coreos*)                ICON=\"ïŒ…\";;    *gentoo*)                ICON=\"ïŒ\";;    *mageia*)                ICON=\"ïŒ\";;    *centos*)                ICON=\"ïŒ„\";;    *opensuse*|*tumbleweed*) ICON=\"ïŒ”\";;    *sabayon*)               ICON=\"ïŒ—\";;    *slackware*)             ICON=\"ïŒ˜\";;    *linuxmint*)             ICON=\"ïŒ\";;    *alpine*)                ICON=\"ïŒ€\";;    *aosc*)                  ICON=\"ïŒ\";;    *nixos*)                 ICON=\"ïŒ“\";;    *devuan*)                ICON=\"ïŒ‡\";;    *manjaro*)               ICON=\"ïŒ’\";;    *rhel*)                  ICON=\"ïŒ–\";;    *macos*)                 ICON=\"ï”´\";;    *)                       ICON=\"ï…¼\";;esacexport STARSHIP_DISTRO=\"$ICON\"ê·¸ë¦¬ê³  ì•„ë˜ ë‚´ìš©ì„ .zshrc ì˜ ë§¨ ë°‘ì— ë„£ì–´ì¤€ë‹¤.[[ -f ~/.zsh/starship.zsh ]] &amp;&amp; source ~/.zsh/starship.zsheval \"$(starship init zsh)\"Install Warpbrewë¥¼ í†µí•´ warpë¥¼ ì„¤ì¹˜í•œë‹¤.brew install warpwarp ì•±ì„ ì‹¤í–‰ì‹œí‚¤ë©´ ê³„ì •ì„ í•„ìš”ë¡œ í•œë‹¤. ì ë‹¹í•œ ì´ë©”ì¼ë¡œ ê°€ì…Set Warp Preferences3.1. í„°ë¯¸ë„ ì¤„ ê°„ê²© ì¤„ì´ê¸°Apperance &gt; Blocks &gt; Compact mode : On3.2. í„°ë¯¸ë„ í”„ë¡¬í”„íŠ¸ í‘œì‹œFeatures &gt; Honor Userâ€™s custom prompt(PS1) : On3.3. ëª…ë ¹ì–´ ìë™ ì™„ì„±Open Completions Menu as you type : On3.4. í°íŠ¸ ë³€ê²½Appearnce &gt; Text &gt; Terminal font : Hack Nerd FontSet Font on Terminalsí„°ë¯¸ë„ì„ ì‚¬ìš©í•˜ëŠ” ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì— ì•ì„œ ì„¤ì¹˜í•œ Hack Nerd Fontë¥¼ ê¸°ë³¸ í°íŠ¸ë¡œ ì„¤ì •í•´ì¤€ë‹¤.4.1. VSCodeCommand + , ë¡œ VSCode ì„¤ì •íŒŒì¼ì„ ì—´ê³  font ë¥¼ ê²€ìƒ‰.Edit in settings.json ì„ ì—´ì–´ì„œ, ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤.\"terminal.integrated.fontFamily\": \"'Hack Nerd Font'\","
  },
  
  {
    "title": "Enterprise IAM",
    "url": "/posts/EnterpriseIAM/",
    "categories": "Security, General",
    "tags": "IAM, auth",
    "date": "2020-04-10 00:00:00 +0900",
    





    
    "snippet": "Identity and Access ManagementëŠ” ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìê°€ í•„ìš”í•œ ìì›ì„ ì›í•˜ëŠ” ì‹œê¸°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë³´ì•ˆ ì›ì¹™ìœ¼ë¡œ, ì‰½ê²Œ ìƒê°ë˜ê² ì§€ë§Œ, ì‹ ê²½ì¨ì•¼í•  ë¶€ë¶„ì´ ë§ë‹¤. ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ í™•ì‹¤íˆ í•´ì•¼í•  í•„ìš”ê°€ ìˆê³ , ì‚¬ìš©ìì˜ ì ‘ì† ê³¼ì •ì´ ë¶ˆí¸í•˜ì§„ ì•Šì€ì§€ ìƒê°í•´ì•¼í•˜ë§Œ í•œë‹¤. ëª¨ë“  ë³´ì•ˆ ì¥ì¹˜ë“¤ì„ í†µê³¼í•´ì•¼ë§Œ ê¶Œí•œì„ ì–»ì„ ìˆ˜ ìˆë„ë¡ ë§Œë“œëŠ”...",
    "content": "Identity and Access ManagementëŠ” ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìê°€ í•„ìš”í•œ ìì›ì„ ì›í•˜ëŠ” ì‹œê¸°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë³´ì•ˆ ì›ì¹™ìœ¼ë¡œ, ì‰½ê²Œ ìƒê°ë˜ê² ì§€ë§Œ, ì‹ ê²½ì¨ì•¼í•  ë¶€ë¶„ì´ ë§ë‹¤. ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ í™•ì‹¤íˆ í•´ì•¼í•  í•„ìš”ê°€ ìˆê³ , ì‚¬ìš©ìì˜ ì ‘ì† ê³¼ì •ì´ ë¶ˆí¸í•˜ì§„ ì•Šì€ì§€ ìƒê°í•´ì•¼í•˜ë§Œ í•œë‹¤. ëª¨ë“  ë³´ì•ˆ ì¥ì¹˜ë“¤ì„ í†µê³¼í•´ì•¼ë§Œ ê¶Œí•œì„ ì–»ì„ ìˆ˜ ìˆë„ë¡ ë§Œë“œëŠ”ê²Œ ëŠ¥ì‚¬ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤.Enterprise Identity and Access Managementì¼ë°˜ì ì¸ ê¸°ì—…ì˜ IAM ì†”ë£¨ì…˜ì˜ êµ¬ì„± ìš”ì†Œë¥¼ ì‚´í´ë³´ì.AD/LDAPì‚¬ìš©ì ì •ë³´ ì €ì¥ì†Œê°€ í•„ìš”í•˜ë‹¤. Active Directoryë¥¼ ì¢…ì¢… ì‚¬ìš©í•œë‹¤.(ê¼­ ADì¼ í•„ìš”ëŠ” ì—†ë‹¤)Single Sign-Onê½¤ ì¼ì°ë¶€í„° ê¸°ì—…ë“¤ì€ Single Sign-On(SSO)ì— íˆ¬ìë¥¼ í•´ì™”ë‹¤. ì²˜ìŒì—” íšŒì‚¬ ë‚´ì—ì„œ ì‚¬ìš©í•  ëª©ì ìœ¼ë¡œ ë¹„í‘œì¤€ ë°©ì‹ì˜ SSOë¥¼ êµ¬í˜„í–ˆë‹¤.Identity Federation (Federated SSO)ì™¸ë¶€ íŒŒíŠ¸ë„ˆì™€ ê°™ì´ ì¼í•˜ê³ , SaaSì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ë©´ì„œ SSOì™€ ê°™ì€ í†µí•© ê³„ì •ì´ í•„ìš”í•´ì¡Œê³ , í‘œì¤€ í†µí•© ê³„ì •ìœ¼ë¡œ ì—¬ëŸ¬ ê³µê¸‰ ì—…ì²´ì˜ ì œí’ˆì„ í†µí•©í•  ìˆ˜ ìˆë‹¤.Multi-factor Authenticationë‹¤ë‹¨ê³„ ì¸ì¦ì„ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìì— ëŒ€í•œ ë” ë†’ì€ ì‹ ë¢°ë„ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ë‹¤ë‹¨ê³„(Multi-factor) ì¸ì¦ì´ í•„ìš”í•˜ë‹¤.Automated ProvisioningSaaSì˜ ì‚¬ìš©ìê°€ ì¦ê°€í•¨ì— ë”°ë¼, ë§ì€ íšŒì‚¬ë“¤ì´ ì„ì§ì› ê´€ë¦¬ ì‹œìŠ¤í…œì— ì‚¬ìš©ìë¥¼ ì—°ê²°í•˜ê¸° ì‹œì‘í–ˆë‹¤. HRMS ê¸°ë°˜ì˜ ì‚¬ìš©ì ê´€ë¦¬, ìš”ì²­/ìŠ¹ì¸ ê³¼ì •, SaaS ë˜ëŠ” ë‚´ë¶€ ì‹œìŠ¤í…œ í• ë‹¹(Provisioning) ë“±ì˜ ë‚´ìš©ì´ í¬í•¨ëœë‹¤.Compliance - Audit, Reporting AnalyticsIAMì€ ëª¨ë‹ˆí„°ë§í•˜ê³  ê°ì‹œí•˜ëŠ” ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤. ì—­í•  ë¶„ë¦¬, ìê²© ì¦ëª…ë“±ì˜ ë‚´ìš©ì´ í¬í•¨ëœë‹¤.Authentication and AuthorizationAuthentication(AuthN) ì€ ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ ì¦ëª…í•˜ëŠ” í–‰ìœ„ë‹¤. ì¼ë°˜ì ìœ¼ë¡œ usernameê³¼ passwordë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, ë” ë†’ì€ ì‹ ë¢°ë„ë¥¼ ìœ„í•´ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œë‹¤. MFA ê°™ì€ ê²ƒì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.Authorization(AuthZ) ì€ ì‚¬ìš©ìê°€ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ëŒ€ìƒì„ ê²°ì •í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¡œê·¸ì¸í•œ í›„ì— ê³µìœ  íŒŒì¼ì„ ì—´ê³  ë‚´ìš©ì„ í™•ì¸í•  ë•Œ, ê·¸ íŒŒì¼ì— ëŒ€í•œ ê¶Œí•œì´ ì‚¬ìš©ìì˜ Authorizationì´ë‹¤.Basic Local Identity and Access Managementê°œë°œìëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ìš”ì²­ì„ ë°›ìœ¼ë©´ ìš”êµ¬ ì‚¬í•­ ë¶„ì„ì„ ì‹œì‘í•˜ê³  ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ë§Œë“¤ê¸° ì‹œì‘í•œë‹¤.ì‚¬ìš©ìë³„ ì„¤ì •, í™˜ê²½ì„¤ì • ê·¸ë¦¬ê³  ì ‘ê·¼ ê¶Œí•œ ë“±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì„œë¡œ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì„ ë‚˜ëˆ„ê¸° ìœ„í•œ ë°©ë²•ì´ í•„ìš”í•´ì§„ë‹¤. ê·¸ë˜ì„œ ê°œë°œìëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ë§ˆë‹¤ ì‚¬ìš©ì ì €ì¥ì†Œë¥¼ ë§Œë“¤ê³  ì¸ì¦ ë¡œì§ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ë¬¼ë¡  ì½”ë“œëŠ” ì¬ì‚¬ìš©ë  ê²ƒì´ë‹¤.ë¬´ìŠ¨ ì¼ì´ ë°œìƒí–ˆì„ê¹Œ? ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì€ ê°ê° ë³€ê²½ë  ê²ƒì´ê³  ìƒí™©ì€ ë§¤ìš° ì•ˆì¢‹ì•„ì§ˆ ê²ƒì´ë‹¤. ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ê´€ë¦¬í•˜ëŠ” ê°œë°œìëŠ” ì´ì œ ì‚¬ìš©ì ì €ì¥ì†Œë¥¼ ë³´í˜¸í•˜ëŠ”ë° ì‹ ê²½ ì¨ì•¼í•  ê²ƒì´ë‹¤. ì¸ì¦ ê³¼ì •ì— ë¬¸ì œê°€ ìƒê¸°ëŠ”ì§€, í•´í‚¹ë‹¹í•˜ì§€ ì•ŠëŠ”ì§€ ë³´ì¥í•˜ëŠ” ì¼ì€ ê°œë°œìì—ê² ë§¤ìš° ê³ í†µìŠ¤ëŸ¬ìš´ ì¼ì´ë‹¤.ì‚¬ìš©ì ì…ì¥ì—ì„œë„ ë°˜ë“œì‹œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì•¼ í•˜ê³ , ì¢…ì¢… ì·¨ì•½í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì¬ì‚¬ìš©í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ê´€ë¦¬ì ë˜í•œ ë§¤ìš° ê³ í†µìŠ¤ëŸ¬ìš´ë°, ë¨¼ì €, ê° ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³ , ì‚¬ìš©ìê°€ íƒˆí‡´í•˜ë©´ ìœ„ì™€ ê°™ì€ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê°ê°ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°˜ë“œì‹œ ì‚¬ìš©ìë¥¼ ë¹„í™œì„±í™” í•´ì•¼ í•œë‹¤.Modern Identity Management and Accessí˜„ëŒ€ì— ì“°ì´ëŠ” ì¸ì¦ ëª¨ë¸ì€ í´ë ˆì„ ê¸°ë°˜ ëª¨ë¸ë¡œì¨, ê°œë°œìëŠ” í´ë ˆì„ì„ ë°›ì•„ì£¼ëŠ” ë” ë‹¨ìˆœí•œ ë¡œì§ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¸ì¦ ê³¼ì •ì„ ë°”ê¾¸ì—ˆë‹¤.ì‹ ë¢°ì„±(TRUST)ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ Identity Provider(IdP) ì‚¬ì´ì—ì„œ ì‹œì‘ëœë‹¤. IdPëŠ” ì¸ì¦ì´ë‚˜ ê¶Œí•œì„ í™•ì¸í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ë¡œ ë³´ë©´ ì‰½ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¨ìˆœíˆ IdPì—ì„œ ì „ì†¡ëœ í´ë ˆì„ë§Œ ë°›ìœ¼ë©´ ëœë‹¤.ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì‚¬ìš©ì ì •ë³´ ì„¤ì •ê³¼ ì ì ˆí•œ ê¶Œí•œì„ ìœ„í•´ ë¡œì»¬ ì‚¬ìš©ì ì €ì¥ì†Œë¥¼ ê°€ì§€ê³  ìˆì§€ë§Œ, ë¹„ë°€ë²ˆí˜¸ë¥¼ ê´€ë¦¬í•˜ì§„ ì•ŠëŠ”ë‹¤. ì‚¬ìš©ìê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì§ì ‘ ì¸ì¦ì„ ì‹œë„í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤. ëŒ€ì‹  ì‚¬ìš©ìëŠ” IdPì—ì„œ ì¸ì¦ì„ ë°›ì•„ì•¼ í•œë‹¤.ì‚¬ìš©ìê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ì†í•˜ê³ ì í•˜ë©´, í´ë ˆì„ì´ë‚˜ ì ‘ì† í† í°ì´ IdPì— ì˜í•´ ìƒì„±ë˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë³´ë‚´ì§„ë‹¤. IdPëŠ” ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì— í´ë ˆì„ì„ ë°œí–‰í•  ìˆ˜ ìˆë‹¤.í´ë ˆì„ ê¸°ë°˜ ì ‘ì† ë°©ì‹ì€ ê°œë°œì, ì‚¬ìš©ì, ê´€ë¦¬ì ëª¨ë‘ì—ê²Œ ì¢‹ë‹¤. ê°œë°œìë“¤ì€ ê°•ë ¥í•œ ì¸ì¦ ë°©ë²•ì„ ë§Œë“¤ í•„ìš”ê°€ ì—†ê³  ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³´í˜¸í•´ì•¼í•  í•„ìš”ê°€ ì—†ë‹¤. ë§Œì•½ ì¸ì¦ ë°©ë²•ì´ ë³€ê²½ë˜ì•¼ í•œë‹¤ë©´ IdPì—ì„œ ë°”ê¾¸ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë°”ê¾¸ì§€ ì•Šê³  ë‚¨ê²¨ë‘ë©´ ëœë‹¤. ì‚¬ìš©ìë“¤ì€ IdPì—ì„œ í•œë²ˆ ì¸ì¦ì„ ë°›ìœ¼ë©´ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê°„í¸í•˜ê²Œ ì ‘ì†í•  ìˆ˜ ìˆë‹¤. ê´€ë¦¬ìë“¤ì€ ì‚¬ìš©ìê°€ í‡´ì‚¬í•  ê²½ìš° IdPì—ì„œ ì‚¬ìš©ìë¥¼ ë¹„í™œì„±í™”í•˜ëŠ” ì¦‰ì‹œ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©í•  ìˆ˜ ìˆë‹¤.Real world exampleì¢€ ë” ê¹Šê²Œ í´ë ˆì„ì— ëŒ€í•œ ê°œë…ì„ ì´í•´í•˜ê¸° ìœ„í•´ ì¼ë°˜ì ì¸ ìƒí™©ì— ë§ì¶”ì–´ ë³´ì.ì—¬í–‰ì„ ê°„ë‹¤ê³  ìƒìƒí•´ë³´ì. ëª©ì ì§€ë¥¼ ì •í•˜ê³  ê³µí•­ì— ë„ì°©í–ˆë‹¤.  ì²´í¬ì¸ ì¹´ìš´í„°(IdP)ì— ê°€ì„œ ì—¬ê¶Œì„ ì œì‹œí•˜ê³  í‹°ì¼“ êµ¬ì… ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤.  ì²´í¬ì¸ ì§ì›ì€ ì—¬ê¶Œì„ í™•ì¸í•˜ê³  íƒ‘ìŠ¹ê¶Œ(Claim)ì„ ë°œê¸‰í•´ì¤€ë‹¤.  ë³´ì•ˆì²´í¬ë¥¼ í†µê³¼í•˜ê³  íƒ‘ìŠ¹í•  ì°¨ë¡€ë‹¤. íƒ‘ìŠ¹ê¶Œì„ ê²Œì´íŠ¸(SP) ì§ì›ì—ê²Œ ë³´ì—¬ì¤€ë‹¤.ê²Œì´íŠ¸ëŠ” ì²´í¬ì¸ ì¹´ìš´í„°ë¥¼ ì‹ ë¢°(Trust)í•œë‹¤.  íƒ‘ìŠ¹ê¶Œì€ ì„œëª…(Signed)ë˜ì–´ ìˆê³ , ê²Œì´íŠ¸ëŠ” ì¡°ì‘ì—¬ë¶€ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.íƒ‘ìŠ¹ê¶Œ(Claim)ì—ëŠ” ì´ë¦„, ë¹„í–‰í¸ ë“±ì˜ ì •ë³´(attribute)ê°€ ë“¤ì–´ìˆë‹¤.Creating Trustí´ë ˆì„ ê¸°ë°˜ ì¸ì¦ ëª¨ë¸ì—ì„  ì‹ ë¢°(Trust)ê°€ í•µì‹¬ì´ë‹¤. ì œëŒ€ë¡œ ë™ì‘í•˜ê¸° ìœ„í•´ì„  ì• í”Œë¦¬ì¼€ì´ì…˜ì´ IdPë¥¼ ë°˜ë“œì‹œ ì‹ ë¢°í•´ì•¼ í•œë‹¤. ì‹ ë¢° ê´€ê³„ë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì€ í‘œì¤€ì— ë”°ë¼ ë‹¤ì–‘í•œë°, ì¸ì¦ì„œë¥¼ êµí™˜í•˜ëŠ” ë°©ì‹ì´ ë§ì´ ì“°ì¸ë‹¤. ì‹ ë¢° ê´€ê³„ë¥¼ ë§Œë“¤ ë•Œ ì¢…ì¢… íŒŒì¼ì´ë‚˜ íŒŒì¼ì— ê±¸ë¦° ë§í¬ì™€ ê°™ì€ ì¼ë°˜ì ì¸ ë©”íƒ€ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì´ ì •ë³´ë¥¼ ê³µìœ í•˜ëŠ”ë°, ë©”íƒ€ ë°ì´í„° íŒŒì¼ì„ ì‚¬ìš©í•˜ë©´ ì‹ ë¢° ì„¤ì •ì´ ê°„ë‹¨í•´ì§„ë‹¤.  ë©”íƒ€ ë°ì´í„°ëŠ” ë³´í†µ ì¸ì¦ì„œë¥¼ í¬í•¨í•˜ê³  ìˆê³ , ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ URL ê·¸ë¦¬ê³  ì‹œìŠ¤í…œ ì‚¬ìš©ì— í•„ìš”í•œ ê°’ ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤. ë©”íƒ€ ë°ì´í„° íŒŒì¼ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì´ëŸ° ê°’ë“¤ì„ ì§ì ‘ ì…ë ¥í•´ì¤˜ì•¼ í•œë‹¤. ì–´ë–¤ ê²½ìš°, ì¸ì¦ì„œ ëŒ€ì‹  ì‹œìŠ¤í…œ IDì™€   ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤.Identity Managementì´ì œ í´ë ˆì„ ê¸°ë°˜ ì¸ì¦ì— ëŒ€í•œ ì´í•´ê°€ ìƒê²¼ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ëŠ” ì—¬ì „íˆ ì‚¬ìš©ì ì •ë³´ë¥¼ ê´€ë¦¬í•´ì•¼ í•œë‹¤.  ì˜¤ëŠ˜ë‚  ë§ì€ íšŒì‚¬ì—ì„  ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì¤‘ì•™ ì§‘ì¤‘ì‹ ì¸ì  ìì› ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ì´ ì‹œìŠ¤í…œì€ IdPì— ì‚¬ìš©ìë¥¼ ë³´ë‚´ì£¼ê³ , IdPëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©ìë¥¼ ì „ë‹¬í•œë‹¤.Metadirectoryí•˜ì§€ë§Œ, ëŒ€ê¸°ì—…ì˜ ê²½ìš° ë” ë§ì€ ì¤‘ì•™ ì§‘ì¤‘ì‹ ì‹œìŠ¤í…œì´ í•„ìš”í•˜ê³ , ë‹¤ì–‘í•œ ì‚¬ìš©ì ì €ì¥ì†Œê°€ ìˆë‹¤. ë”°ë¼ì„œ ë©”íƒ€ ë””ë ‰í† ë¦¬ë¥¼ ì¤‘ì•™ ì§‘ì¤‘ì‹ ë‹¨ì¼ ì§€ì ìœ¼ë¡œ í†µí•©í•œë‹¤. ì´ ë©”íƒ€ ë””ë ‰í† ë¦¬ëŠ” ì¸ì  ìì› ì‹œìŠ¤í…œì— ì˜í•´ ì œê³µëœë‹¤. ë©”íƒ€ ë””ë ‰í† ë¦¬ì—ì„œ ì‚¬ìš©ìëŠ” ë‹¤ë¥¸ ì‹œìŠ¤í…œ ì¤‘ í•˜ë‚˜ì™€ ë™ê¸°í™”ëœë‹¤. ì´ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©ìì˜ ì „ì²´ ìˆ˜ëª…ì£¼ê¸°ëŠ” ë©”íƒ€ ë””ë ‰í† ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•œë‹¤.Realm/Security Domainí´ë ˆì„ ê¸°ë°˜ ì¸ì¦ì— ëŒ€í•´ ì´ì•¼ê¸° í•  ë•Œ ì˜ì—­(Realm) ë˜ëŠ” ë³´ì•ˆ ë„ë©”ì¸(Security Domain)ì´ë€ ë‹¨ì–´ë¥¼ ìì£¼ ë“¤ì–´ë´¤ì„ ê²ƒì´ë‹¤. ì˜ì—­ì´ë‚˜ ë³´ì•ˆ ë„ë©”ì¸ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‹ ë¢°(Trust)ì˜ ë²”ìœ„ë‹¤. ì˜ì—­(Realm) ì•ˆì—ì„œ ê° í•­ëª©ë“¤ì€ ì„œë¡œë¥¼ ì‹ ë¢°í•œë‹¤. ê·¸ë¦¬ê³  í´ë ˆì„ì€ ì‹œìŠ¤í…œì— ëŒ€í•œ ì ‘ì†ì„ ìœ„í•´ ì‚¬ìš©ëœë‹¤.Multiple Realmsì—¬ëŸ¬ ì˜ì—­(Realm) ì´ë‚˜ ë³´ì•ˆ ë„ë©”ì¸(Security Doamin)ì´ ìˆë‹¤ë©´, ê¸°ë³¸ì ìœ¼ë¡œ ì´ë“¤ì€ ì„œë¡œë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ë‹¤. ì˜ì—­(Realm) Aì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ IdP(A) ì—ì„œ ë°œê¸‰ë°›ì€ í´ë ˆì„ì€ ì˜ì—­(Realm) Bì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.Federationìœ„ì™€ ê°™ì€ ì´ìœ ë¡œ í˜ë”ë ˆì´ì…˜(Federation, í†µí•©)ì˜ ê°œë…ì´ ë“±ì¥í–ˆë‹¤. í˜ë”ë ˆì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ì„œë¡œ ë‹¤ë¥¸ ë‘ ì˜ì—­ê°„ ì‹ ë¢° ê´€ê³„ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì˜ì—­(Realm) Bì˜ ì‚¬ìš©ìê°€ ì˜ì—­(Realm) Aì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë¡œì»¬ IdPë¥¼ ì´ìš©í•˜ì—¬ ì¸ì¦í•œ ë‹¤ìŒ ë‹¤ë¥¸ ì˜ì—­(Realm)ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‰½ê²Œ ì ‘ì†í•  ìˆ˜ ìˆë‹¤.  ì‚¬ìš©ì ê´€ë¦¬ëŠ” ê° ì˜ì—­(Realm) ë‚´ì—ì„œ ì²˜ë¦¬ëœë‹¤. ì¦‰, ì˜ì—­(Realm) Bì˜ ì‚¬ìš©ì ê´€ë¦¬ìê°€ ì‚¬ìš©ìì—ê²Œ ê¶Œí•œì„ ë¶€ì—¬í•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ìš©ìëŠ” ë” ì´ìƒ ì ‘ì† ê¶Œí•œì„ ê°–ì§€ ëª»í•œë‹¤. ì˜ì—­(Realm) Aì˜ ê´€ë¦¬ìì—ê²Œ ì•Œë¦´ í•„ìš”ë„ ì—†ë‹¤. ì‚¬ìš©ìëŠ” ì˜ì—­(Realm) Bì—ì„œ í•œ ë²ˆ ê¶Œí•œì„ ìƒê²Œ ë˜ë©´ ëª¨ë“  ê³³ì—ì„œ ê¶Œí•œì„ ìƒëŠ”ë‹¤.Level of Assuranceì˜ì—­(Realm)ê°„ í†µí•© ì‹œ, ì¸ì¦ ìˆ˜ì¤€ì— ëŒ€í•œ ë¶€ë¶„ì„ ë¹¼ë†“ì„ ìˆ˜ ì—†ëŠ”ë°, ë‹¤ë¥¸ ì˜ì—­(Realm)ì˜ í”„ë¡œì„¸ìŠ¤, ì‹œìŠ¤í…œ, ì‚¬ìš©ì, ê´€ë¦¬ìë¥¼ ì–¼ë§ˆë‚˜ ì‹ ë¢°í•˜ëŠ”ì§€ì— ëŒ€í•œ ê²ƒì´ë‹¤. ì˜ì—­(Realm) Bì—ì„œ ìƒì„±ëœ ì‚¬ìš©ìë¥¼ ì¸ì¦í•˜ê¸° ìœ„í•œ ì ì ˆí•œ ì‹ë³„ ìˆ˜ë‹¨ì„ ì œê³µí•´ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  ì¸ì¦ì„ ìœ„í•´ ë‹¤ë‹¨ê³„ ì¸ì¦ì´ ì œê³µëœë‹¤. ë‚´ ë³´ì¦(Assurance) ìˆ˜ì¤€ì€ ìƒë‹¹íˆ ë†’ì§€ë§Œ ì‚¬ìš©ìê°€ ë‹¨ìˆœíˆ ìµëª…ì˜ ì–‘ì‹ì„ ì±„ìš°ê³  ê³„ì •ì„ ë§Œë“¤ ìˆ˜ ìˆê³  ì˜¤ì§ ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ë§Œìœ¼ë¡œ ì¸ì¦í•œë‹¤ë©´ ë‚´ ë³´ì¦(Assurance) ìˆ˜ì¤€ì€ ë‹¹ì—°íˆ ê½¤ ë‚®ì„ ê²ƒì´ë‹¤. ë§ì€ í´ë ˆì„ì— ì‚¬ìš©ì ì¸ì¦ ë°©ë²•ì— ëŒ€í•œ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì— ì´ë¥¼ ì—°ê²°ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì„œë¡œ ë‹¤ë¥¸ ë‘ ì˜ì—­ê°„ì— ì‹ ë¢°ê°€ ì„¤ì •ë˜ì–´ ìˆì§€ë§Œ ì‚¬ìš©ìê°€ ë„ˆë¬´ ì•½í•œ ì¸ì¦ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ëœ ê²½ìš°, ì ‘ê·¼ì„ í—ˆìš©í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì‚¬ìš©ìë¥¼ ì‚¬ìš©ìì˜ ì˜ì—­ìœ¼ë¡œ ë‹¤ì‹œ ëŒë ¤ë³´ë‚´ê³  ë” ë†’ì€ ìˆ˜ì¤€ì˜ ì¸ì¦ì˜ ë©”ì‹œì§€ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆë‹¤.The Claimí´ë ˆì„(Claim)ê³¼ ê´€ë ¨í•˜ì—¬ ë‹¤ì–‘í•œ í‘œì¤€ì´ ìˆëŠ”ë°, ì´ê²ƒì€ í´ë ˆì„(Claim)ì— ë‹¤ì–‘í•œ ë‚´ìš©ì´ í¬í•¨ë  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•œë‹¤. í•˜ì§€ë§Œ ìµœì†Œí•œ ê³ ìœ í•œ ì‚¬ìš©ì ì‹ë³„ìê°€ í¬í•¨ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. í´ë ˆì„(Claim)ì€ ì„œëª…(Sign)ë˜ëŠ” ê²½ìš°ë„ ìˆë‹¤. ì´ ê²½ìš° ì—”í‹°í‹°ëŠ” í´ë ˆì„(Claim)ì´ ì¡°ì‘ë˜ì§€ ì•Šì•˜ëŠ”ì§€ ê²€ì¦í•  ìˆ˜ ìˆë‹¤. ìš”ì¦˜ì—” ì¶”ê°€ ë³´í˜¸ë¥¼ ìœ„í•´ ì „ì²´ í´ë ˆì„(Claim)ì„ ì•”í˜¸í™” í•˜ëŠ” ê²ƒì´ ì¼ë°˜í™”ë˜ì–´ ìˆë‹¤. ì–´ë–¤ í´ë ˆì„(Claim)ì—ëŠ” ì‚¬ìš©ìê°€ ì¸ì¦ ê´€ë¦¬ë¥¼ í•˜ëŠ”ì§€ ì—¬ë¶€ì— ëŒ€í•œ ì •ë³´ê°€ ë“¤ì–´ìˆë‹¤. ì´ìƒí•˜ê²Œ ë“¤ë¦´ ìˆ˜ ìˆëŠ”ë°, ì‚¬ìš©ìê°€ íŠ¹ì • ì¸ì¦ ë°©ë²•ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ í´ë ˆì„(Claim)ì— ì „ë‹¬í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤. ì¸ì¦ ë°©ë²•ì´ ì•½í•˜ë‹¤ê³  íŒë‹¨ë˜ë©´ ë” ê°•ë ¥í•œ ì¸ì¦ ë°©ë²•ì„ ì‚¬ìš©í•˜ë„ë¡ ì‚¬ìš©ìë¥¼ ëŒë ¤ë³´ë‚¼ ìˆ˜ ìˆë‹¤. ì–´ë–¤ í‘œì¤€ì€ ë‹¤ë¥¸ í‘œì¤€ì´ ë§¤ìš° ì—„ê²©í•˜ê²Œ ë‹¤ë£¨ëŠ” í´ë ˆì„(Claim)ì— ë§¤ìš° ìœ ì—°í•˜ë‹¤. ì´ë©”ì¼ ì£¼ì†Œ, ì´ë¦„ê°™ì€ ê²ƒë“¤ì„ í™•ì¸í•˜ê¸°ë„ í•œë‹¤. í´ë ˆì„(Claim)ì— ì—­í• , ê·¸ë£¹, ë©¤ë²„ì‹­ê³¼ ê°™ì€ ê²ƒë“¤ì„ ì „ë‹¬í•œë‹¤.Claim Transformationí´ë ˆì„ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜(Claim Transformation)ì˜ ë‘ ê°€ì§€ ì˜ˆì‹œê°€ ìˆë‹¤.ì²« ë²ˆì§¸ë¡œ, í•œ ê°€ì§€ íƒ€ì…ì˜ í´ë ˆì„ìœ¼ë¡œ IdPì— ê¶Œí•œì„ ì–»ê¸° ìœ„í•´ ì ‘ì†í•œë‹¤. Kerberosë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤. ì¸ì¦ë˜ë©´, IdPëŠ” ìƒˆë¡œìš´ ì¢…ë¥˜ì˜ í´ë ˆì„ê³¼ í•¨ê»˜ ë‹¤ìŒ ê³¼ì •ì„ ì§„í–‰í•œë‹¤. ë‹¤ìŒ ê³¼ì •ì€ SAML ê¸°ë°˜ì˜ í´ë ˆì„ìœ¼ë¡œ ì§„í–‰ëœë‹¤.ë˜ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ, ì˜ˆì‹œì²˜ëŸ¼ í´ë ˆì„ì˜ ë‚´ìš©ì„ ë°”ê¾¼ë‹¤ë©´ ì‚¬ìš©ìëŠ” usernameê³¼ passwordë¡œ IdPì— ê°œì¸ì„ ì¸ì¦í•œë‹¤. ê·¸ëŸ¬ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ê°œì¸ ì‚¬ìš©ìë¥¼ êµ¬ë¶„í•  í•„ìš”ê°€ ì—†ê¸°ë•Œë¬¸ì— í´ë ˆì„ì—ì„œ í•„ìš”í•œ ê²ƒì€ ê·¸ë£¹ ë©¤ë²„ì‹­ì´ë‚˜ ì§ì›ì˜ ì—­í•  ì •ë„ë‹¤.Chained Federationí´ë ˆì„ì´ ì¢…ë£Œë˜ê³  ìƒˆ í´ë ˆì„ì´ ë°œí–‰ë˜ëŠ” ê²½ìš° í™‰ì„ í†µí•´ ì „ë‹¬ë˜ì§€ ì•Šì€ ê° í™‰ìœ¼ë¡œ ì—°í•© ì—”í‹°í‹° ì²´ì¸ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ì´ ì˜ˆì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì²´ì¸ì˜ ë§ˆì§€ë§‰ ID ì œê³µì ë§Œ ì‹ ë¢°í•˜ë©° ë§ˆì§€ë§‰ìœ¼ë¡œ ë©€í‹° íŒ©í„°ë¥¼ ëª…í™•íˆí•˜ê¸° ìœ„í•´ ì¸ì¦ ë˜ëŠ” MFA.í†µí•© ì—”í‹°í‹° ì²´ì¸ì„ êµ¬ì¶• í•  ìˆ˜ ìˆë‹¤. ê° ë‹¨ê³„ì—ì„œ í´ë ˆì„ì´ ì¢…ë£Œë˜ê³  ìƒˆë¡œìš´ í´ë ˆì„ì´ ë°œí–‰ë˜ê³  í´ë ˆì„ì€ ê° ë‹¨ê³„ë¥¼ í†µê³¼í•˜ì§€ ì•ŠëŠ”ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì²´ì¸ì˜ ë§ˆì§€ë§‰ IdPë§Œ ì‹ ë¢°í•œë‹¤.Multi-Factor Authentication (MFA)MFAëŠ” ìµœì†Œí•œ ë‘ ê°€ì§€ ë‹¤ë¥¸ ìš”ì†Œë¥¼ í•„ìš”ë¡œ í•´ì•¼í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸, í•€, ì¸ì¦ì„œ ë˜ëŠ” ì§€ë¬¸ê°™ì€ ê²ƒì´ë‹¤. usernameê³¼ passwordë¥¼ ì‚¬ìš©í–ˆë”ë¼ë„ ì—¬ì „íˆ í•œ ê°€ì§€ ìš”ì†Œë§Œ ì‚¬ìš©í•œ ê²ƒì´ë‹¤. ì´ê²ƒì€ ì‚¬ìš©ìë¥¼ ê·€ì°®ê²Œ í–ˆì„ë¿ ì‹ ë¢°ì„±ì„ ë†’ì´ì§€ëŠ” ëª»í•œ ê²ƒì´ë‹¤."
  },
  
  {
    "title": "ZSH Settings",
    "url": "/posts/ZSHSettings/",
    "categories": "Computer, Environments",
    "tags": "mac, zsh",
    "date": "2020-02-14 00:00:00 +0900",
    





    
    "snippet": "bash shellì„ ë„ˆë¬´ ì˜¤ë˜ ì¨ì˜¤ë‹¤ë³´ë‹ˆ, zshë¡œ ì¡°ê¸ˆ ëŠ¦ê²Œ ë„˜ì–´ì˜¤ê²Œ ë˜ì—ˆë‹¤. ë‚œ bashê°€ ì¢‹ì€ë°..(ìµìˆ™í•´ì„œ)Change shell to zshThe default interactive shell is now zsh.To update your account to use zsh, please run `chsh -s /bin/zsh`.for mor...",
    "content": "bash shellì„ ë„ˆë¬´ ì˜¤ë˜ ì¨ì˜¤ë‹¤ë³´ë‹ˆ, zshë¡œ ì¡°ê¸ˆ ëŠ¦ê²Œ ë„˜ì–´ì˜¤ê²Œ ë˜ì—ˆë‹¤. ë‚œ bashê°€ ì¢‹ì€ë°..(ìµìˆ™í•´ì„œ)Change shell to zshThe default interactive shell is now zsh.To update your account to use zsh, please run `chsh -s /bin/zsh`.for more details, please visit https://support.apple.com/kb/HT208050.foo@bar:~$ chsh -s /bin/zshOH MY ZSH ì„¤ì¹˜foo@bar:~$ sh -c \"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"NPM ì„¤ì • ë³µì‚¬-&gt; ~ cat ~/.bash_profile &gt;&gt; ~/.zshrc-&gt; ~ source ~/.zshrcnpm ëª…ë ¹ì´ ì˜ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸.iTerm2 Colour Scheme ë³€ê²½ì›í•˜ëŠ” ê±¸ë¡œ ì°¾ì•„ì„œ ë³€ê²½í•´ë´…ì‹œë‹¤.ZSH Plugin ì„¤ì¹˜  zsh-auto    -&gt; ~ git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions        zsh-highlight    -&gt; ~ git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting      .zshrc íŒŒì¼ì—ì„œplugins=(  git  zsh-syntax-highlighting  zsh-autosuggestions)Powerline font ì„¤ì¹˜Download Meslo LG M Regular for Powerlineë‹¤ìš´ë¡œë“œ í›„ ì„¤ì¹˜.ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” IDE ë“±ì—ì„œ font-famliyì— Meslo LG M Regular for Powerline ì…ë ¥ZSH theme ì„¤ì¹˜.zshrc íŒŒì¼ì—ì„œZSH_THEME=\"agnoster\"-&gt; ~ source ~/.zshrcVIM ê¾¸ë¯¸ê¸°í•˜ëŠ”ê¹€ì—..wrkholic84 &gt; vi ~/.vimrcset hlsearchset rulerset autoindentset cindentset nuset ts=4set shiftwidth=4syntax onë."
  },
  
  {
    "title": "Tor as a SOCKS Proxy",
    "url": "/posts/TorAsASOCKSProxy/",
    "categories": "Security, Web",
    "tags": "proxy",
    "date": "2020-01-12 00:00:00 +0900",
    





    
    "snippet": "ìš”ì¦˜ ì›¹ ì‚¬ì´íŠ¸ì—” ì •ë§ ë‹¤ì–‘í•œ ë³´ì•ˆ ì •ì±…ë“¤ì´ ì ìš©ë˜ì–´ ìˆë‹¤. ê·¸ ì¤‘ IP ì°¨ë‹¨ ì •ì±…ì€ ëª¨ì˜í•´í‚¹ì„ ìˆ˜í–‰í•  ë•Œ ìˆì–´ì„œ ë§¤ìš° ê³¨ì¹«ê±°ë¦¬ê°€ ì•„ë‹ ìˆ˜ ì—†ë‹¤.IP ì°¨ë‹¨ ì •ì±…ì„ ìš°íšŒí•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ëª‡ê°€ì§€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ìë©´, VPNì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. í•˜ì§€ë§Œ VPNì€ ì‚¬ì‹¤ ìƒ ìœ ë£Œ ì„œë¹„ìŠ¤ì´ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ëŠ”ë° ë¶€ë‹´ì´ ëœë‹¤. ê·¸ ëŒ€ì•ˆìœ¼ë¡œ Torê°€ ìˆë‹¤. TorëŠ” ë¬´...",
    "content": "ìš”ì¦˜ ì›¹ ì‚¬ì´íŠ¸ì—” ì •ë§ ë‹¤ì–‘í•œ ë³´ì•ˆ ì •ì±…ë“¤ì´ ì ìš©ë˜ì–´ ìˆë‹¤. ê·¸ ì¤‘ IP ì°¨ë‹¨ ì •ì±…ì€ ëª¨ì˜í•´í‚¹ì„ ìˆ˜í–‰í•  ë•Œ ìˆì–´ì„œ ë§¤ìš° ê³¨ì¹«ê±°ë¦¬ê°€ ì•„ë‹ ìˆ˜ ì—†ë‹¤.IP ì°¨ë‹¨ ì •ì±…ì„ ìš°íšŒí•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ëª‡ê°€ì§€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ìë©´, VPNì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. í•˜ì§€ë§Œ VPNì€ ì‚¬ì‹¤ ìƒ ìœ ë£Œ ì„œë¹„ìŠ¤ì´ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ëŠ”ë° ë¶€ë‹´ì´ ëœë‹¤. ê·¸ ëŒ€ì•ˆìœ¼ë¡œ Torê°€ ìˆë‹¤. TorëŠ” ë¬´ë£Œì´ê³  HTTPë¥¼ í¬í•¨í•œ ëª¨ë“  í”„ë¡œí† ì½œì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.TorThe Onion Routerì˜ ì•½ìë‹¤. í•œêµ­ì—ì„  â€˜í† ë¥´â€™ë¼ê³  ë¶€ë¥´ëŠ”ë° ì‚¬ì‹¤ â€˜í† ì–´â€™ë¼ê³  ë¶€ë¥´ëŠ”ê²Œ ë§ë‹¤. ì•„ë¬´íŠ¼ TorëŠ” ì „ë‹¬ëœ ë°ì´í„°ë¥¼ ìµëª…ìœ¼ë¡œ ì²˜ë¦¬í•˜ë„ë¡ ë””ìì¸ëœ ì¸í„°ë„· ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œì´ë‹¤. Torì˜ ë™ì‘ì›ë¦¬ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯ì´ ëª©ì ì§€ê¹Œì§€ í•œ ë²ˆì— í†µì‹ í•˜ì§€ ì•Šê³ , ì¤‘ê°„ì— ì—¬ëŸ¬ ë…¸ë“œë“¤ì„ ê±°ì³ ë³´ë‚´ê¸° ë•Œë¬¸ì— ìµœì¢… ëª©ì ì§€ì—ì„œëŠ” ë‚´ IPë¥¼ ìˆ¨ê¸¸ ìˆ˜ ìˆë‹¤.ê·¸ë ‡ë‹¤ í•˜ë”ë¼ë„ IP ì°¨ë‹¨ì€ í”¼í•  ìˆ˜ ì—†ë‹¤. ì—¬ê¸°ì„œ Torì˜ ì§„ê°€ê°€ ë°œíœ˜ë˜ëŠ”ë° Exit Nodeê°€ ëª©ì ì§€ë¡œë¶€í„° ì°¨ë‹¨ ë‹¹í•œ ê²½ìš° TorëŠ” ìƒˆë¡œìš´ Exit Nodeë¥¼ í• ë‹¹í•˜ì—¬ ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ ì¤€ë‹¤.  ê·¸ë¦¬ê³  ì°¨ë‹¨ ë‹¹í•œ NodeëŠ” Bridges1 ë¡œ ë‹¤ì‹œê¸ˆ ì—­í• ì„ í•˜ê²Œ ëœë‹¤.SOCKS ProxySOCKSëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ì˜ TCP/UDP í†µì‹ ì„ í”„ë¡ì‹œ ì„œë²„ë¥¼ ê±°ì³ ì§„í–‰í•˜ë„ë¡ í•´ì£¼ëŠ” í”„ë¡œí† ì½œì´ë‹¤. í”„ë¡ì‹œ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ IPë¥¼ ìˆ¨ê²¨ì£¼ëŠ” ê¸°ëŠ¥ì„ í•œë‹¤. HTTP ProxyëŠ” HTTP í”„ë¡œí† ì½œì„ ì§€ì›í•˜ëŠ” ë°˜ë©´ SOCKS ProxyëŠ” ë” ë‚®ì€ ìˆ˜ì¤€ì—ì„œ Proxy ì—­í• ì„ í•œë‹¤. SOCKS 4/4a/5 ë²„ì „ì´ ìˆëŠ”ë° ì•ìœ¼ë¡œ ì§„í–‰í•  ë‚´ìš©ì—ì„  SOCKS 5ë¥¼ ì´ìš©í•œë‹¤.Tor as a SOCKS5 Proxyì¼ë°˜ì ìœ¼ë¡œ TorëŠ” 9050ë²ˆ í¬íŠ¸ë¡œ SOCKS ì—°ê²°ì„ ì§€ì›í•œë‹¤.(ì°¸ê³ ë¡œ Tor ë¸Œë¼ìš°ì €ëŠ” 9150ë²ˆ í¬íŠ¸ë¡œ ì§€ì›í•œë‹¤) í´ë¼ì´ì–¸íŠ¸ PCì—ì„œ í”„ë¡œê·¸ë¨ì€ SOCKS5 ì„¤ì •ì„ í†µí•´ Torì˜ SOCKS ë¡œ ì ‘ì†í•  ìˆ˜ ìˆë‹¤. ê°„ë‹¨íˆ ë‹¨ì ì„ ì–¸ê¸‰í•˜ê³  ì§€ë‚˜ê°€ìë©´ Tor ìì²´ê°€ ì¢€ ëŠë¦¬ë‹¤. ì—¬ëŸ¬ ë…¸ë“œë¥¼ ì§€ë‚˜ê°€ë‹¤ë³´ë‹ˆ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ë‹¤.Install Tor (for Mac)TorëŠ” ì´ 3ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤. ê·¸ ì¤‘ Tor ë¸Œë¼ìš°ì €ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ëŠ” ê²ƒìœ¼ë¡œ ì‰½ê²Œ ì„¤ì¹˜í•  ìˆ˜ ìˆì§€ë§Œ, ì—¬ê¸°ì„œëŠ” Macì˜ brew ë¼ëŠ” íŒ¨í‚¤ì§€ ê´€ë¦¬ìë¥¼ í†µí•´ Tor ë¥¼ ì„¤ì¹˜í•´ë³¼ ê²ƒì´ë‹¤. (ì´ë ‡ê²Œ ì„¤ì¹˜í•˜ëŠ”ê²Œ ê¹”ë”í•˜ê³ , ì›í•˜ëŠ” ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤) Torë¥¼ ì„¤ì¹˜í•˜ëŠ” ëª…ë ¹ì–´ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.Mac:~ user$ brew install torMac:~ user$ brew install torMac:~ user$ brew services start tortor     started spidey /Users/spidey/Library/LaunchAgents/homebrew.mxcl.tor.plistìœ„ì™€ ê°™ì´ ë‚˜ì˜¤ë©´ Tor ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ìš©í•  ì¤€ë¹„ê°€ ëœ ê²ƒì´ë‹¤.Configure Firefox BrowserFirefox ë¸Œë¼ìš°ì €ë¥¼ ì´ìš©í•´ Tor ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ìš©í•´ë³¼ ê²ƒì´ë‹¤. ì•„ë˜ëŠ” ì„¤ì • í™”ë©´ì´ë‹¤.HTTP ë˜ëŠ” HTTPS í†µì‹ ì€ SOCKS í˜¸ìŠ¤íŠ¸ë¥¼ ëª©ì ì§€ë¡œ ë¨¼ì € HTTP í”„ë¡ì‹œ (127.0.0.1:8080)ë¡œ ìš”ì²­ì„ ë³´ë‚´ê²Œ ëœë‹¤.Configure Burp SuiteHTTP í”„ë¡ì‹œë¡œ ë³´ë‚´ì§„ ìš”ì²­ì„ í™•ì¸í•˜ê¸° ìœ„í•´ Burp Suiteì„ ì‚¬ìš©í•œë‹¤. ì•„ë˜ëŠ” Burp suiteì˜ ì„¤ì • í™”ë©´ì´ë‹¤.ëì´ë‹¤. ì´ì œ Firefox ë¸Œë¼ìš°ì €ë¥¼ ì´ìš©í•´ ì ‘ì†í•œ ì›¹ì‚¬ì´íŠ¸ëŠ” Burp Suiteì„ í†µí•´ Tor ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ìš©í•˜ê²Œ ëœë‹¤.Torë¥¼ ì´ìš©í•œ IP ì°¨ë‹¨ ìš°íšŒëŠ” Torë¥¼ ê±´ì „í•œ ëª©ì ìœ¼ë¡œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤. ì†ë„ê°€ ëŠë¦¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆì§€ë§Œ ìœ ë£Œ VPNì„ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì´ë¼ë©´ ì¶©ë¶„íˆ ì´ìš©í• ë§Œí•œ ê°€ì¹˜ê°€ ìˆë‹¤ê³  ìƒê°í•œë‹¤. ì£¼ì˜í•  ì ì€ Torë„ ì™„ë²½í•˜ì§€ ì•Šë‹¤ëŠ” ì ì´ë‹¤. í•˜ì§€ë§Œ Tor project ì˜ ì¤€ìˆ˜ì‚¬í•­ì„ ì˜ ì§€í‚¨ë‹¤ë©´ ì•ˆì „í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆë‹¤.  1 ì°¨ë‹¨ ë‹¹í•œ Exit NodeëŠ” Middle Nodeë¡œ ìœ„ì¹˜ë¥¼ ë°”ê¾¸ì–´ ì§€ì†ì ìœ¼ë¡œ Tor ë„¤íŠ¸ì›Œí¬ì—ì„œ ì—­í• ì„ í•˜ê²Œëœë‹¤."
  },
  
  {
    "title": "Semantic Versioning(SemVer)",
    "url": "/posts/SemanticVersioning/",
    "categories": "Development, General",
    "tags": "versioning",
    "date": "2020-01-06 00:00:00 +0900",
    





    
    "snippet": "ì–´ëŠ ì •ë„ ê·œëª¨ê°€ ìˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ê°œë°œí•  ë•Œë©´ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê²Œëœë‹¤. ê·¸ë¦¬ê³  ìì—°ìŠ¤ëŸ½ê²Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ë¬¸ì œë¥¼ ì ‘í•˜ê²Œ ëœë‹¤. ì˜ì¡´ì„± ë¬¸ì œëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë²„ì „ ë¬¸ì œë¡œ ì„œë¡œ ì¶©ëŒí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ë˜ëŠ” ê²ƒì´ë¼ ì´í•´í•˜ë©´ ì‰½ë‹¤.ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì ë‚˜ì˜¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ ëª…ì‹œ ê·œì¹™ì´ ìˆë‹¤.ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë²„ì „ì€ ë³´í†µ a.b.cë¡œ í‘œê¸°ëœë‹¤.  ì²« ë²ˆì§¸...",
    "content": "ì–´ëŠ ì •ë„ ê·œëª¨ê°€ ìˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ê°œë°œí•  ë•Œë©´ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê²Œëœë‹¤. ê·¸ë¦¬ê³  ìì—°ìŠ¤ëŸ½ê²Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ë¬¸ì œë¥¼ ì ‘í•˜ê²Œ ëœë‹¤. ì˜ì¡´ì„± ë¬¸ì œëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë²„ì „ ë¬¸ì œë¡œ ì„œë¡œ ì¶©ëŒí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ë˜ëŠ” ê²ƒì´ë¼ ì´í•´í•˜ë©´ ì‰½ë‹¤.ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì ë‚˜ì˜¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ ëª…ì‹œ ê·œì¹™ì´ ìˆë‹¤.ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë²„ì „ì€ ë³´í†µ a.b.cë¡œ í‘œê¸°ëœë‹¤.  ì²« ë²ˆì§¸ a(Major) ë²„ì „ì´ ì˜¤ë¥´ë©´ ê¸°ì¡´ ë²„ì „ê³¼ í˜¸í™˜ë˜ì§€ ì•ŠìŒ  ë‘ ë²ˆì§¸ b(Minor) ë²„ì „ì´ ì˜¤ë¥´ë©´ ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ê²½ìš°  ì„¸ ë²ˆì§¸ c(Patch) ë²„ì „ì´ ì˜¤ë¥´ë©´ ìì˜í•œ ë²„ê·¸ ìˆ˜ì •ì´ ìˆëŠ” ê²½ìš°ì˜ˆë¥¼ ë“¤ë©´,libC 1.2.1ì€ ìƒˆë¡œìš´ ë²„ì „ì¸ libC 2.1.1ê³¼ ì„œë¡œ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” APIë¡œ êµ¬ì„±ë˜ì–´ ìˆì„ ê²ƒì´ë‹¤.libC 1.2.1 ë²„ì „ì„ ì‚¬ìš©í•˜ëŠ” A ë¼ëŠ” í”„ë¡œê·¸ë¨ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ì.A í”„ë¡œê·¸ë¨ì€ libCì˜ ë²„ì „ì´ 2.1.1ë¡œ ì˜¤ë¥´ë”ë¼ë„ ê³„ì†í•´ì„œ libC 1.2.1 ë²„ì „ì„ ì‚¬ìš©í•˜ë©´ì„œ í”„ë¡œê·¸ë¨ì˜ ì•ˆì •ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.NPM package.json ì˜ SemVerNodeJSì—ì„œ ê´€ë¦¬í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬(íŒ¨í‚¤ì§€)ì˜ ë²„ì „ ê´€ë¦¬ë¥¼ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ì•Œì•„ë³´ì.  ^2.2.1 : 2.2.1 ì´ìƒ 3.0.0 ë¯¸ë§Œ (2.2.1 ì´ìƒì´ë©´ì„œ ê°™ì€ Major ë²„ì „)  ~2.2.1 : 2.2.1 ì´ìƒ 2.3.0 ë¯¸ë§Œ (2.2.1 ì´ìƒì´ë©´ì„œ ê°™ì€ Major ë²„ì „)  &gt;2.2.1 : 2.2.1 ì´ˆê³¼ (2.2.2 ì´ìƒì˜ ë²„ì „ ì‚¬ìš©)  2.2.1 - 3.0.0 : 2.2.1 ì´ìƒ 3.0.0 ì´í•˜Tild(~)ì™€ Caret(^)ì˜ ì°¨ì´ì Tild(~)ê°€ ì“°ì˜€ì„ ê²½ìš° ë²„ê·¸ê°€ ìˆ˜ì •ëœ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤.~2.2.1 ë²„ì „ì´ë¼ë©´ 2.2.* ì˜ ë²„ì „ì„ ê°€ì ¸ì˜¨ë‹¤.Caret(^)ì´ ì“°ì˜€ì„ ê²½ìš° í˜¸í™˜ ê°€ëŠ¥í•œ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤.^2.2.1 ë²„ì „ì´ë¼ë©´ 2.. ì˜ ë²„ì „ì„ ê°€ì ¸ì˜¨ë‹¤.  npm semver calculator"
  },
  
  {
    "title": "Dynamic Code Patch with Frida",
    "url": "/posts/Dynamic-Code-Patch-with-Frida/",
    "categories": "Security, Mobile",
    "tags": "frida",
    "date": "2019-08-21 00:00:00 +0900",
    





    
    "snippet": "ëª¨ë“  í”„ë¡œê·¸ë¨ì€ ê°œë°œìê°€ ì˜ë„í•œ ëŒ€ë¡œ ë™ì‘í•˜ê²Œ ë˜ì–´ìˆë‹¤.(ë‹¹ì—°í•œ ì´ì•¼ê¸°ë‹¤.) ë³´ì•ˆì˜ ê´€ì ì—ì„œ í”„ë¡œê·¸ë¨ì„ ë°”ë¼ë³¼ ë•Œ, ê°œë°œìì˜ ì˜ë„ë¥¼ ë¹„í‹€ì–´ ë‹¤ë¥¸ ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ ë§Œë“œëŠ” ê³µê²© ë°©ë²•ì´ ìˆë‹¤. ê°œë°œìì˜ ì˜ë„ì™€ ìƒê´€ì—†ì´ ê³µê²©ìì˜ ì˜ë„ëŒ€ë¡œ í”„ë¡œê·¸ë¨ì´ ë™ì‘í•œë‹¤ë©´ ê·¸ í”¼í•´ëŠ” ê°€ëŠ í•˜ê¸° ì–´ë µë‹¤. ë”°ë¼ì„œ ë³´ì•ˆ ì ê²€ ì‹œ ê³ ì˜ë¡œ ì½”ë“œê°€ ë³€ê²½ë˜ì§€ëŠ” ì•ŠëŠ”ì§€ í™•ì¸í•´ë´ì•¼ í•œë‹¤....",
    "content": "ëª¨ë“  í”„ë¡œê·¸ë¨ì€ ê°œë°œìê°€ ì˜ë„í•œ ëŒ€ë¡œ ë™ì‘í•˜ê²Œ ë˜ì–´ìˆë‹¤.(ë‹¹ì—°í•œ ì´ì•¼ê¸°ë‹¤.) ë³´ì•ˆì˜ ê´€ì ì—ì„œ í”„ë¡œê·¸ë¨ì„ ë°”ë¼ë³¼ ë•Œ, ê°œë°œìì˜ ì˜ë„ë¥¼ ë¹„í‹€ì–´ ë‹¤ë¥¸ ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ ë§Œë“œëŠ” ê³µê²© ë°©ë²•ì´ ìˆë‹¤. ê°œë°œìì˜ ì˜ë„ì™€ ìƒê´€ì—†ì´ ê³µê²©ìì˜ ì˜ë„ëŒ€ë¡œ í”„ë¡œê·¸ë¨ì´ ë™ì‘í•œë‹¤ë©´ ê·¸ í”¼í•´ëŠ” ê°€ëŠ í•˜ê¸° ì–´ë µë‹¤. ë”°ë¼ì„œ ë³´ì•ˆ ì ê²€ ì‹œ ê³ ì˜ë¡œ ì½”ë“œê°€ ë³€ê²½ë˜ì§€ëŠ” ì•ŠëŠ”ì§€ í™•ì¸í•´ë´ì•¼ í•œë‹¤.í”„ë¡œê·¸ë¨ì„ ë³€ê²½í•˜ëŠ” ë°©ë²•ì€ ë‘ ê°€ì§€ê°€ ìˆë‹¤. í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ í”„ë¡œê·¸ë¨ì„ ë³€ê²½í•˜ëŠ” ì •ì  ì½”ë“œ íŒ¨ì¹˜(Static Code Pathc)ì™€ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ê³¼ì •ì—ì„œ í”„ë¡œê·¸ë¨ì˜ ì½”ë“œë¥¼ ë³€ê²½í•˜ëŠ” ë™ì  ì½”ë“œ íŒ¨ì¹˜(Dynamic Code Patch)ê°€ ìˆë‹¤.Androidë‚˜ iOSëŠ” í”„ë¡œê·¸ë¨ì´ ë§Œë“¤ì–´ì§€ê¸° ì „ì— ì½”ë“œ ì„œëª…(Code Signing)ì„ í†µí•´ ì •ì (Static)ìœ¼ë¡œ í”„ë¡œê·¸ë¨ ì½”ë“œê°€ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë§‰ëŠ”ë‹¤. ë¬¼ë¡ , ê³µê²© ê³¼ì •ì—ì„œ ì½”ë“œ ì„œëª…ì„ ì„ì˜ë¡œ ë‹¤ì‹œ í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì´ë²ˆì—” ë™ì  ì½”ë“œ íŒ¨ì¹˜ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹¤ë£¨ê³ ì í•œë‹¤. í”„ë¡œê·¸ë¨ì€ ì „í˜€ ê±´ë“¤ì§€ ì•Šê³ , ì‹¤í–‰ë˜ëŠ” ê³¼ì •ì—ì„œ í”„ë¡œê·¸ë¨ì„ ì–´ë–»ê²Œ ë°”ê¿€ ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ì.Analyze Target Application - iOSëŒ€ìƒìœ¼ë¡œ ì •í•œ ì•±ì€ ê³µê°œëœ ì½”ë“œë¡œ ë§Œë“¤ì–´ì§„ m2048ì´ë¼ëŠ” ê²Œì„ ì•±ì´ê³ , í•´í‚¹ ë°©ì§€ë¥¼ ìœ„í•œ ì†”ë£¨ì…˜ì´ ì ìš©ëœ ì•±ì´ë‹¤.ì†”ë£¨ì…˜ì´ ì ìš©ëœë§Œí¼ íƒˆì˜¥í°ì—ì„œëŠ” ì•±ì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ ì†”ë£¨ì…˜ì´ íƒˆì˜¥ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ì§ì „ê¹Œì§€ëŠ” ì•±ì´ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ë¶„ì„ì˜ ì—¬ì§€ëŠ” ì¶©ë¶„íˆ ìˆë‹¤.í”„ë¡œê·¸ë¨ì€ Init_Func(0x5d614) í•¨ìˆ˜ë¶€í„° ì‹œì‘í•œë‹¤.í”„ë¡œê·¸ë¨ì˜ ì‹œì‘ ë¶€ë¶„ì„ ë” ìì„¸íˆ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ IDAë¥¼ ì‚¬ìš©í•´ë³´ì.ì™¼ìª½ ë°‘ì„ ë³´ë©´ ì†”ë£¨ì…˜ì´ ì ìš©ëœ íƒ“ìœ¼ë¡œ ì½”ë“œì˜ íë¦„ì„ ë”°ë¼ê°€ê¸° ì–´ë µê²Œ ë˜ì–´ ìˆë‹¤.Control-flow flatteningì´ë¼ ë¶€ë¥¸ë‹¤. ì½”ë“œì˜ íë¦„ì´ í‰í‰í•˜ê²Œ ë‚˜ì—´ëœ ë§ì€ ì½”ë“œ ë¸”ë¡ìœ¼ë¡œ í©ì–´ì§„ë‹¤.ê·¸ë¦¬ê³  fridaì—ì„œ í™•ì¸í•œ ê²ƒê³¼ ê°™ì´ Init_Func(0x5d614)ì´ ì‹œì‘ëœ ì´í›„ ì²«ë²ˆì§¸ í•¨ìˆ˜ sub_10008A8B4ë¥¼ í˜¸ì¶œí•œë‹¤.Aimingí”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ëŠ” ìˆœê°„ ì½”ë“œë¥¼ íŒ¨ì¹˜í•˜ì—¬ í”„ë¡œê·¸ë¨ì˜ íë¦„ì„ ë°”ê¿”ë³´ì.ë³„ ë‹¤ë¥¸ ìˆ˜ì •ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì†”ë£¨ì…˜ì´ ì ìš©ëœ í”„ë¡œê·¸ë¨ì´ê¸° ë•Œë¬¸ì— íƒˆì˜¥ íƒì§€ ê´€ë ¨ ì½”ë“œê°€ ì‹¤í–‰ë˜ê³  ë¹„ì •ìƒ ì¢…ë£Œë  ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì´ë²ˆ ì½”ë“œ íŒ¨ì¹˜ì˜ ëª©ì ì€ íƒˆì˜¥ íƒì§€ ê´€ë ¨ ì½”ë“œë¥¼ ê±´ë„ˆ ë›°ëŠ” ê²ƒì´ ë  ê²ƒì´ë‹¤.ë°©ë²•ì€ ë§¤ìš° ë‹¤ì–‘í•˜ê² ì§€ë§Œ ê°„ë‹¨í•œ íŒ¨ì¹˜ë§Œìœ¼ë¡œ ëª©ì ì„ ë‹¬ì„±í•´ë³´ì. branch ëª…ë ¹ë§Œìœ¼ë¡œ í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ íë¦„ì„ ë³€ê²½í•  ê²ƒì´ë‹¤. (ARM64 opcodeë¥¼ ì•Œì•„ì•¼ í•œë‹¤. ì°¸ê³ : opcode converter online)ìµœì¢…ì ìœ¼ë¡œ ì‹¤í–‰í•˜ê³ ì í•˜ëŠ” ëª©í‘œ ì½”ë“œëŠ” 0x100005a98 ì£¼ì†Œì— ìˆëŠ” ì½”ë“œë‹¤. ëª©ì ì§€ë¥¼ ì´ê³³ìœ¼ë¡œ ì •í•œ ì´ìœ ëŠ” IDAë¡œ ë¶„ì„í–ˆì„ ë•Œ ì•±ì˜ Main í•¨ìˆ˜ë¡œ ì¶”ì¸¡ë˜ëŠ” ë¶€ë¶„ì´ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.ê·¸ëŸ°ë°, êµ³ì´ ì¤‘ê°„ì— 0x2decc ì£¼ì†Œë¥¼ í•œ ë²ˆ ê±°ì¹œ í›„ 0x5a98ë¡œ ë¶„ê¸°í•˜ëŠ” ì´ìœ ëŠ” ARM64 ëª…ë ¹ì–´ê°€ í•œ ë²ˆì— ì´ë™í•  ìˆ˜ ìˆëŠ” ê±°ë¦¬ì— ì œí•œì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì¦‰, 0x5d614ì—ì„œ 0x5a98ê¹Œì§€ ê±°ë¦¬ê°€ ë„ˆë¬´ ë©€ë‹¤!!Code Segmentì½”ë“œë¥¼ íŒ¨ì¹˜í•˜ê¸° ì „ì— í”„ë¡œê·¸ë¨ì˜ ì½”ë“œ ì˜ì—­(Code Segment)ì˜ íŠ¹ì§•ì— ëŒ€í•´ ê°„ë‹¨íˆ ì§šê³  ë„˜ì–´ê°ˆ í•„ìš”ê°€ ìˆë‹¤. ì½”ë“œ ì˜ì—­ì€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°”ì„ ë•Œ ì“°ê¸° ê¶Œí•œì´ ì—†ë‹¤. ì½ê¸°(Read)ì™€ ì‹¤í–‰(eXecute) ê¶Œí•œë§Œ ìˆë‹¤. ì½”ë“œëŠ” í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ë³€ê²½ë  ì¼ì´ ì—†ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ì½ê³  ì‹¤í–‰í•˜ëŠ” ê¶Œí•œë§Œ ìˆìœ¼ë©´ ëœë‹¤.ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ì½”ë“œ íŒ¨ì¹˜ë¥¼ ìœ„í•´ ì½”ë“œ ì˜ì—­ì˜ ì†ì„±ì„ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤. ì „í†µì ìœ¼ë¡œ ë§ì´ ì“°ì´ëŠ” Memory protect ê¸°ìˆ ì„ ì‚¬ìš©í•´ì„œ ì†ì„±ì„ ë³€ê²½í•  ê²ƒì´ë‹¤. (Fridaì—ì„œ ì§€ì›í•œë‹¤.)Run Target Application with Fridaê³µê²©ì— ì“°ì¸ í•µì‹¬ ì½”ë“œë¥¼ ì‚´í´ë³´ì.[Line 2] : Init_Func í•¨ìˆ˜ í¬ì¸í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.[Line 3] : Memory.protect í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ Init_Func í•¨ìˆ˜ì— ì“°ê¸°(Write) ì†ì„±ì„ ì¶”ê°€í•œë‹¤.[Line 4] :  í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì¤‘ ì½ê¸°(Read)/ì“°ê¸°(Write) ê¶Œí•œì´ ìˆëŠ” ë¶€ë¶„ì—[Line 7] : [0x77, 0x83, 0x03, 0xD1] ì´ ìˆë‹¤ë©´[Line 12] : [0x2E, 0x42, 0xFF, 0x17]ë¡œ ë°”ê¾¼ë‹¤.ê·¸ë¦¼ìœ¼ë¡œ ì„¤ëª…í•˜ìë©´, ì•„ë˜ì™€ ê°™ë‹¤.Init_Func (0x5d614) í•¨ìˆ˜ì˜ ì‹œì‘ ì½”ë“œ SUB SP, SP #0xE0 [0x77, 0x83, 0x03, 0xD1]ë¥¼ ìš°ë¦¬ê°€ ì›í•˜ëŠ” B 0x10002DECC [0x2E 0x42 0xFF 0x17] ë¡œ ë³€ê²½í–ˆë‹¤. B(Branch)ëŠ” í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ì„ ì£¼ì†Œê°’(0x10002DECC)ìœ¼ë¡œ ì´ë™ì‹œí‚¤ë¼ëŠ” ì˜ë¯¸ë‹¤.ì‹¤í–‰ ê²°ê³¼ë¥¼ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.ì•ì—ì„œ Caller ì¸ dyld!ImageLoaderMachO::doModInitFunctionsëŠ” 0x5d614ë¥¼ í˜¸ì¶œ í–ˆì§€ë§Œ, ì½”ë“œ íŒ¨ì¹˜ë¥¼ í†µí•´ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ëŒ€ë¡œ 0x2decc í•¨ìˆ˜ë¥¼ í˜¸ì¶œí–ˆë‹¤.What about Android so fileìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì•ˆë“œë¡œì´ë“œì˜ so(shared object) íŒŒì¼ì„ í›„í‚¹í•˜ì—¬ ì½”ë“œ ìˆ˜ì •ì„ í•  ìˆ˜ ìˆë‹¤. Give it a go!iOS, Android ëª¨ë‘ ì½”ë“œ ì„œëª… ê³¼ì •ì„ ê±°ì³ ì½”ë“œ íŒ¨ì¹˜ ê³µê²©ìœ¼ë¡œë¶€í„° í”„ë¡œê·¸ë¨ì„ ë³´í˜¸í•˜ê³  ìˆë‹¤. í•˜ì§€ë§Œ Fridaë¥¼ ì´ìš©í•œ ë™ì  ì½”ë“œ íŒ¨ì¹˜ ê³µê²©ì„ í™œìš©í•˜ë©´ ì½”ë“œ ì„œëª…ì„ ìš°íšŒí•˜ì—¬ ìš°ë¦¬ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ í”„ë¡œê·¸ë¨ì„ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤. íŠ¹íˆ íƒˆì˜¥/ë£¨íŒ… ë°©ì§€ ë³´ì•ˆ ì†”ë£¨ì…˜ì´ ì ìš©ëœ ê²½ìš° ë§ì€ ë„ì›€ì´ ëœë‹¤.PDF ë‹¤ìš´ë¡œë“œ"
  },
  
  {
    "title": "Authentication",
    "url": "/posts/Authentication/",
    "categories": "Development, Authentication",
    "tags": "auth",
    "date": "2019-07-26 00:00:00 +0900",
    





    
    "snippet": "ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ëª¨ë°”ì¼ ì•±ì—ì„œ ì‚¬ìš©ì ê³„ì • ê´€ë¦¬ë¥¼ í•˜ê³  ìˆë‹¤ë©´ ì‚¬ìš©ì ì¸ì¦ì€ ë°˜ë“œì‹œ í•„ìš”í•œ ê¸°ëŠ¥ì´ë‹¤. (ë¬¼ë¡ , ê³„ì •ì´ ìˆëŠ” ì„œë¹„ìŠ¤ë¼ë©´ ì¢…ë¥˜ì— ìƒê´€ì—†ì´ ëª¨ë‘ ì¸ì¦ ê³¼ì •ì´ ìˆì–´ì•¼ í•˜ëŠ” ê²ƒì´ ë§ë‹¤.)ì¸ì¦ì— ëŒ€í•´ ë¨¼ì € ìƒê°í•´ë³´ì. ì¸ì¦ì€ ì‚¬ìš©ìë¥¼ íŠ¹ì •í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ ì œê³µ í•  ë•Œ ì“°ì´ëŠ” ì‚¬ìš©ì í™•ì¸ ê³¼ì •ì´ë‹¤. ê·¸ë¦¬ê³  ì–´ëŠ ì„œë¹„ìŠ¤ë“  ì¸ì¦ì´ ì´ë£¨ì–´ì§€ë©´ ì„œë¹„ìŠ¤ë¥¼ ...",
    "content": "ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ëª¨ë°”ì¼ ì•±ì—ì„œ ì‚¬ìš©ì ê³„ì • ê´€ë¦¬ë¥¼ í•˜ê³  ìˆë‹¤ë©´ ì‚¬ìš©ì ì¸ì¦ì€ ë°˜ë“œì‹œ í•„ìš”í•œ ê¸°ëŠ¥ì´ë‹¤. (ë¬¼ë¡ , ê³„ì •ì´ ìˆëŠ” ì„œë¹„ìŠ¤ë¼ë©´ ì¢…ë¥˜ì— ìƒê´€ì—†ì´ ëª¨ë‘ ì¸ì¦ ê³¼ì •ì´ ìˆì–´ì•¼ í•˜ëŠ” ê²ƒì´ ë§ë‹¤.)ì¸ì¦ì— ëŒ€í•´ ë¨¼ì € ìƒê°í•´ë³´ì. ì¸ì¦ì€ ì‚¬ìš©ìë¥¼ íŠ¹ì •í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ ì œê³µ í•  ë•Œ ì“°ì´ëŠ” ì‚¬ìš©ì í™•ì¸ ê³¼ì •ì´ë‹¤. ê·¸ë¦¬ê³  ì–´ëŠ ì„œë¹„ìŠ¤ë“  ì¸ì¦ì´ ì´ë£¨ì–´ì§€ë©´ ì„œë¹„ìŠ¤ë¥¼ ë°›ëŠ” ë™ì•ˆ ì¸ì¦ì´ ìœ ì§€ë  í•„ìš”ê°€ ìˆê³  ì„œë¹„ìŠ¤ ê¸°ê°„ì´ ë§Œë£Œë˜ë©´ ì¸ì¦ì„ íê¸°í•˜ê±°ë‚˜ ì¢…ë£Œì‹œì¼œì•¼ í•œë‹¤. í”íˆ ì´ìš©í•˜ëŠ” íšŒì› ì„œë¹„ìŠ¤ë¥¼ ë– ì˜¬ë¦¬ë©´ ì „í˜€ ì–´ë µì§€ ì•Šì€ ê°œë…ì´ë‹¤!í•˜ì§€ë§Œ ì´ëŸ° íŠ¹ì§•ì„ ë°”íƒ•ìœ¼ë¡œ, ì›¹/ëª¨ë°”ì¼ ì„œë¹„ìŠ¤ê°€ ì´ë¤„ì§€ëŠ” HTTP í”„ë¡œí† ì½œì— ëŒ€í•´ ìƒê°í•´ë³´ë©´ ë¨¸ë¦¬ê°€ ì•„íŒŒì§„ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ HTTPëŠ” Stateless í”„ë¡œí† ì½œì´ë‹¤. ì„œë²„ - í´ë¼ì´ì–¸íŠ¸ ê°„ ìƒíƒœ ì •ë³´ë¥¼ ìœ ì§€í•˜ê³  ìˆì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ë‹¤. ì²« ë²ˆì§¸ ìš”ì²­ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì„œë²„ë¡œë¶€í„° ì¸ì¦ì„ ë°›ì•˜ë‹¤ê³  í•˜ë”ë¼ë„ ë‘ ë²ˆì§¸ ìš”ì²­ì—ì„œ ì¸ì¦ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ HTTP ì„œë²„(ì›¹ì„œë²„)ê°€ ì‚¬ìš©ì(ë¸Œë¼ìš°ì € ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨)ì˜ ì •ë³´ë¥¼ ì‹ë³„í•˜ê³  ì‚¬ìš©ìì˜ ìƒíƒœë¥¼ ìœ ì§€í•˜ë ¤ë©´ ë³„ë„ì˜ ë°©ë²•ì„ ë§ˆë ¨í•´ì•¼ í•œë‹¤.HTTP Message Structureì„œë²„ì™€ í†µì‹ ì— ì‚¬ìš©ë˜ëŠ” HTTP ìš”ì²­ ë©”ì‹œì§€ì˜ êµ¬ì¡°ëŠ” ì˜¤ë¥¸ìª½ ê·¸ë¦¼ê³¼ ê°™ì´ í¬ê²Œ ìš”ì²­ ì£¼ì†Œ(URL), í—¤ë”(Method + Headers) ê·¸ë¦¬ê³  ë³¸ë¬¸(Body)ë¡œ êµ¬ë¶„ëœë‹¤. í—¤ë” ë¶€ë¶„ì— ìš”ì²­ ì •ë³´ê°€ ë“¤ì–´ê°€ê³ , ë³¸ë¬¸ì— ì„œë²„ë¡œ ë³´ë‚´ê³ ì í•˜ëŠ” ë°ì´í„°ê°€ ë“¤ì–´ê°„ë‹¤. ë³´í†µ ì›¹/ëª¨ë°”ì¼ ì„œë¹„ìŠ¤ì˜ ì¸ì¦ì„ ìœ„í•œ ì •ë³´ëŠ” í—¤ë”ì— í¬í•¨ëœë‹¤.Simple authentication data in headersì´ˆê¸° ì›¹ ì„œë¹„ìŠ¤ëŠ” ì‚¬ìš©ì ì¸ì¦ì„ ìœ„í•´ ë‹¨ìˆœíˆ í—¤ë”ì— ê³„ì • ì •ë³´ë¥¼ ë‹´ì•„ ë³´ë‚´ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.ìµœì•…ì˜ ì¸ì¦ë°©ì‹ì´ ì•„ë‹ ìˆ˜ ì—†ëŠ”ë°, ê³µê²©ìëŠ” ë§ˆìŒëŒ€ë¡œ ìš”ì²­ ì •ë³´ë¥¼ ê°€ë¡œì±„ ì‚¬ìš©ì ì •ë³´ë¥¼ ì•Œì•„ë‚´ê³  ì¡°ì‘í•  ìˆ˜ ìˆì—ˆë‹¤.  ë§¤ìš° ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆê³ , ë¹ ë¥´ê²Œ ì¸ì¦ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ,  ë³´ì•ˆì— ë§¤ìš° ì·¨ì•½í•˜ê³ ,  ì‚¬ìš©ìê°€ ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ ê³„ì •ì •ë³´(ì‚¬ìš©ì ID, PW)ë¥¼ ê³„ì† ë³´ë‚´ì•¼ í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤.HTTPSë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆì „í•œ ë°©ì‹ì´ë¼ê³  ë§í•  ìˆ˜ë„ ìˆê² ë‹¤. í•˜ì§€ë§Œ, ì—”ì§€ë‹ˆì–´ë¡œì„œ í•  ë§ì€ ì•„ë‹ˆë‹¤!Membershipsê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ë‹µì€ ì´ë¯¸ ë‚˜ì™€ìˆë‹¤. ì•ì„œ ì–¸ê¸‰í–ˆë“¯ì´, íšŒì› ì„œë¹„ìŠ¤(ì´ìš©ê¶Œ) ëª¨ë¸ì„ ì‚¬ìš©í•˜ë©´ ë¬¸ì œë¥¼ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.ì¡´ ìœ…ì´ ì½˜í‹°ë„¨íƒˆ í˜¸í…”ì˜ ì„œë¹„ìŠ¤ë¥¼ íšŒì› ìê²©ìœ¼ë¡œ ì´ìš©í•œë‹¤ëŠ” ê°€ì •ì„ í•´ë³´ì. (ì˜í™”ì˜ ì„¤ì •ê³¼ëŠ” ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤.)  ì¡´(ì‚¬ìš©ì)ì´ í˜¸í…”ì— ë°©ë¬¸í•˜ì—¬ ì‹ ë¶„ì¦ì„ ì œì‹œí•˜ë©´,  ìƒ¤ë¡ (í˜¸í…” ë§¤ë‹ˆì €)ì€ ì‹ ë¶„ì¦ì„ ë°”íƒ•ìœ¼ë¡œ í˜¸í…” DBì— ì ‘ì†í•˜ì—¬ íšŒì› ì—¬ë¶€ë¥¼ í™•ì¸.  ìƒ¤ë¡ ì€ ë‹¤ì‹œ ì¡´ì´ 12ì‹œê°„(ë§Œë£Œê¸°ê°„)ë™ì•ˆ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê³ ìœ  ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ê³  ì•”í˜¸í™”í•˜ì—¬ ë³´ê´€í•˜ê³ ,  ìƒ¤ë¡ ì€ ê³ ìœ  ë²ˆí˜¸ì— í•´ë‹¹í•˜ëŠ” ì´ìš©ê¶Œì„ ë°œê¸‰í•œë‹¤.  ìƒ¤ë¡ ì€ ì¡´ì—ê²Œ ì´ìš©ê¶Œ ì§€ê¸‰í•˜ê³ ,  ì¡´ì€ ìœ íš¨ ì‹œê°„ë™ì•ˆ ì‹ ë¶„ì¦ ì—†ì´ ì´ìš©ê¶Œì„ ì œì‹œí•˜ë©´ í˜¸í…”ì˜ ì„œë¹„ìŠ¤ë¥¼ ìì‹ ì˜ ê¶Œí•œ ë²”ìœ„ ë‚´ì—ì„œ ì´ìš© ê°€ëŠ¥.ì¡´ì€ ì´ìš©ê¶Œì„ ì´ìš©í•˜ì—¬ ì‹ ë¶„ì¦ ì—†ì´ë„ í˜¸í…”ì˜ ì„œë¹„ìŠ¤ë¥¼ ê°„í¸í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ì‹ ë¶„ ì •ë³´ê°€ ë…¸ì¶œë  ìœ„í—˜ì´ ì¤„ì–´ë“¤ì—ˆê³ , ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ ë§¤ë²ˆ ì‹ ë¶„ì¦ì„ ë³´ì—¬ì¤„ í•„ìš”ë„ ì—†ë‹¤.Cookie and Sessionê°™ì€ ì•„ì´ë””ì–´ë¥¼ ì›¹ í†µì‹ ì— ì ìš©ì‹œí‚¨ ê²ƒì´ ì„¸ì…˜(ê³ ìœ ë²ˆí˜¸)ê³¼ ì¿ í‚¤(ì´ìš©ê¶Œ)ë‹¤. ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°„ ì„¸ì…˜ê³¼ ì¿ í‚¤ê°€ ì–´ë–»ê²Œ ìƒì„±ë˜ê³  ì´ìš©ë˜ëŠ”ì§€ ê·¸ë¦¼ìœ¼ë¡œ ì‚´í´ë³´ì.  ì‚¬ìš©ìëŠ” ì„œë²„ì— ì¸ì¦ ìš”ì²­(+ê³„ì • ì •ë³´(ID/PW))ì„ ë³´ë‚¸ë‹¤.  ì„œë²„ëŠ” ê³„ì • ì •ë³´ë¥¼ íšŒì› DBì—ì„œ í™•ì¸í•˜ê³  ì‚¬ìš©ìì—ê²Œ ê³ ìœ í•œ ê°’ì„ ë¶€ì—¬í•œë‹¤.  ë¶€ì—¬í•œ ê³ ìœ ê°’ì„ ì•”í˜¸í™”í•˜ì—¬ ì„¸ì…˜ ì €ì¥ì†Œì— ì €ì¥í•œë‹¤.  ì„¸ì…˜ ì €ì¥ì†Œì— ì €ì¥ëœ ê³ ìœ ê°’ì— í•´ë‹¹í•˜ëŠ” ì„¸ì…˜IDë¥¼ ë°œê¸‰í•œë‹¤.  ë°œê¸‰í•œ ì„¸ì…˜IDë¥¼ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•˜ê³ , ì‚¬ìš©ìëŠ” ì„¸ì…˜ IDë¥¼ ì¿ í‚¤ì— ì €ì¥í•œë‹¤.  ì‚¬ìš©ìëŠ” ë°œê¸‰ë°›ì€ ì„¸ì…˜IDë¥¼ ìš”ì²­ í—¤ë”(ì¿ í‚¤)ì— ë‹´ì•„ ì„œë¹„ìŠ¤ ìš”ì²­ ì‹œ ë³¸ì¸ì´ ëˆ„êµ¬ì¸ì§€ ì•Œë¦°ë‹¤.  ì„œë²„ëŠ” í—¤ë”(ì¿ í‚¤)ì— ë‹´ê¸´ ì„¸ì…˜IDë¥¼ ì„¸ì…˜ ì €ì¥ì†Œì—ì„œ í™•ì¸í•˜ì—¬ ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ íŒë‹¨í•œë‹¤.  ì„œë²„ëŠ” ì‚¬ìš©ìì˜ ê¶Œí•œì— ë§ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤.ì„œë²„ì—ëŠ” ì„¸ì…˜ ì €ì¥ì†Œë¼ëŠ” ê³µê°„ì´ ì¶”ê°€ë¡œ í•„ìš”í•˜ê³ , ì´ ê³³ì—ëŠ” ì„¸ì…˜IDì™€ ì„œë²„ê°€ ê´€ë¦¬í•˜ê³ ì í•˜ëŠ” ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìˆë‹¤. ë³„ë„ì˜ DB(Redis)ë¥¼ ì„¤ì •í•˜ì§€ ì•Šê³  ë©”ëª¨ë¦¬ì— ì €ì¥í•  ìˆ˜ ìˆì§€ë§Œ ì´ì¤‘í™”ê°€ ë¶ˆê°€ëŠ¥í•˜ê³  ì„œë²„ë¥¼ ì¬ì‹œì‘í•˜ë©´ ì„¸ì…˜ ì •ë³´ê°€ ì™„ì „íˆ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œê°€ ìˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ì‚¬ìš©ìëŠ” ì¿ í‚¤ ì €ì¥ì†Œë¥¼ ìì‹ ì˜ í•˜ë“œë””ìŠ¤í¬ ì–´ë”˜ê°€ì— ë§ˆë ¨í•´ë‘ê³  ì„œë²„ë¡œë¶€í„° ì „ë‹¬ ë°›ì€ ì„¸ì…˜IDë¥¼ ì¿ í‚¤ ì €ì¥ì†Œì— ì €ì¥í•˜ê³  ìˆë‹¤ê°€ ì¸ì¦ì •ë³´ê°€ í•„ìš”í•œ ì„œë¹„ìŠ¤ë¥¼ ìš”ì²­í•  ë•Œ ì„¸ì…˜IDë¥¼ HTTP í—¤ë”(ì¿ í‚¤)ì— ë„£ì–´ ë³´ë‚¸ë‹¤.  ì„¸ì…˜ì€ ì„œë²„ê°€ ê°€ì§€ê³  ìˆëŠ” ì •ë³´ / ì¿ í‚¤ëŠ” ì„¸ì…˜ ì •ë³´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ì—´ì‡ (ì„¸ì…˜ID)  ì¿ í‚¤ê°’ìœ¼ë¡œë§Œ ì¸ì¦ì„ í•˜ëŠ” ê²½ìš° ì•”í˜¸í™”í–ˆë‹¤ê³  í•˜ë”ë¼ë„ ì•ì„œ ì„¤ëª…í•œ Simple Authenticaion data in headers ì˜ ë°©ì‹ê³¼ ë™ì¼í•˜ë©°, ì±…ì„ì€ ì‚¬ìš©ìì—ê²Œ ìˆìŒ. - ë³´ì•ˆê³¼ ìƒê´€ì—†ëŠ” ê²½ìš°ì—ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œí•œ.      ì„¸ì…˜ì„ ì‚¬ìš©í•  ê²½ìš° ì±…ì„ì€ ì„œë²„ì— ìˆìŒ. - ì„œë²„ê°€ í•´í‚¹ë‹¹í•˜ëŠ” ê²ƒì´ í›¨ì”¬ ì–´ë µê¸° ë•Œë¬¸ì— ì„¸ì…˜ì„ ì‚¬ìš©í•˜ë„ë¡ ê¶Œê³ .    ì¿ í‚¤ ì •ë³´(ì„¸ì…˜ID) ìì²´ë§Œìœ¼ë¡œëŠ” ë…¸ì¶œëœë‹¤ í•˜ë”ë¼ë„ í° ì˜ë¯¸ê°€ ì—†ê³ ,  ì„œë²„ëŠ” ì„¸ì…˜IDë§Œ í™•ì¸í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‚¬ìš©ìë¥¼ ì‹ë³„í•  ìˆ˜ ìˆì–´ ì‚¬ìš©ì´ í¸í•˜ë‹¤.  ì„œë²„ì— ì„¸ì…˜ ì €ì¥ì†Œë¼ëŠ” ì¶”ê°€ ê³µê°„ì´ í•„ìš”í•˜ê³ ,  í•´ì»¤ê°€ ì¿ í‚¤(ì„¸ì…˜ID)ë¥¼ ì¬ì‚¬ìš© í•œë”ë¼ë„ ì„œë²„ëŠ” ì‚¬ìš©ìë¥¼ ì •í™•íˆ ì‹ë³„í•˜ì§€ ëª»í•œë‹¤.JWT (Json Web Token)ëª¨ë°”ì¼ ì„œë¹„ìŠ¤ê°€ ê¸‰ì¦í•˜ë©´ì„œ ëŒ€í‘œì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì¸ì¦ ë°©ì‹ì´ë‹¤. ìš°ë¦¬ë‚˜ë¼ì—ì„  ì¹´ì¹´ì˜¤ì˜ ê±°ì˜ ëª¨ë“  ì„œë¹„ìŠ¤ê°€ JWT(í† í° ê¸°ë°˜ ì¸ì¦ ë°©ì‹)ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ì•ì„œ ì„¤ëª…í•œ ì„¸ì…˜/ì¿ í‚¤ ë°©ì‹ê³¼ ë¹„ìŠ·í•˜ê²Œ ì‚¬ìš©ìëŠ” Access Token(JWT í† í°)ì„ HTTP í—¤ë”ì— ë‹´ì•„ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¸ë‹¤.ì™¼ìª½ì— Encodedì— í‘œì‹œëœ ê°’ì´ JWT í† í° ê°’ì´ê³  ì˜¤ë¥¸ìª½ì— í‘œì‹œëœ ê°’ì´ JWT í† í°ì„ í•´ì„í•œ ê°’ì´ë‹¤. JWT í† í°ì€ 3ê°œ ì˜ì—­ìœ¼ë¡œ ë‚˜ë‰˜ëŠ”ë°,  Header : í† í°ì— ì‚¬ìš©ë  ì•”í˜¸í™” ë°©ì‹(alg)ê³¼ íƒ€ì…(typ),  Payload : ì„œë²„ì— ë³´ë‚¼ ë°ì´í„° (ì‚¬ìš©ì ID, ì´ë¦„, ìœ íš¨ê¸°ê°„ë“±),  Verify Signature : Base64 ë°©ì‹ìœ¼ë¡œ ì¸ì½”ë”©í•œ Header, Payload ê·¸ë¦¬ê³  Secret keyë¥¼ ë”í•´ ì„œëª…Encoded Header + â€œ.â€ + Encoded Payload + â€œ.â€ + Verify SignatureHeaderì™€ PayloadëŠ” 16ì§„ìˆ˜ë¡œ ì¸ì½”ë”©ë§Œ ë˜ê¸° ë•Œë¬¸ì— ë…¸ì¶œë  ê²½ìš° ëˆ„êµ¬ë‚˜ ë””ì½”ë”©í•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆì–´ ì‰½ê²Œ ì‚¬ìš©ìì˜ ì¤‘ìš”í•œ ì •ë³´ê°€ ë…¸ì¶œë  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ Verify Signature ëŠ” Secret keyë¡œ ì•”í˜¸í™” ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— Secret keyë¥¼ ì•Œì§€ ëª»í•˜ë©´ ë³µí˜¸í™” í•  ìˆ˜ ì—†ë‹¤.ì§€ê¸ˆê¹Œì§€ ì•Œì•„ë³¸ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” í•´í‚¹ ì‹œë‚˜ë¦¬ì˜¤!!í•´ì»¤ ì¡´ì€ ìì‹ ì˜ JWT í† í° ê°’ì„ ì´ìš©í•´ ìƒ¤ë¡ ì˜ ì •ë³´ë¥¼ í›”ì³ë³´ê³  ì‹¶ì–´ì¡Œë‹¤. Payloadì— ìˆë˜ ìì‹ ì˜ nameì„ ìƒ¤ë¡ ì˜ ì´ë¦„ìœ¼ë¡œ ë°”ê¿” ë‹¤ì‹œ ì¸ì½”ë”©í•˜ê³  JWT í† í°ì„ ì„œë²„ë¡œ ë³´ëƒˆë‹¤. ì„±ê³µí–ˆì„ê¹Œ?ì‹¤íŒ¨ë‹¤. ì„œë²„ëŠ” ì•”í˜¸í™”ëœ Verify Signatureë¥¼ ê²€ì‚¬í•˜ëŠ”ë° ìµœì´ˆì— John Wickì´ë¼ëŠ” ì´ë¦„ì´ ë‹´ê¸´ Payloadë¡œ ì•”í˜¸í™”ë¥¼ í–ˆê¸° ë•Œë¬¸ì— ì´ë¦„ì„ Charonìœ¼ë¡œ ë°”ê¾¼ JWT í† í°ì€ ìœ íš¨ì„± ê²€ì‚¬ì— ì‹¤íŒ¨í•˜ê²Œ ë˜ì–´ ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ìœ¼ë¡œ ê°„ì£¼ëœë‹¤. JWTê°€ ì–´ë–»ê²Œ ì¸ì¦ì— ì‚¬ìš©ë˜ëŠ”ì§€ ì•Œì•„ë³´ì.  ì‚¬ìš©ìëŠ” ì„œë²„ì— ì¸ì¦ ìš”ì²­(+ê³„ì • ì •ë³´(ID/PW))ì„ ë³´ë‚¸ë‹¤.  ì„œë²„ëŠ” ê³„ì • ì •ë³´ë¥¼ íšŒì› DBì—ì„œ í™•ì¸í•˜ê³  ê³ ìœ í•œ ê°’(ID)ê³¼ ì‚¬ìš©ì ì •ë³´ë¥¼ Payloadì— ë‹´ëŠ”ë‹¤.  í† í°ì˜ ìœ íš¨ê¸°ê°„ì„ ì„¤ì •í•´ Secret keyë¡œ ì•”í˜¸í™” í•˜ì—¬ Access Token(JWT) ë°œê¸‰  ë°œê¸‰í•œ Access Token(JWT)ì„ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•˜ê³ , ì‚¬ìš©ìëŠ” JWTë¥¼ ì¿ í‚¤ì— ì €ì¥í•œë‹¤.  ì‚¬ìš©ìëŠ” ë°œê¸‰ë°›ì€ JWTë¥¼ ìš”ì²­ í—¤ë”(ì¿ í‚¤)ì— ë‹´ì•„ ì„œë¹„ìŠ¤ ìš”ì²­ ì‹œ ë³¸ì¸ì´ ëˆ„êµ¬ì¸ì§€ ì•Œë¦°ë‹¤.  ì„œë²„ëŠ” JWTë¥¼ ë³µí˜¸í™”í•˜ì—¬ ì¡°ì‘ ì—¬ë¶€, ìœ íš¨ê¸°ê°„ì„ í™•ì¸í•œë‹¤.  ê²€ì¦ì´ ì™„ë£Œë˜ë©´ Payloadë¥¼ ë””ì½”ë”©í•˜ì—¬ ì‚¬ìš©ìì˜ ê¶Œí•œì— ë§ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤.JWTëŠ” ì„¸ì…˜/ì¿ í‚¤ ë°©ì‹ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ HTTP í—¤ë”ì— ì¸ì¦ì •ë³´(ì„¸ì…˜ID/í† í°)ë¥¼ ë‹´ì•„ ìš”ì²­í•œë‹¤ëŠ” ì ì—ì„œ ë™ì¼í•˜ì§€ë§Œ, ì„¸ì…˜ ì €ì¥ì†Œë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì—ì„œ ì°¨ì´ê°€ ìˆë‹¤.  JWTëŠ” í† í° ë°œê¸‰ í›„ ê²€ì¦ë§Œ í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ì¶”ê°€ ì €ì¥ì†Œê°€ í•„ìš”ì—†ë‹¤.  ì¶”ê°€ ì €ì¥ì†Œê°€ ì—†ë‹¤ëŠ” ê²ƒì€ Stateless ì„œë²„ë¥¼ ë§Œë“œëŠ”ë° í° ì¥ì ì„ ê°–ëŠ”ë‹¤.  ì„¸ì…˜ê³¼ ê°™ì´ ìƒíƒœ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì„œë²„ë¥¼ í™•ì¥í•˜ê±°ë‚˜ ìœ ì§€/ë³´ìˆ˜í•˜ëŠ”ë° ìœ ë¦¬í•˜ë‹¤.  JWTëŠ” í•œ ë²ˆ ë°œê¸‰ë˜ë©´ ìœ íš¨ê¸°ê°„ê¹Œì§€ ê³„ì† ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.  ì¿ í‚¤ê°€ ë…¸ì¶œë˜ì–´ ë‹¤ë¥¸ ì‚¬ëŒì— ì˜í•´ ì•…ì˜ì ìœ¼ë¡œ ì¬ì‚¬ìš©ëœë‹¤ë©´ ë§‰ì„ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ë‹¤.  PayloadëŠ” ë”°ë¡œ ì•”í˜¸í™”ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì €ì¥í•  ìˆ˜ ìˆëŠ” ì •ë³´ê°€ ì œí•œì ì´ë‹¤.  JWTëŠ” ê¸¸ì´ê°€ ê¸¸ì–´ ìš”ì²­ì´ ë§ì•„ì§ˆìˆ˜ë¡ ì„œë²„ì˜ ìì›ë‚­ë¹„ê°€ ë°œìƒí•œë‹¤.Access Token + Refresh TokenJWTì˜ ë¬¸ì œì ì„ ë³´ì™„í•œ Access Token + Refresh Token ë°©ì‹ì— ëŒ€í•´ ì•Œì•„ë³´ì.Access Token(JWT)ë°©ì‹ì˜ ê°€ì¥ í° ë¬¸ì œì ì€ ë…¸ì¶œë˜ì—ˆì„ ê²½ìš° ìœ íš¨ê¸°ê°„ì´ ì¢…ë£Œë  ë•Œê¹Œì§€ ë§‰ì„ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤. ìœ íš¨ê¸°ê°„ì„ ì§§ê²Œ í•˜ë©´ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì„ ìì£¼í•´ì•¼í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆê³ , ëŠ˜ë¦¬ë©´ ëŠ˜ë¦´ìˆ˜ë¡ ë³´ì•ˆì— ì·¨ì•½í•˜ê²Œ ëœë‹¤.Refresh Tokenì€ Access Tokenì˜ ìœ íš¨ê¸°ê°„ì„ ì§§ê²Œ í•˜ë©´ì„œ ì‚¬ìš©ì í¸ì˜ì„±ê³¼ ë³´ì•ˆì„±ì„ ë™ì‹œì— ë†’ì¸ ë°©ë²•ì´ë‹¤. Refresh Token ì—­ì‹œ Access Token ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ìœ íš¨ê¸°ê°„ì´ ìˆëŠ” í•˜ë‚˜ì˜ í† í°ì´ë‹¤. Access Tokenê³¼ Refresh Tokenì´ ì–´ë–»ê²Œ ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ ê°„ë‹¨í•œ ì˜ˆë¥¼ ë“¤ì–´ë³´ì.Refresh Tokenì˜ ìœ íš¨ê¸°ê°„ì€ 2ì£¼, Access Tokenì˜ ìœ íš¨ê¸°ê°„ì€ 30ë¶„ì´ë¼ê³  í•´ë³´ì. ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ í›„ 30ë¶„ë™ì•ˆ í† í°ì˜ ê°±ì‹  ì—†ì´ ììœ ë¡­ê²Œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œë‹¤. 30ë¶„ì´ ì§€ë‚˜ë©´ Access Tokenì€ ë§Œë£Œëœë‹¤. ê·¸ë¦¬ê³  Refresh Tokenì´ ìƒˆë¡œìš´ Access Tokenì„ ë°œê¸‰í•´ì¤€ë‹¤.  ì‚¬ìš©ìëŠ” ì„œë²„ì— ì¸ì¦ ìš”ì²­(+ê³„ì • ì •ë³´(ID/PW))ì„ ë³´ë‚¸ë‹¤.  ì„œë²„ëŠ” ê³„ì • ì •ë³´ë¥¼ íšŒì› DBì—ì„œ í™•ì¸í•œë‹¤.  ì„œë²„ëŠ” Access Tokenê³¼ Refresh Tokenì„ ë°œê¸‰í•œë‹¤. ì„œë²„ëŠ” íšŒì›DBì— Refresh Token ì €ì¥.  ì‚¬ìš©ìì—ê²Œ Access Tokenê³¼ Refresh Tokenì„ ì „ë‹¬í•œë‹¤. ì‚¬ìš©ìë„ RefreshTokenì„ ì €ì¥.  Access Token(JWT)ì„ ìš”ì²­ í—¤ë”(ì¿ í‚¤)ì— ë‹´ì•„ ì„œë¹„ìŠ¤ ìš”ì²­.  ì„œë²„ê°€ Access Tokenì„ ê²€ì¦.  ì„œë²„ëŠ” ìš”ì²­í•œ ì •ë³´ì— ë§ëŠ” ì„œë¹„ìŠ¤ ì œê³µ.  Access Tokenì´ ë§Œë£Œë¨.  ì´ì „ê³¼ ë™ì¼í•˜ê²Œ Access Tokenì„ í—¤ë”(ì¿ í‚¤)ì— ë‹´ì•„ ì„œë¹„ìŠ¤ ìš”ì²­.  ì„œë²„ëŠ” Access Tokenì´ ë§Œë£Œë¨ì„ í™•ì¸.  ì„œë²„ëŠ” ì‚¬ìš©ìì—ê²Œ Access Tokenì´ ë§Œë£Œë˜ì–´ ê¶Œí•œì´ ì—†ìŒì„ ì•Œë¦¼.  ì‚¬ìš©ìëŠ” ì €ì¥í•˜ê³  ìˆë˜ Refresh Tokenê³¼ ë§Œë£Œëœ Access Tokenì„ ì„œë²„ì— ì „ë‹¬.  ì„œë²„ëŠ” Access Token ê²€ì¦, Refresh Token ê²€ì¦ í›„ ìƒˆë¡œìš´ Access Token ë°œê¸‰.  ìƒˆë¡œìš´ Access Tokenì„ ì „ë‹¬.  Access Token(JWT)ë§Œ ì‚¬ìš©í–ˆì„ ë•Œë³´ë‹¤ í›¨ì”¬ ì•ˆì „í•˜ì§€ë§Œ,  êµ¬í˜„ì´ ë³µì¡í•˜ê³  Access Tokenì´ ë§Œë£Œë  ë•Œë§ˆë‹¤ ìš”ì²­ì´ ë§ì•„ ì„œë²„ì˜ ìì› ë‚­ë¹„ê°€ ì‹¬í•˜ë‹¤.OAuth 2.0ìµœê·¼ ê±°ì˜ ëª¨ë“  ì›¹/ëª¨ë°”ì¼ ì„œë¹„ìŠ¤ê°€ ì œê³µí•˜ê³  ìˆëŠ” ì¸ì¦ ë°©ë²•ì´ë‹¤. 2007ë…„ OAuth 1.0ì´ ë°œí‘œë˜ê³ , ì·¨ì•½ì ì´ ë‚˜íƒ€ë‚œ ì´í›„ 2012ë…„ë¶€í„° OAuth 2.0ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤.OAuth 2.0 ì˜ íŠ¹ì§•ì€ Access Tokenì˜ ìœ íš¨ê¸°ê°„ì´ ìƒê²¼ê³ , ëª¨ë°”ì¼ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë©°, HTTPSë¥¼ ì‚¬ìš©í•œë‹¤.ìš©ì–´ì •ë¦¬  Resource Owner : ì¼ë°˜ ì‚¬ìš©ì, ì‚¬ëŒì´ ì‚¬ìš©í•˜ëŠ” ë¸Œë¼ìš°ì €ë‚˜ ëª¨ë°”ì¼ ê¸°ê¸°ë¡œ ë³´ë©´ í¸í•˜ë‹¤.  Client : ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„  Authorization Server : ê¶Œí•œ ê´€ë¦¬ ì„œë²„, Access Tokenê³¼ Refresh Tokenì„ (ì¬)ë°œê¸‰  Resource Server : OAuth 2.0 ì„œë²„, ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” íšŒì‚¬ì˜ ìì›ì„ ê´€ë¦¬í•˜ëŠ” ì„œë²„          Resource OwnerëŠ” Clientì— ì¸ì¦ ìš”ì²­.      ClientëŠ” Resource Ownerê°€ ì¸ì¦í•  ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨(e.g. Google ë¡œê·¸ì¸ í˜ì´ì§€)ì„ ì œê³µ.      Resource OwnerëŠ” ì¸ì¦ì„ ë§ˆì¹˜ê³  Authorization Grant(ê¶Œí•œì¦ì„œ)ë¥¼ urlì— ë‹´ì•„ Clientì—ê²Œ ì „ë‹¬.      ClientëŠ” Authorization Grantë¥¼ Authorization Serverì— ì „ë‹¬.Authorization ServerëŠ” Authorization Grantë¥¼ í™•ì¸ í›„ Access Token, Refresh Token, ì‚¬ìš©ì ì •ë³´(ID ë“±)ë¥¼ ë°œê¸‰.      ClientëŠ” Access Tokenê³¼ Refresh Tokenì„ DBì— ì €ì¥í•˜ê³ , Access Tokenê³¼ Refresh Tokenì„ Resource Ownerì—ê²Œ ì „ë‹¬.      Resource OwnerëŠ” Access Tokenì„ í—¤ë”ì— ë‹´ì•„ Resource Serverì— ìì› ìš”ì²­.      Resource ServerëŠ” Access Tokenì´ ìœ ìš”í•œì§€ í™•ì¸ í›„ Clientì—ê²Œ ìì› ì „ë‹¬.      Token ê²€ì¦ ê³¼ì •  Access Tokenì´ ë§Œë£Œë˜ë©´, ClientëŠ” Authorization Serverì— Refresh Tokenì„ ë³´ë‚´ Access Tokenì„ ì¬ë°œê¸‰.  Authorization ServerëŠ” Resource Serverì— ìì› ìš”ì²­.  Refresh Tokenì´ ë§Œë£Œë˜ë©´ Resource OwnerëŠ” ë‹¤ì‹œ ë¡œê·¸ì¸.ë¬¼ë¡ , OAuth 2.0ì—ë„ ì·¨ì•½ì ì´ ì¡´ì¬í•œë‹¤. CSRF ê³µê²©ì´ë‚˜ Covert Redirect ê³µê²©ì— ì·¨ì•½í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  êµ¬í˜„ì´ ë§¤ìš° ë³µì¡í•œë°, ì œëŒ€ë¡œ êµ¬í˜„í•œë‹¤ë©´ ì´ ë°©ë²•ë§Œí¼ ì•ˆì „í•˜ê³  í¸ë¦¬í•œ ì¸ì¦ë°©ë²•ì´ ë˜ ìˆì„ê¹Œ?PDF ë‹¤ìš´ë¡œë“œ"
  },
  
  {
    "title": "Frida for iOS",
    "url": "/posts/Frida-for-iOS/",
    "categories": "Security, Mobile",
    "tags": "ios, frida",
    "date": "2018-12-27 00:00:00 +0900",
    





    
    "snippet": "2018ë…„ 12ì›” iOS ë²„ì „ì´ 12.1.2ê¹Œì§€ ë°°í¬ë˜ì—ˆë‹¤. ë°˜ë©´ iOS Jailbreak(íƒˆì˜¥)íˆ´ì€ iOS 11.4 Beta3 ê¹Œì§€ ì§€ì›ëœë‹¤.(iOS 11.4 Beta3 ë‹¤ìš´ê·¸ë ˆì´ë“œ ë¶ˆê°€) í˜„ì¬ iOS 11.4.1 ë²„ì „ì— ëŒ€í•œ Exploitì„ Ian Beerê°€ ê°€ì§€ê³  ìˆëŠ” ê²ƒìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆê³  Electraë¥¼ í†µí•´ ë°°í¬ë  ê²ƒìœ¼ë¡œ ì˜ˆìƒí•˜ê³  ìˆì§€ë§Œ ì–¸ì œ ...",
    "content": "2018ë…„ 12ì›” iOS ë²„ì „ì´ 12.1.2ê¹Œì§€ ë°°í¬ë˜ì—ˆë‹¤. ë°˜ë©´ iOS Jailbreak(íƒˆì˜¥)íˆ´ì€ iOS 11.4 Beta3 ê¹Œì§€ ì§€ì›ëœë‹¤.(iOS 11.4 Beta3 ë‹¤ìš´ê·¸ë ˆì´ë“œ ë¶ˆê°€) í˜„ì¬ iOS 11.4.1 ë²„ì „ì— ëŒ€í•œ Exploitì„ Ian Beerê°€ ê°€ì§€ê³  ìˆëŠ” ê²ƒìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆê³  Electraë¥¼ í†µí•´ ë°°í¬ë  ê²ƒìœ¼ë¡œ ì˜ˆìƒí•˜ê³  ìˆì§€ë§Œ ì–¸ì œ ë°°í¬ë ì§€ í™•ì‹¤í•˜ì§€ ì•Šë‹¤.ìƒˆë¡œìš´ ë²„ì „ì˜ iOSê°€ ë°°í¬ë˜ë©´ ì´ì „ ë²„ì „ iOSë¥¼ ìœ„í•œ Jailbreak íˆ´ì´ ë°°í¬ë˜ì—ˆë˜ íë¦„ì— ë§ì¶”ì–´ ë³¼ ë•Œ, ìµœê·¼ iOS Jailbreakê°€ ì‰½ì§€ ì•Šì•„ì¡ŒìŒì„ ì§ì‘í•  ìˆ˜ ìˆë‹¤. ì´ ë¬¸ì„œì—ì„œ ì„¤ëª…í•˜ëŠ” FridaëŠ” Jailbreak ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ iOS ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¶„ì„í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ì œí•œì—†ëŠ” ì‚¬ìš©ì„ ìœ„í•´ íƒˆì˜¥ëœ ì•„ì´í°ì„ ëŒ€ìƒìœ¼ë¡œ í•œë‹¤.ë”°ë¼ì„œ iOS 11.4 Beta3 ì´í•˜ ë²„ì „ì˜ íƒˆì˜¥ëœ ì•„ì´í°ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. íƒˆì˜¨ëœ ì•„ì´í°ì—ì„œ Fridaë¥¼ ì´ìš©í•œ ì• í”Œë¦¬ì¼€ì´ì…˜(ì´í•˜ ì•±) ë¶„ì„ ë° ê³µê²© ë°©ë²•ì„ ì•Œì•„ë³´ì.Jailbreak iPhoneiOS ë²„ì „ì— ë”°ë¼ ë‹¤ì–‘í•œ Jailbreak íˆ´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê°€ì¥ ìµœì‹  ë²„ì „ì˜ iOSë¥¼ ìœ„í•œ Jailbreak íˆ´ì„ ì†Œê°œí•˜ìë©´, Coolstarì˜ Electraê°€ ìˆë‹¤. 11.2 ë¶€í„° 11.4 Beta3 ê¹Œì§€ ì§€ì›í•œë‹¤. ê°€ì§€ê³  ìˆëŠ” ì•„ì´í°ì˜ iOS ë²„ì „ì„ í™•ì¸í•˜ê³  ê·¸ì— ë§ëŠ” Jailbreak íˆ´ì„ ì´ìš©í•˜ë©´ ëœë‹¤. ìì‹ ì˜ ì•„ì´í°ì´ iOS 11.4.1 ì´ìƒ ë²„ì „ì´ë¼ë©´ ë‹¤ë¥¸ ì•„ì´í°ì„ êµ¬í•´ë³´ë„ë¡ í•˜ì.CydiaCydiaëŠ” íƒˆì˜¥ëœ iOS ë””ë°”ì´ìŠ¤ë¥¼ ìœ„í•œ ì•± ìŠ¤í† ì–´ë‹¤. ì• í”Œì˜ ì•± ìŠ¤í† ì–´ì—ì„œ ì„¤ì¹˜í•  ìˆ˜ ì—†ëŠ” ì•± ë˜ëŠ” ê¸°ëŠ¥ ê°œì„ ì„ ìœ„í•œ íŠ¸ìœ…(tweak)ì„ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤. iOS ì•± í•´í‚¹ì„ ìœ„í•´ ê¸°ë³¸ì ìœ¼ë¡œ BigBoss Recommended Tools, OpenSSH, Fridaì™€ ê°™ì€ íŠ¸ìœ…ì„ ì„¤ì¹˜í•œë‹¤. Jailbreak íˆ´ì„ ì‚¬ìš©í•´ íƒˆì˜¥ì„ í•˜ë©´ ë³´í†µ ìë™ìœ¼ë¡œ ì„¤ì¹˜ ë˜ì§€ë§Œ ê°„í˜¹ í•¨ê»˜ ì„¤ì¹˜ ë˜ì§€ ì•ŠëŠ” ê²½ìš°ë„ ìˆì–´ ì§ì ‘ ì„¤ì¹˜í•´ì•¼ í•  ë•Œë„ ìˆë‹¤. (Cydiaë¥¼ ë§Œë“  Jay Freemanì´ ê³§ Cydiaë¥¼ íì‡„ í•œë‹¤ê³  í•œë‹¤.)Install Frida Server on iPhoneCydiaì—ì„œ Fridaë¥¼ ì„¤ì¹˜í•´ë³´ì. frida.reì—ì„œ ê°„ë‹¨í•œ ì„¤ì¹˜ ë°©ë²•ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.Sources(ì†ŒìŠ¤) íƒ­ -&gt; Edit(í¸ì§‘) -&gt; Add(ì¶”ê°€) -&gt; https://build.frida.reê·¸ë¦¬ê³  ë‚˜ë©´ Search(ê²€ìƒ‰) íƒ­ì—ì„œ Fridaë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤. ì„¤ì¹˜í•˜ë©´ ëœë‹¤.í˜„ì¬ ë²„ì „ì€ 12.2.27ì´ë‹¤. ì´ì–´ì„œ ì„¤ì¹˜í•  Frida CLI Toolsì˜ Major ë²„ì „ì´ ì¼ì¹˜í•´ì•¼ ì œëŒ€ë¡œ ë™ì‘í•œë‹¤. Frida toolsì˜ ë²„ì „ì€ 12.2.x ì—¬ì•¼ í•œë‹¤.Install Fridaâ€™s CLI Tools on your MacFrida ì„œë²„ì— ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ Pythonì„ ì‚¬ìš©í•œë‹¤. (Command 1) ì´ ë•Œ ì‚¬ìš©í•  Pythonìš© Frida ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•œë‹¤. Python 3 ë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ë‹¬í•˜ê¸°ë¡œ í•œë‹¤.(Command 2)ì•„ì´í°ì— ì„¤ì¹˜ëœ Frida ì„œë²„ì™€ í†µì‹ í•˜ê³  ê°„ë‹¨í•œ ëª…ë ¹ì„ ì „ë‹¬í•˜ê¸°ìœ„í•´ ì‚¬ìš©ìì˜ ì»´í“¨í„°ì— Frida íˆ´(Fridaâ€™s CLI tools)ì„ ì„¤ì¹˜í•´ì•¼ í•œë‹¤. ì„¤ì¹˜ë¥¼ ìœ„í•´ Pythonì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•˜ëŠ”ë°, Python 2.7ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. (Command 3,4)Commands:  brew install python3 (Python 3 ì„¤ì¹˜(brew for Mac))  pip3 install frida (Python3 ìš© Frida ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜)  sudo easy_install pip (Python 2.7 íŒ¨í‚¤ì§€ ê´€ë¦¬ì ì„¤ì¹˜ - ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ìˆì§€ ì•Šë‹¤.)  sudo -H pip install frida-tools (Python 2.7 ë²„ì „ì˜ Frida-tools ì„¤ì¹˜)          pip3ë¡œ ì„¤ì¹˜í•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” pip3ì˜ frida-toolsëŠ” ì¸ì½”ë”© ë²„ê·¸ê°€ ìˆì–´ í•œê¸€ì´ ì œëŒ€ë¡œ í‘œì‹œë˜ì§€ ì•ŠëŠ”ë‹¤.      Module six ê´€ë ¨ ì—ëŸ¬ê°€ ë‚  ê²½ìš° sudo -H pip install frida-tools --ignore-installed six ë¡œ ì„¤ì¹˜      Test Fridaì—¬ê¸°ê¹Œì§€ Fridaë¥¼ ì‹¤í–‰í•  ì¤€ë¹„ë¥¼ ë§ˆì³¤ë‹¤. ì•„ì´í°ì„ ì»´í“¨í„°ì— ì—°ê²°í•˜ê³  frida-ps -U ëª…ë ¹ì„ ì‹¤í–‰í•´ë³´ì.ìœ„ ëª…ë ¹ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆë‹¤ë©´ í˜„ì¬ ì•„ì´í°ì—ì„œ ë™ì‘ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ì˜ ëª©ë¡ì„ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì•ìœ¼ë¡œ ìì£¼ ì‚¬ìš©í•˜ê²Œ ë  ëª…ë ¹ frida-ps -Uai ë„ ì‹¤í–‰í•´ë³´ì. í”„ë¡œì„¸ìŠ¤ì˜ Identifierë¥¼ ì¶œë ¥í•´ì¤€ë‹¤. ì£¼ë¡œ ì•±ì˜ Identifierë¥¼ ì´ìš©í•´ ì•±ì— ì ‘ê·¼í•´ ê³µê²©ì„ ì‹¤í–‰í•  ê²ƒì´ë‹¤.Sandboxì•„ì´í°ì€ ë³´ì•ˆì„ ìœ„í•´ Sandboxë¼ëŠ” ê°œë…ì„ ê°€ì§€ê³  ìˆë‹¤. SandboxëŠ” ì»¤ë„ ìˆ˜ì¤€ì—ì„œ ì‹œí–‰ë˜ëŠ” ì ‘ê·¼ ì œì–´ ê¸°ìˆ ì´ë‹¤. ì•±ì„ ì‹¤í–‰í•  ë•Œ ê²©ë¦¬ëœ ê³µê°„(Sandbox)ì„ ì œê³µí•˜ê³  ê·¸ê³³ì„ ë²—ì–´ë‚˜ í—ˆìš©ë˜ì§€ ì•Šì€ ì‘ì—…ì„ í•˜ì§€ ëª»í•˜ë„ë¡ ë°©ì§€í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.ìš´ì˜ì²´ì œë³„ë¡œ ë‹¤ì–‘í•œ í˜•íƒœë¡œ Sandboxë¥¼ êµ¬í˜„í•˜ê³  ìˆëŠ”ë°, ì•„ì´í°ì˜ ê²½ìš° ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ êµ¬í˜„ë˜ì–´ ìˆë‹¤.Cydiaì—ì„œ OpenSSHë¥¼ ì„¤ì¹˜í•˜ê³  root ê³„ì •ìœ¼ë¡œ ì ‘ì†í•´ë³´ë©´ /var/containers/Bundle/Applicationì—ì„œ ì•± ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ìœ„ ê·¸ë¦¼ì—ì„œ ì´ 6ê°œì˜ ì•±ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë°, ì˜ˆì¸¡í•˜ê¸° í˜ë“  ë‚œìˆ˜ë¡œ ëœ ë¬¸ìì—´ì˜ í´ë”ëª…ì„ ê°€ì§€ê³  ìˆë‹¤. ì•±ì´ ì„¤ì¹˜ë˜ê¸° ì „ê¹Œì§€ ë””ë ‰í„°ë¦¬ì˜ ì´ë¦„ì„ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ì•±ì´ë‚˜ ë¦¬ì†ŒìŠ¤ê°€ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.Clutch and Get a binary from Application SandboxFrida ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ê¸° ì „ì— ì•± ë¶„ì„ì„ ë¨¼ì € í•´ì•¼ í•œë‹¤. ì•±ì´ ì–´ë–»ê²Œ êµ¬í˜„ë˜ì–´ ìˆëŠ”ì§€ ì•Œê³  ê³µê²©í•˜ê³ ì í•˜ëŠ” ìœ„ì¹˜ë¥¼ ì •í™•íˆ ì•Œì•„ì•¼ ê·¸ì— ë§ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì•„ì´í°ì˜ ì‹¤í–‰íŒŒì¼ì€ ì•ì„œ ì„¤ëª…í•œ ì•±ì˜ ìƒŒë“œë°•ìŠ¤ì— ë“¤ì–´ìˆë‹¤. ìƒŒë“œë°•ìŠ¤ ì•ˆì„ ì‚´í´ë³´ë©´ MyApp.app, Documents, Library ë“±ì˜ í´ë”ì™€ íŒŒì¼ë“¤ì´ ì¡´ì¬í•˜ëŠ”ë°, ì´ ì¤‘ì— MyApp.app íŒ¨í‚¤ì§€ í´ë”ì— ì‹¤í–‰íŒŒì¼ì´ ë“¤ì–´ìˆë‹¤. scp ë˜ëŠ” iFunbox ë“±ì„ ì´ìš©í•´ ë‹¤ìš´ë¡œë“œ ë°›ìœ¼ë©´ ëœë‹¤. ì•„ë˜ ì˜ˆì‹œì—ì„  exchangeë¼ëŠ” ì•±ì˜ ì‹¤í–‰íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ì•˜ë‹¤.ì•± ìŠ¤í† ì–´ì— ë°°í¬ëœ ì•±ì„ ë¶„ì„í•  ê²½ìš°, ì‹¤í–‰íŒŒì¼ì´ ì•”í˜¸í™”ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë‹¤ìš´ë¡œë“œ ë°›ë”ë¼ë„ ë¶„ì„í•  ìˆ˜ ì—†ë‹¤. ì´ ê²½ìš° Clutchë¥¼ ì´ìš©í•´ ë³µí˜¸í™”í•  ìˆ˜ ìˆë‹¤.Clutch ë¥¼ ì´ìš©í•´ ì•±ì„ ë³µí˜¸í™”1í•˜ë©´ ë¶„í™ìƒ‰ìœ¼ë¡œ ë³µí˜¸í™”ëœ ì‹¤í–‰íŒŒì¼ì˜ ê²½ë¡œë¥¼ í‘œì‹œí•´ì¤€ë‹¤. ìœ„ ì˜ˆì‹œì˜ ê²½ìš° /var/tmp/clutch/8595636C-4456-4061-9E70-7F4CB5E21995 ì— ìˆëŠ” ì‹¤í–‰íŒŒì¼ì„ ê°€ì ¸ì˜¤ë©´ ëœë‹¤.Open the Binary with IDAì•„ì´í°ì—ì„œ ë‹¤ìš´ë¡œë“œí•œ ì‹¤í–‰íŒŒì¼ì„ IDA ë¥¼ ì´ìš©í•´ ì—´ì–´ë³´ì. ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ IDAëŠ” í•¨ìˆ˜ì˜ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” Functions ë¶€ë¶„ê³¼ í•¨ìˆ˜ì˜ ë‚´ìš©ì„ í‘œì‹œí•´ì£¼ëŠ” Disassemble View ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰œë‹¤. Functions ì—ì„œ ë¶„ì„í•˜ê³ ì í•˜ëŠ” ëŒ€ìƒì˜ í•¨ìˆ˜ë¥¼ ë¨¼ì € ì°¾ê³ , Disassemble View ì—ì„œ í•¨ìˆ˜ì˜ ë‚´ìš©ì„ í™•ì¸í•œë‹¤. í•¨ìˆ˜ë¥¼ ë¶„ì„í•˜ê¸° ìœ„í•´ì„œëŠ” Objective C ì˜ ê¸°ë³¸ ë¬¸ë²•2ì— ëŒ€í•œ ì´í•´ë¥¼ í•„ìš”í•˜ë‹¤.Objective C - Basic #1. FunctionsIDAì˜ Functionsì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” Objective C í•¨ìˆ˜ì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ì.í•¨ìˆ˜ì˜ ëª¨ì–‘ì„ ì‚´í´ë³´ë©´ ì´ 3ê°€ì§€ í˜•íƒœì˜ í•¨ìˆ˜ê°€ ìˆë‹¤.  -[exchange.AppDelegate application:didFinishLaunch:] : Objective Cì˜ ê¸°ë³¸ì ì¸ í•¨ìˆ˜ì˜ í˜•íƒœë‹¤. (-)ë¡œ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ í•¨ìˆ˜ë¥¼ ì˜ë¯¸í•˜ë©° (+)ë¡œ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜ëŠ” í´ë˜ìŠ¤ í•¨ìˆ˜ë‹¤. [Object Method:Parameter ..] ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. ì˜¤ë¥¸ìª½ ê·¸ë¦¼ê³¼ ê°™ì´ somePerson ê°ì²´ì— ì¡´ì¬í•˜ëŠ” sayHello í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ XYZPerson í´ë˜ìŠ¤ì— ìˆëŠ” sayHello í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ë°©ì‹ì´ë‹¤. sayHello í•¨ìˆ˜ì—ì„œ ë‹¤ì‹œ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ”ë°, ì—¬ê¸°ì„œ ì‚¬ìš©ëœ selfëŠ” C++ì˜ this í¬ì¸í„°ì™€ ê°™ì€ ì—­í• ì„ í•œë‹¤. ìê¸° ìì‹ ì˜ saySomething í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. ì½œë¡ (:)ì„ êµ¬ë¶„ìë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.  sub_100016928 : ì‹¬ë³¼(Symbol) ì •ë³´ê°€ ì—†ëŠ” í•¨ìˆ˜ë‹¤. í•¨ìˆ˜ì˜ ì£¼ì†Œê°’ì„ ì´ìš©í•´ í•¨ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. Objective C ì»´íŒŒì¼ëŸ¬ì— ì˜í•œ ì½”ë“œ ìµœì í™” ê³¼ì •ì—ì„œ ì½”ë“œì˜ ì¼ë¶€ê°€ ë³„ë„ì˜ í•¨ìˆ˜ë¡œ ë¶„ë¦¬ëœ ê²½ìš°ë„ ì´ì— ì†í•œë‹¤. ì´ í•¨ìˆ˜ì™€ ì—°ê´€ëœ Caller í•¨ìˆ˜ëŠ” ê°€ê¹Œìš´ ì£¼ì†Œì— ìœ„ì¹˜í•˜ê³  ìˆë‹¤.  nullsub_() : í”„ë¡œê·¸ë¨ì— ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” ì½”ë“œì´ê¸´ í•˜ë‚˜, ìµœì¢… ë²„ì „ì—ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í˜¸ì¶œì´ë‹¤. í•¨ìˆ˜ì˜ ê°’ì´ 0ìœ¼ë¡œ ì„¤ì •ëœ ê²½ìš° return ê³¼ ê°™ì€ ì—­í• ì„ í•œë‹¤.Objective C - Basic #2. objc_msgSendMessage SendëŠ” Objective Cë¥¼ ëŒ€í‘œí•˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ê°œë…ì´ë‹¤. ì•ì„œ ì‚´í´ë³¸ ë°”ì™€ ê°™ì´ ëŒ€ê´„í˜¸ [ ] ì‚¬ì´ì— ì“°ì—¬ì§€ëŠ” ì½”ë“œì— ì˜í•´ Objective C ë©”ì‹œì§€ë¥¼ ìƒì„±í•œë‹¤. Objective C ì½”ë“œë¡œ [receiver message] ì™€ ê°™ì´ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ë‹¤ê³  í•˜ë©´ ì»´íŒŒì¼ëŸ¬ëŠ” objc_msgSend(receiver, selector)ë¡œ ì½”ë“œë¥¼ ë°”ê¾¼ë‹¤. ì¸ìê°€ ìˆì„ ê²½ìš° objc_msgSend(receiver, selector, arg1, arg2, ..) ë¡œ ë°”ê¾¼ë‹¤. Objective Cê°€ receiverì—ê²Œ messageë¥¼ ì „ë‹¬í•˜ë©´ ëŒ€ìƒ ê°ì²´(receiver)ëŠ” ë©”ì‹œì§€(message)ê°€ ëˆ„êµ¬ë¡œë¶€í„° ì™”ëŠ”ì§€, í´ë˜ì‹œ ìºì‹œ(Classh cache)ì™€ í´ë˜ìŠ¤ ë””ìŠ¤íŒ¨ì¹˜ í…Œì´ë¸”(class dispatch table)ì„ ê²€ìƒ‰í•˜ì—¬ ì–´ë–¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í• ì§€ ë“±ì˜ ê²°ì •ì„ í•œë‹¤.ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒ ì½”ë“œëŠ”â€‹[self printMessageWithString:@\"Hello world!\"];â€‹ì»´íŒŒì¼ë˜ë©´ ì‹¤ì œë¡œ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¡œ ë³€í™˜ë˜ê³ ,â€‹objc_msgSend(self, @selector(printMessageWithString:), @\"Hello world\");â€‹ëŒ€ìƒ ê°ì²´ì˜ isa í¬ì¸í„°3ë¥¼ ì´ìš©í•˜ì—¬ í•´ë‹¹ ë©”ì‹œì§€ì— ëŒ€í•œ ì…€ë ‰í„°ì˜ ì‘ë‹µì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ì‹¤í–‰í•œë‹¤. ì‹¤ì œë¡œ objc_msgSend í•¨ìˆ˜ëŠ” ì•„ë¬´ê°’ë„ ë¦¬í„´í•˜ì§€ ì•Šì§€ë§Œ, ì´ ë©”ì‹œì§€ì— ì˜í•´ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ê°€ ê²°ê³¼ë¥¼ ë¦¬í„´í•˜ê¸° ë•Œë¬¸ì— objc_msgSendê°€ ë¦¬í„´í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤.Trace FunctionsFridaëŠ” frida-toolsì— í¬í•¨ëœ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ê³¼ Frida APIë¥¼ í™œìš©í•œ ìŠ¤í¬ë¦½íŠ¸ ì¸ì ì…˜(Injection) ë‘ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì¢€ ë” ììœ ë¡œìš´ Frida ì‚¬ìš©ì„ ìœ„í•´ Frida APIë¥¼ ì´ìš©í•´ ì•±ì„ í›„í‚¹(Hooking) í•´ë³´ì. iOS ì•±ì˜ ê¸°ë³¸ì´ì ì•±ì˜ ì‹œì‘ì¸ AppDelegate í´ë˜ìŠ¤ë¥¼ ì¶”ì í•  ê²ƒì´ë‹¤. ì‚¬ìš©í•œ ìŠ¤í¬ë¦½íŠ¸ëŠ” 0xdea/frida-scriptsë¥¼ ì°¸ì¡°í•˜ì—¬ ì‘ì„±í•˜ì˜€ë‹¤.ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ì•„ raptor_frida_ios_trace.js(ì´í•˜ trace.js) íŒŒì¼ì„ ì—´ê³  ì½”ë“œ ë§ˆì§€ë§‰ ë¶€ë¶„ì— ì•„ë˜ì™€ ê°™ì´ trace(â€œ-[exchange.AppDelegate *]â€) ë¥¼ ì‘ì„±í•˜ì—¬ ì €ì¥í•˜ì—¬ ì•„ë˜ ëª…ë ¹ì„ ì‹¤í–‰í•´ë³´ì.$ frida -U -f com.bitxflow.exchange -l ./raptor_frida_ios_trace.js --no-pauseì˜µì…˜ì„ ê°„ë‹¨íˆ ì‚´í´ë³´ë©´ -U ì˜µì…˜ì€ USB ì—°ê²°, -F ì˜µì…˜ì€ ì‹¤í–‰(spawn)í•  ì•±ì˜ íŒ¨í‚¤ì§€ ëª…, -L ì˜µì…˜ì€ ë¶ˆëŸ¬ì˜¬ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ëª…, ê·¸ë¦¬ê³  â€“no-pauseëŠ” ì•±ì„ ì‹œì‘ì‹œí‚¨ í›„ ë©ˆì¶¤ì—†ì´ ì§„í–‰í•˜ëŠ” ê²ƒì„ ëœ»í•œë‹¤.ì‹¤í–‰ëœ ê²°ê³¼ë¥¼ ë³´ë©´ exchange.AppDelegate í´ë˜ìŠ¤ì™€ ê´€ë ¨ëœ ëª¨ë“  í•¨ìˆ˜ë“¤ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ í™”ë©´ì— ì¶œë ¥í•´ì¤€ë‹¤. ê·¸ë¦¬ê³  ì–´ë–¤ í•¨ìˆ˜(Caller)ê°€ í˜¸ì¶œí•˜ì˜€ëŠ”ì§€, ì¸ì(parameter)ëŠ” ë¬´ì—‡ì¸ì§€, ê·¸ë¦¬ê³  ê²°ê³¼ê°’(retval)ì€ ë¬´ì—‡ì¸ì§€ ë³´ì—¬ì¤€ë‹¤. ì•±ì´ ì‹¤í–‰ë˜ëŠ” ê³¼ì •ì—ì„œ ì–´ë–¤ í•¨ìˆ˜ë“¤ì´ í˜¸ì¶œë˜ëŠ”ì§€ ì‚´í´ë³¼ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.Debug FunctionDebugë¼ëŠ” ì œëª©ì„ ì“°ê¸´ í–ˆì§€ë§Œ FridaëŠ” í›„í‚¹(Hooking)ì„ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— ì •í™•í•œ ì˜ë¯¸ì—ì„œ DebugëŠ” ì•„ë‹ˆë‹¤. í•˜ì§€ë§Œ ê±°ì‹œì  ê´€ì ì—ì„œ ì•± í•´í‚¹ì„ í•  ë•Œ Debuggingì„ í†µí•´ í•¨ìˆ˜ì˜ ì…/ì¶œë ¥ê°’ ì¡°ì‘, í•¨ìˆ˜ì˜ ë™ì‘ ë³€ê²½ì„ ìˆ˜í–‰í•˜ê³  ìˆê¸° ë•Œë¬¸ì— Debugë¼ê³  í•´ë³´ì. í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ë“¤ ì¤‘ì— íŠ¹ì • í•¨ìˆ˜ë¥¼ ì‚´í´ë³´ê³ ì í•  ë• ë‹¤ìŒê³¼ ê°™ì´ Fridaë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì˜ˆì œ ì½”ë“œëŠ” raptor_frida_ios_autoIntercept.js(ì´í•˜ autoIntercept.js)ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.ì•±ì˜ ë™ì‘ ê³¼ì • ì¤‘ Google Firebase OAuth ì¸ì¦ì˜ ì¼ë¶€ë¶„ì„ í™•ì¸í•´ë³´ì•˜ë‹¤. FIRAuth í´ë˜ìŠ¤ì— ìˆëŠ” canHandleURL í•¨ìˆ˜ì˜ ì¸ì(arg)ê°’ê³¼ ë¦¬í„´(retval)ê°’ì„ í™•ì¸í•´ë³´ì•˜ëŠ”ë°, ì¸ìê°’ìœ¼ë¡œ Googleì— ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì´ëŠ” URLì„ ì „ë‹¬ë°›ê³ , ì•„ë¬´ê²ƒë„ ë¦¬í„´í•˜ì§€ ì•Šì•˜ë‹¤. Interceptor.attach(oldImpl.implementation, {}) ì— ìˆëŠ” onEnter: function(args) {} ê³¼ onLeave: function(retval) {} í•¨ìˆ˜ë¥¼ ê³ ì³ í•¨ìˆ˜ì˜ ì¸ìê°’ê³¼ ë¦¬í„´ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.Convert IDA address to memory addressí•¨ìˆ˜ì˜ ì‹¬ë³¼ì •ë³´ê°€ ì—†ëŠ” í•¨ìˆ˜(ì˜ˆ. sub_100016928)ì˜ ê²½ìš° ì•ì„œ ì‚¬ìš©í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•´ ê³µê²©í•  ìˆ˜ê°€ ì—†ë‹¤. IDAì—ì„œ í™•ì¸í•œ í•¨ìˆ˜ì˜ ì£¼ì†Œê°’ì„ ì´ìš©í•´ ì§ì ‘ í•¨ìˆ˜ë¥¼ í›„í‚¹í•´ì•¼ í•œë‹¤. ì•„ë˜ memAddress í•¨ìˆ˜ë¥¼ ì´ìš©í•´ IDAì—ì„œ í™•ì¸í•œ ì£¼ì†Œë¡œ í•¨ìˆ˜ê°€ ì•±ì—ì„œ ë™ì‘í•  ë•Œì˜ ì£¼ì†Œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.IDA ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” sub_100016928 í•¨ìˆ˜ëŠ” AppDelegate í•¨ìˆ˜ì—ì„œ í˜¸ì¶œí•˜ê³  ìˆëŠ” í•¨ìˆ˜ë‹¤. ë³„ë„ì˜ ì‹¬ë³¼ì •ë³´ê°€ ì—†ê¸°ë•Œë¬¸ì— í•¨ìˆ˜ ëª…ì„ ì´ìš©í•˜ì§€ ì•Šê³ , memAddress í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ í•¨ìˆ˜ì˜ ì£¼ì†Œë¥¼ ê°€ì ¸ì™”ë‹¤. memAddress í•¨ìˆ˜ì˜ ì„¸ ë²ˆì§¸ ì¸ìì— IDA ì—ì„œ í™•ì¸í•œ í•¨ìˆ˜ì˜ ì£¼ì†Œê°’ì„ ë„£ì–´ì£¼ëŠ”ë°, 0x100016928ì´ ì•„ë‹Œ 0x16928ì¸ ì´ìœ ëŠ” IDAê°€ ì‹¤í–‰íŒŒì¼ ë¶„ì„ ì‹œ ì‚¬ìš©í•œ ë² ì´ìŠ¤ ì£¼ì†Œ 0x100000000 ë¥¼ ì œì™¸í•œ ê°’ì´ë‹¤.Frida CodeShareë³´ì•ˆì„ ìœ„í•´ ì•±ë“¤ì´ ê°€ì§€ê³  ìˆëŠ” ê³µí†µì ì¸ ê¸°ëŠ¥(ì˜ˆë¥¼ ë“¤ë©´, SSL Pinning, Anti Jailbreak ë“±)ë“¤ì´ ìˆë‹¤. ì´ ê¸°ëŠ¥ë“¤ì€ ì•± ì ê²€ì„ ìœ„í•´ ë°˜ë“œì‹œ ìš°íšŒí•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ë“¤ì´ë‹¤. ì´ ê¸°ëŠ¥ë“¤ì˜ êµ¬í˜„ì€ ê±°ì˜ ë¹„ìŠ·í•œ ë°©ë²•ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì— Frida ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•´ ìš°íšŒ í•œë‹¤ë©´ ê±°ì˜ ë™ì¼í•œ ì½”ë“œê°€ ì‘ì„±ë  ê²ƒì´ë‹¤. ì´ ë²ˆê±°ë¡œì›€ì„ í”¼í•˜ê¸° ìœ„í•´ Frida CodeShare Projectê°€ ë§Œë“¤ì–´ì¡Œë‹¤. Frida CodeShare ProjectëŠ” ì„¸ê³„ ê°êµ­ì˜ ê°œë°œìë“¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ë‹¤ì–‘í•œ ì•„ì´ë””ì–´ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡Œë‹¤. ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ì•±ì˜ ë‹¤ì–‘í•œ ë³´ì•ˆ ê¸°ëŠ¥ì„ ìš°íšŒí•˜ê±°ë‚˜ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤.ëŒ€í‘œì ìœ¼ë¡œ ios-ssl-bypass ì½”ë“œê°€ ìˆë‹¤. SSL Pinning ê¸°ìˆ ì„ í†µí•´ ì„œë²„ì™€ í†µì‹ í•˜ëŠ” ë‚´ìš©ì„ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•  ìˆ˜ ìˆì§€ë§Œ, ì´ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì†ì‰½ê²Œ ìš°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤. ë³„ë„ì˜ ì½”ë“œ ì‘ì„± ì—†ì´ ì•„ë˜ ëª…ë ¹$ frida â€”codeshare dki/ios10-ssl-bypass -f &lt;app identifier&gt;ì„ ì‹¤í–‰í•˜ë©´ ë³´ì•ˆ ê¸°ëŠ¥ì´ ë°”ë¡œ ìš°íšŒëœë‹¤. ë‹¤ì–‘í•œ ì½”ë“œê°€ ê³µìœ ë˜ì–´ ìˆìœ¼ë‹ˆ, ê²€ìƒ‰í•´ë³´ì.To bring this session to an endFridaëŠ” ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ë”°ë¼ ë¬´í•œí•œ ì ì¬ë ¥ì„ ê°€ì§€ê³  ìˆê³ , ê³„ì†í•´ì„œ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ê³  ìˆë‹¤. ìµœì‹  ë²„ì „ì˜ FridaëŠ” ì»¤ë„ë„ ë‹¤ë£° ìˆ˜ ìˆë‹¤. ì•„ì´í°ë¿ë§Œ ì•„ë‹ˆë¼ ì•ˆë“œë¡œì´ë“œ, ì¼ë°˜ PC, Mac OS ì—ì„œ ë™ì‘í•˜ëŠ” ì•±ë„ í›„í‚¹ì´ ê°€ëŠ¥í•˜ë‹¤. ê°ˆê³  ë‹¦ì•„ ë‚´ ê²ƒìœ¼ë¡œ ë§Œë“¤ì!!PDF ë‹¤ìš´ë¡œë“œ  1 clutchë¥¼ ì´ìš©í•´ ë³µí˜¸í™” í•˜ë©´ ì‹¤í–‰íŒŒì¼ê³¼ í•¨ê»˜ ì‚¬ìš©ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ í•¨ê»˜ ë³µí˜¸í™”ëœë‹¤. clutchì— í‘œì‹œëœ ê²½ë¡œì—ì„œ ì‹¤í–‰íŒŒì¼ì„ ì°¾ì•„ë³´ì.  2 swiftë¡œ ì‘ì„±ëœ ì•±ë„ ë¹Œë“œ ê³¼ì •ì—ì„œ Objective Cë¡œ ë³€í™˜ë˜ê¸° ë•Œë¬¸ì— ìµœì¢…ì ìœ¼ë¡œ Objective C ë¬¸ë²•ì„ ì´í•´í•˜ê³  ìˆì–´ì•¼ í•œë‹¤.  3 Objective Cì˜ ëª¨ë“  ê°ì²´ëŠ” isaë¼ëŠ” í´ë˜ìŠ¤ íƒ€ì… ë§´ë²„ ë³€ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆë‹¤. ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ê±°ë‚˜ ìê¸° ìì‹  í´ë˜ìŠ¤ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ”ë° ì“°ì¸ë‹¤."
  },
  
  {
    "title": "Node JS Serialization Vulnerability",
    "url": "/posts/NodeJSRCE/",
    "categories": "Security, Web",
    "tags": "NodeJS, web, vulnerability",
    "date": "2018-05-24 00:00:00 +0900",
    





    
    "snippet": "SaaSì™€ MBaaSì— ëŒ€í•´ ë‹¤ë£¬ ì ì´ ìˆë‹¤. ê¸€ë¡œë²Œ IT ê¸°ì—…ë“¤ì´ ì œê³µí•˜ê³  ìˆëŠ” ê°€ì¥ ìµœì‹ ì˜ ì„œë¹„ìŠ¤ í”Œë«í¼ì´ë©°, í˜„ì¬ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆëŠ” í”Œë«í¼ì´ê¸°ë„ í•˜ë‹¤. í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ê·¸ì¹˜ì§€ ì•Šê³  ì„œë¹„ìŠ¤ í”Œë«í¼ì€ ì„œë²„ë¦¬ìŠ¤(Serverless) í˜•íƒœë¡œ ë°œì „í•˜ê³  ìˆë‹¤. ë§ ê·¸ëŒ€ë¡œ ì„œë²„ê°€ ì—†ìŒì„ ì˜ë¯¸í•˜ì§€ë§Œ ì‚¬ì‹¤ ì„œë²„ëŠ” ì¡´ì¬í•˜ê³ , ê°œë°œìë“¤ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥(F...",
    "content": "SaaSì™€ MBaaSì— ëŒ€í•´ ë‹¤ë£¬ ì ì´ ìˆë‹¤. ê¸€ë¡œë²Œ IT ê¸°ì—…ë“¤ì´ ì œê³µí•˜ê³  ìˆëŠ” ê°€ì¥ ìµœì‹ ì˜ ì„œë¹„ìŠ¤ í”Œë«í¼ì´ë©°, í˜„ì¬ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆëŠ” í”Œë«í¼ì´ê¸°ë„ í•˜ë‹¤. í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ê·¸ì¹˜ì§€ ì•Šê³  ì„œë¹„ìŠ¤ í”Œë«í¼ì€ ì„œë²„ë¦¬ìŠ¤(Serverless) í˜•íƒœë¡œ ë°œì „í•˜ê³  ìˆë‹¤. ë§ ê·¸ëŒ€ë¡œ ì„œë²„ê°€ ì—†ìŒì„ ì˜ë¯¸í•˜ì§€ë§Œ ì‚¬ì‹¤ ì„œë²„ëŠ” ì¡´ì¬í•˜ê³ , ê°œë°œìë“¤ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥(Functions)ì—ë§Œ ì§‘ì¤‘í•˜ëŠ” í˜•íƒœë‹¤. FaaS(Functions as a Service)1ë¡œ ë¶ˆë¦¬ëŠ” ì´ ì„œë¹„ìŠ¤ëŠ” Google Cloud Functionsê°€ ëŒ€í‘œì ì´ë‹¤. ê·¸ë¦¬ê³  ì—¬ê¸°ì„œ ì‚¬ìš©í•˜ëŠ” ëŒ€í‘œì ì¸ ì–¸ì–´ê°€ Javascriptë¡œ ë§Œë“¤ì–´ì§„ Node.jsë‹¤.Node JS ì‹¤í–‰ í™˜ê²½ì‚¬ì‹¤ Javascript ëŸ°íƒ€ì„(í”„ë¡œê·¸ë˜ë° ì–¸ì–´ê°€ êµ¬ë™ë˜ëŠ” í™˜ê²½)ì€ ë¸Œë¼ìš°ì €ì—ë§Œ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ ì´ í•œê³„ë¥¼ ê·¹ë³µí•˜ê³  Node.jsê°€ ë§Œë“¤ì–´ì¡Œë‹¤. Node.jsëŠ” REPL(Read, Eval, Print, Loop)ì„ í†µí•´ ëŸ°íƒ€ì„ì„ ì œê³µí•œë‹¤. ìœˆë„ìš°ì˜ REPLì»¤ë§¨ë“œ ì°½ì´ë‚˜, ë¦¬ëˆ…ìŠ¤ì˜ í„°ë¯¸ë„ í™˜ê²½ì²˜ëŸ¼ ì‚¬ìš©ìê°€ ëª…ë ¹ì„ ì…ë ¥í•˜ë©´ ì‹œìŠ¤í…œì€ ëª…ë ¹ì„ ì½ê³ (Read), ëª…ë ¹ì„ ì²˜ë¦¬(Eval)í•œ í›„, ê²°ê³¼ë¥¼ ì¶œë ¥(Print)í•œë‹¤. ê·¸ë¦¬ê³  ì‚¬ìš©ìê°€ Ctrl + Cë¥¼ ëˆŒëŸ¬ ì¢…ë£Œí•  ë•Œê¹Œì§€ ì´ ê³¼ì •ì„ ë°˜ë³µ(Loop)í•œë‹¤. ë˜ëŠ” Javascript íŒŒì¼ì„ Node.js ì—ì„œ ì œê³µí•˜ëŠ” Javascript ëŸ°íƒ€ì„ì„ ì´ìš©í•´ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ ì œì‘í•  ë•Œ ë³´í†µ ì´ ë°©ì‹ì„ ì´ìš©í•œë‹¤.Serialization and IIFESerialization(ì§ë ¬í™”)ì€ ê°ì²´ë¥¼ ì§ë ¬í™”í•˜ì—¬ ì „ì†¡ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë§Œë“œëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ê°ì²´ì˜ ë°ì´í„°ë¥¼ ì—°ì†ì ì¸ ë°ì´í„°ë¡œ ë³€í™˜í•˜ì—¬ Streamì„ í†µí•´ ì „ë‹¬í•œë‹¤.IIFE(Immediately Invoked Function Expressions)ëŠ” ì¦‰ì‹œ í•¨ìˆ˜ í˜¸ì¶œ í‘œí˜„ì‹ì˜ ì¤„ì„ë§ì´ë‹¤. ê´„í˜¸ê°€ ì´ë¦„ì´ ì—†ëŠ” í•¨ìˆ˜ë¥¼ ê°ì‹¸ë©° í•¨ìˆ˜ê°€ ì„ ì–¸ëœë‹¤. ì„ ì–¸ê³¼ ë™ì‹œì— ì‹¤í–‰ë˜ë©°, ì´ í•¨ìˆ˜ëŠ” ì „ì—­ ìŠ¤ì½”í”„(scope, ì˜ì—­)ì— ì„ ì–¸ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë‚˜ì¤‘ì— ë‹¤ì‹œ í˜¸ì¶œ í•  ìˆ˜ ì—†ë‹¤. IIFEë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ì „ì—­ ìŠ¤ì½”í”„ì— í•¨ìˆ˜ ë˜ëŠ” ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ëŠ” ê²ƒì„ í”¼í•˜ê¸° ìœ„í•´ì„œë‹¤. ê·¸ë¦¬ê³  Javascriptì˜ í´ë¡œì €(Closure)ë¥¼ ì‰½ê²Œ ì œì–´í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ë¯¸ë£¨ê³  ë¬¸ì œì ì— ëŒ€í•´ ì•Œì•„ë³´ì.(function() {    // Do fun stuff    })()Node.jsì— ìˆëŠ” â€˜node-serializeâ€™ ëª¨ë“ˆì˜ unserialize í•¨ìˆ˜ëŠ” ì§ë ¬í™”ëœ ì„ì˜ì˜ ì½”ë“œ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ê²Œ ë˜ë©´ deSerialization(ì—­ì§ë ¬í™”)í•˜ë©´ì„œ ì‹¤í–‰ ê°€ëŠ¥í•œ Javascript ì½”ë“œë¡œ ë°”ê¿”ì¤€ë‹¤. ì¦‰, unserialize í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì„œë²„ì— IIFEë¥¼ ì´ìš©í•´ ì„ì˜ì˜ ì½”ë“œë¥¼ ì „ë‹¬í•˜ë©´ ë²„ê·¸ë¡œ ì¸í•´ ê³µê²©ìì˜ ì½”ë“œê°€ ì„œë²„ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆë‹¤.Exploitable Serverì„œë²„ëŠ” 3000ë²ˆ í¬íŠ¸ë¡œ ì„œë¹„ìŠ¤ë˜ê³  ìˆë‹¤. 4ë²ˆì§¸ ì¤„ì—ì„œ â€˜node-serializeâ€™ ëª¨ë“ˆì„ serialize ë¼ëŠ” ë³€ìˆ˜ë¡œ ì‚¬ìš©í•œë‹¤. ì„œë¹„ìŠ¤ì˜ ë™ì‘ ê³¼ì •ì„ ì‚´í´ë³´ë©´:  ì‚¬ìš©ìì˜ ì ‘ì† ìš”ì²­ì— ë‹´ê¸´ ì¿ í‚¤ ì •ë³´ ì¤‘ profileì— ë‹´ê¸´ ë°ì´í„°ë¥¼ base64ë¡œ Decode  unserialize í•¨ìˆ˜ë¡œ ì—­ì§ë ¬í™”.  ì—­ì§ë ¬í™”ë¡œ í™•ì¸í•œ ì „ë‹¬ë°›ì€ ë°ì´í„° ì¤‘ username ì˜ ê°’ì„ í™”ë©´ì— í‘œì‹œì—¬ê¸°ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ë¶€ë¶„ì€ 2ë²ˆì´ë‹¤. unserialize í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ ì „ë‹¬ë°›ì€ ì¸ì strì´ IIFEí•¨ìˆ˜ì¼ ê²½ìš° ì´ ì¸ì(í•¨ìˆ˜)ë¥¼ ì‹¤í–‰í•œë‹¤.Exploit Test, ê³µê²© í…ŒìŠ¤íŠ¸ê³µê²© ì½”ë“œë¥¼ ë§Œë“¤ ë•Œ ê°€ì¥ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì„œë²„ì˜ ì·¨ì•½í•œ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ ë³´ëŠ” ê²ƒì´ë‹¤. ì•„ë˜ ì½”ë“œì™€ ê°™ì´ â€˜node-serializeâ€™ ëª¨ë“ˆì˜ serialize í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ê³µê²© ì½”ë“œë¥¼ ë§Œë“¤ì–´ ë³´ì.ë³€ìˆ˜ yì— ë‹´ê¸´ Javascript í•¨ìˆ˜ëŠ” ì„œë²„ì˜ ë£¨íŠ¸(/) ë””ë ‰í„°ë¦¬ì˜ íŒŒì¼ ëª©ë¡ì„ í™”ë©´ì— í‘œì‹œí•´ì£¼ëŠ” ì½”ë“œë‹¤. 7ë²ˆì§¸ ì¤„ì—ì„œ ì´ ì½”ë“œ(y)ê°€ serialize í•¨ìˆ˜ì— ì „ë‹¬ë˜ì–´ serialize ëœ ì½”ë“œê°€ ì•„ë˜ì™€ ê°™ì´ í™”ë©´ì— í‘œì‹œëœë‹¤.Javascript ì½”ë“œê°€ serialize ë˜ê¸´ í–ˆì§€ë§Œ, ì‹¤í–‰ì´ ë˜ì§€ ì•Šì•˜ë‹¤. ì´ìœ ëŠ” Javascript í•¨ìˆ˜ë¥¼ IIFE ë¡œ ë§Œë“¤ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤. IIFEë¡œ ë§Œë“¤ì–´ì•¼ ì„ ì–¸ê³¼ ë™ì‹œì— ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤.ìœ„ Exploit Test Code #1ì— ìˆëŠ” Javascript í•¨ìˆ˜ ëì— ê´„í˜¸ë¥¼ ì¶”ê°€í•´ IIFE í•¨ìˆ˜ë¡œ ì„ ì–¸í•œë‹¤.SerializeëŠ” ì‹¤íŒ¨í–ˆì§€ë§Œ, Javascript IIFE ì½”ë“œëŠ” ì˜ ì‹¤í–‰ë˜ì—ˆë‹¤. ìµœì¢…ì ìœ¼ë¡œëŠ” ì„œë²„ì˜ unserialize í•¨ìˆ˜ë¥¼ ê³µê²©í•˜ëŠ” ê²ƒì´ ëª©í‘œì´ë¯€ë¡œ, unserialize í•¨ìˆ˜ë„ Javascript IIFE í•¨ìˆ˜ë¥¼ ì˜ ì‹¤í–‰ì‹œí‚¤ëŠ”ì§€ í™•ì¸í•œë‹¤.ì•ì„œ Exploit Test Code #1ì˜ ê²°ê³¼ë¡œ ë§Œë“¤ì–´ì§„ serializeëœ Javascript ì½”ë“œì˜ ëì— ê´„í˜¸ë¥¼ ì¶”ê°€í•´ IIFE Javascript í•¨ìˆ˜ë¡œ ì„ ì–¸ ë’¤ unserialize í•¨ìˆ˜ì˜ ì¸ìë¡œ ì „ë‹¬í–ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì˜ ì‹¤í–‰ëœë‹¤.Reverse Shell Remote Code Executionì´ì œ ì„œë²„ì— ì§ì ‘ ê³µê²©ì„ í•´ë³´ë„ë¡ í•˜ì. ê³µê²©ì€ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í–ˆë‹¤.ì„œë²„ì— ë³´ë‚¼ ê³µê²© ì½”ë“œëŠ” Reserve Shell2 ì½”ë“œë‹¤. ê³µê²©ì— ì„±ê³µí•˜ë©´ ì„œë²„ëŠ” ê³µê²©ìì˜ IPë¡œ ë¯¸ë¦¬ ì—´ì–´ë‘” 1337ë²ˆ í¬íŠ¸ì— ì„œë²„ì˜ ì‰˜ì„ ì „ë‹¬í•œë‹¤. ê³µê²©ìëŠ” ì„œë²„ì˜ ì‰˜ì„ íšë“í•  ìˆ˜ ìˆë‹¤. ê³µê²© ì½”ë“œëŠ” nodejsshell.pyë¥¼ ì´ìš©í•´ ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“ ë‹¤. ê³µê²©ìì˜ IPëŠ” 192.168.0.3ì´ê³ , PortëŠ” 1337ë²ˆì´ë‹¤.ê²°ê³¼ë¡œ ë‚˜ì˜¨ Encoding ê°’ì„ ë³´ë©´ eval í•¨ìˆ˜ì™€ String.fromCharCode í•¨ìˆ˜ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. String.fromCharCodeí•¨ìˆ˜ëŠ” ìˆ«ìë¥¼ ë¬¸ìë¡œ ë³€í™˜í•´ì£¼ê³ , eval í•¨ìˆ˜ëŠ” ì¸ìë¡œ ë°›ì€ Javascript ì†ŒìŠ¤ì½”ë“œë¥¼ ë™ì ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¨ë‹¤.ì„œë²„ì—ì„œ ì‹¤í–‰ì‹œí‚¬ ê³µê²© ì½”ë“œë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ, ì„œë²„ì— ì „ë‹¬í•´ë³´ì. ì„œë²„ì˜ ë™ì‘ ê³¼ì •ì„ ë‹¤ì‹œ ë– ì˜¬ë ¤ë³´ë©´, ì„œë²„ëŠ” ë¨¼ì € ì‚¬ìš©ìì˜ ì ‘ì† ìš”ì²­ì— ë‹´ê¸´ ì¿ í‚¤ ì •ë³´ ì¤‘ profileì— ë‹´ê¸´ ë°ì´í„°ë¥¼ base64ë¡œ ë””ì½”ë“œ í•œë‹¤. ê·¸ë¦¬ê³  ì´ ê°’ì„ unserialize í•œë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ê³µê²© ì½”ë“œë¥¼ base64ë¡œ ì¸ì½”ë”©í•´ì„œ ì „ë‹¬í•´ì•¼ í•œë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼, ê³µê²© ì½”ë“œë¥¼ IIFE í•¨ìˆ˜ë¡œ ì„ ì–¸í•´ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ Result #2ì™€ ê°™ì´ ì „ë‹¬ê³¼ ë™ì‹œì— ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤.Burp Suiteì˜ Decoder íƒ­ìœ¼ë¡œ ì´ë™í•´ì„œ ì•ì„œ ë§Œë“  ê³µê²© ì½”ë“œì— ê´„í˜¸ë¥¼ ì¶”ê°€í•´ base64 ì¸ì½”ë”©ëœ í˜ì´ë¡œë“œ(Payload)ë¥¼ ë§Œë“¤ì–´ë³´ì. ê·¸ë¦¬ê³  ì¿ í‚¤ í—¤ë”ì— ì¸ì½”ë”©ëœ ê³µê²© ì½”ë“œë¥¼ ë‹´ì•„ ì›¹ì„œë²„ë¡œ ë³´ë‚¸ë‹¤.ì•„ë˜ì™€ ê°™ì´ ê³µê²©ì„ ì‹œë„í•˜ë©´ ê³µê²©ìê°€ ì—´ì–´ ë†“ì€ 1337ë²ˆ í¬íŠ¸ì— ì„œë²„ì˜ ì‰˜ì´ ì—°ê²°ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.ì„±ê³µì ìœ¼ë¡œ ì„œë²„ì˜ ì‰˜ê³¼ ë£¨íŠ¸(root) ê¶Œí•œì„ íšë“í–ˆë‹¤.ë³´í†µ Serialize ë²„ê·¸ë¡œ ì¸í•œ ì·¨ì•½ì ì€ JAVA ì—ì„œ ë§ì´ ë°œê²¬ë˜ëŠ”ë°, Node.jsì—ì„œ ë°œê²¬ëœ ê²ƒì€ ì´ë¡€ì ì¸ ì¼ì´ì—ˆë‹¤. CVE-2017-5941ë¡œ ì°¾ì„ ìˆ˜ ìˆëŠ” ì´ ê³µê²©ì€ node-serialize 0.0.4 ë²„ì „ì—ì„œ ë°œìƒí–ˆìœ¼ë©°, ì•„ì§ íŒ¨ì¹˜ë˜ì§€ ì•Šì€ ìƒíƒœë‹¤.Node.jsë¡œ ì„œë²„ë¥¼ êµ¬í˜„í•  ë•Œ ì´ ëª¨ë“ˆì„ ì‚¬ìš©í•œ serialize / unserialize ëŠ” ì§€ì–‘í•´ì•¼ í•œë‹¤. Serialize-to-js ëª¨ë“ˆì—ì„œë„ ë¹„ìŠ·í•œ ë²„ê·¸(CVE-2017-5954)ê°€ ìˆëŠ” ê²ƒìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆë‹¤.PDF ë‹¤ìš´ë¡œë“œ  1 ì„œë²„ ì‹œìŠ¤í…œì— ëŒ€í•´ ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì ì—ì„œ PaaSì™€ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ”ë°, PaaSëŠ” ì„œë¹„ìŠ¤ê°€ 24ì‹œê°„ ë™ì‘í•˜ëŠ” ë°˜ë©´, FaaSëŠ” íŠ¹ì • ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œì—ë§Œ ì‹¤í–‰ë˜ë©°, ì‘ì—…ì„ ë§ˆì¹˜ë©´ ì¢…ë£Œë˜ëŠ” ì°¨ì´ì ì´ ìˆë‹¤.  2 Shell(ì‰˜) : ì„œë²„ë‚˜ íœ´ëŒ€í°ê°™ì€ ì¥ì¹˜ì—ì„œ ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í”„ë¡œê·¸ë¨.Reverse Shell(ì—­ë°©í–¥ ì‰˜) : ê³µê²©ìê°€ íŠ¹ì • í¬íŠ¸ë¥¼ ì—´ì–´ë‘ë©´ ê³µê²© ëŒ€ìƒì€ ê³µê²©ìì—ê²Œ ì ‘ì†í•´ ì‰˜ì„ ì œê³µ."
  },
  
  {
    "title": "Make user certificates available on Android 7.0",
    "url": "/posts/UserCertOnAndroid/",
    "categories": "Security, Mobile",
    "tags": "android",
    "date": "2018-05-08 00:00:00 +0900",
    





    
    "snippet": "2016ë…„ 8ì›” ì•ˆë“œë¡œì´ë“œ 7.0 ëˆ„ê°€(Nougat) ë²„ì „ì´ ë°°í¬ë˜ì—ˆë‹¤. ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ë³´í˜¸ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆê³ , APK ì„œëª… ìŠ¤í‚´(Scheme) v2ê°€ ì¶”ê°€ë˜ì—ˆë‹¤. ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ë³´ì•ˆì„ ìœ„í•´ ì‚¬ìš©ìê°€ ì§ì ‘ ì„¤ì¹˜í•œ ì¸ì¦ì„œëŠ” ë” ì´ìƒ ì‹ ë¢°í•˜ì§€ ì•ŠëŠ”ë‹¤. API ë ˆë²¨ì´ 24 ì´ìƒì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° í•´ë‹¹ëœë‹¤.ì•± ë³´ì•ˆì„ ìœ„í•œ ê°œì„ ì‚¬í•­ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆê² ì§€ë§Œ, ...",
    "content": "2016ë…„ 8ì›” ì•ˆë“œë¡œì´ë“œ 7.0 ëˆ„ê°€(Nougat) ë²„ì „ì´ ë°°í¬ë˜ì—ˆë‹¤. ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ë³´í˜¸ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆê³ , APK ì„œëª… ìŠ¤í‚´(Scheme) v2ê°€ ì¶”ê°€ë˜ì—ˆë‹¤. ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ë³´ì•ˆì„ ìœ„í•´ ì‚¬ìš©ìê°€ ì§ì ‘ ì„¤ì¹˜í•œ ì¸ì¦ì„œëŠ” ë” ì´ìƒ ì‹ ë¢°í•˜ì§€ ì•ŠëŠ”ë‹¤. API ë ˆë²¨ì´ 24 ì´ìƒì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° í•´ë‹¹ëœë‹¤.ì•± ë³´ì•ˆì„ ìœ„í•œ ê°œì„ ì‚¬í•­ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆê² ì§€ë§Œ, ëª¨ë°”ì¼ ì•± ì·¨ì•½ì  ì ê²€ì„ ìœ„í•´ Burp Suite ê°™ì€ í”„ë¡ì‹œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ìƒí™©ì—ì„  ë¬¸ì œê°€ ëœë‹¤. HTTPS í†µì‹ ì„ ë¶„ì„í•˜ê¸° ìœ„í•´ Burp Suiteì˜ ì¸ì¦ì„œ(ì‚¬ìš©ì ì¸ì¦ì„œ)ë¥¼ íœ´ëŒ€í°ì— ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë°, ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.ì§€ë‚œ 3ì›” ì—ìŠ¤ì›ì—ì„œ ë§Œë“  ëª¨ë°”ì¼ ë°©ë¬¸ê° ì•±ì˜ ê²½ìš°ì—ë„ ì´ì™€ ê°™ì€ ë¬¸ì œë¡œ ìµœì‹  ì•ˆë“œë¡œì´ë“œ íœ´ëŒ€í°(ë²„ì „ 7.0 ì´ìƒ)ì—ì„œëŠ” í†µì‹  ë‚´ìš©ì„ ì‚´í´ë³¼ ìˆ˜ ì—†ì—ˆë‹¤. íœ´ëŒ€í°ì„ ë£¨íŒ…(rooting)í•œ ê²½ìš° ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆê² ì§€ë§Œ, ë£¨íŒ…ì´ ì–´ë ¤ìš´ ìƒíƒœì—ì„œ ì´ ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ì.Network Configì•ˆë“œë¡œì´ë“œ API 24 ì´ìƒ ë²„ì „ë¶€í„° ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì´ ë³€ê²½ë˜ì—ˆë‹¤.ì•±ì´ ë™ì‘í•  ë•Œ ì‚¬ìš©ì(user) ì¸ì¦ì„œëŠ” ë” ì´ìƒ ì‹ ë¢°í•˜ëŠ” ëŒ€ìƒì— í¬í•¨ë˜ì–´ ìˆì§€ ì•Šë‹¤. ì‚¬ìš©ì ì¸ì¦ì„œë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ê¸°ë³¸ì ì¸ ì•„ì´ë””ì–´ëŠ” API 23 ë²„ì „ê¹Œì§€ ì‚¬ìš©í•˜ë˜ ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ë‹¤. ì•ˆë“œë¡œì´ë“œ ê°œë°œì ì‚¬ì´íŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ì•±ì„ ë³€ì¡°í•´ë³´ì.Decompileapktoolì„ ì´ìš©í•´ ëŒ€ìƒ APKíŒŒì¼ì„ ë””ì»´íŒŒì¼í•œë‹¤. AndroidManifest.xmlê³¼ SmaliíŒŒì¼ë“¤ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.apktool.bat d &lt;apk file&gt; -o &lt;directory of decompiled files&gt;Modify AndroidManifest.xmlì•±ì´ ë„¤íŠ¸ì›Œí¬ ì„¤ì • ì •ë³´ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ networkSecurityConfig ì†ì„± ì„¤ì •Add res/xml/network_security_config.xmlAndroidManifest.xmlì— @xml/network_security_configë¡œ ê°’ì„ ì§€ì •í–ˆë‹¤. xml í´ë”ì˜ network_security_config.xml íŒŒì¼ì„ ì°¸ì¡°í•˜ë¼ëŠ” ì˜ë¯¸ë‹¤. ë”°ë¼ì„œ ì´ ë„¤íŠ¸ì›Œí¬ ì„¤ì • íŒŒì¼ì„ ì•±ì´ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ xmlíŒŒì¼ì„ ì˜¤ë¥¸ìª½ ê·¸ë¦¼ê³¼ ê°™ì´ ìƒì„±í•´ì¤€ë‹¤.AndroidManifest íŒŒì¼ì— ì§ì ‘ ì„¤ì • íŒŒì¼ëª…ì„ ì ì–´ì£¼ì§€ ì•Šê³  annotationìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ì´ìœ ëŠ” ì•±ì´ ë¹Œë“œë˜ëŠ” ê³¼ì •ì—ì„œ, R.smali íŒŒì¼ì´ annotationì„ í†µí•´ í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ë§¤í•‘í•˜ê¸° ë•Œë¬¸ì´ë‹¤.Put R$xml into R.smaliì•±ì´ ì°¸ì¡°í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ëª©ë¡ì€ ë‹¤ìŒê³¼ ê°™ì´ R.smali íŒŒì¼ì— annotationsë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤. ì—¬ê¸°ì— ì•ì„œ ìƒì„±í•œnetwork_security_config.xml íŒŒì¼ê³¼ ì´ íŒŒì¼ì´ ë“¤ì–´ ìˆëŠ” xml í´ë”ë¥¼ í¬í•¨ì‹œí‚¤ê¸° ìœ„í•´ annotations ì— R$xmlì„ ì¶”ê°€í•´ì¤€ë‹¤.R.smaliëŠ” R$ë¡œ ì‹œì‘í•˜ëŠ” smali íŒŒì¼ë“¤ì˜ ë¶€ëª¨ íŒŒì¼ì´ë‹¤. R$xmlì€ R$xml.smali íŒŒì¼ì„ ì°¸ì¡°í•˜ê² ë‹¤ëŠ” ì„ ì–¸ìœ¼ë¡œ ì´í•´í•˜ë©´ ëœë‹¤.Create R$xml.smaliì´ì œ R.smali íŒŒì¼ì€ R$xml.smaliì„ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.í•˜ì§€ë§Œ R$xml.smali íŒŒì¼ì€ ì•„ì§ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì§ì ‘ ë§Œë“¤ì–´ì¤˜ì•¼ í•˜ëŠ”ë°, íŒŒì¼ì„ ì‰½ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ë‹¤ë¥¸ ì„ì˜ì˜ íŒŒì¼(R$*.xml)ì„ ì•„ë˜ ê²½ë¡œì— ë³µì‚¬í•´ ë§Œë“¤ì–´ì¤€ë‹¤.(ì•„ë˜ ì˜ˆì‹œì—ì„œëŠ” R$anim.xmlì„ ë³µì‚¬) ê·¸ë¦¬ê³  ë³µì‚¬í•œ íŒŒì¼ì„ R$xml.smalië¡œ ì •ì˜í•˜ê¸° ìœ„í•´ ì•„ë˜ ë¶‰ì€ìƒ‰ ìƒìì²˜ëŸ¼ ë‚´ìš©ì„ ë°”ê¾¸ì–´ì£¼ë©´ ëœë‹¤.Modify R$xml.smali#static fieldsì— network_security_configì˜ ì£¼ì†Œë¥¼ í• ë‹¹í•´ì¤€ë‹¤. network_security_configë¼ëŠ” ë¦¬ì†ŒìŠ¤ê°€ 0x7f0d0000 ìœ„ì¹˜ì— í• ë‹¹ëœë‹¤ëŠ” ì˜ë¯¸ë‹¤. ì´ ì£¼ì†ŒëŠ” ë‹¤ë¥¸ smali íŒŒì¼ì„ ì°¸ê³ í•´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì£¼ì†Œë¡œ ì •í•´ì¤€ë‹¤.Rebuild APK and Installapktoolì„ ì´ìš©í•´ì„œ ì¬ë¹Œë“œí•˜ê³  sign ê³¼ì •ì„ ê±°ì¹˜ë©´ ì™„ë£Œëœë‹¤.(ì„¤ëª… ìƒëµ) ìƒˆë¡­ê²Œ ë¹Œë“œí•œ ì•±(APK)ì„ ì„¤ì¹˜í•˜ê³  Burp suite ê°™ì€ í”„ë¡ì‹œ ë„êµ¬ë¥¼ ì´ìš©í•´ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ í™•ì¸í•´ë³´ë©´ ê¸°ì¡´ê³¼ ê°™ì´ ì˜ ë¶„ì„ì´ ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.Obfuscation, ë‚œë…í™”ëª¨ë°”ì¼ ì•±ì˜ ë³€ì¡°ë‚˜ ë¶„ì„ì„ ë§‰ê¸° ìœ„í•´ ë‚œë…í™” ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì•±ì´ ëŠ˜ê³  ìˆë‹¤. ë‚œë…í™” ì†”ë£¨ì…˜ì´ ì ìš©ëœ ëª¨ë°”ì¼ ì•±ì˜ ê²½ìš° apktoolì„ ì´ìš©í•œ ë””ì»´íŒŒì¼(decompile) ì‹œ ë¶„ì„ì´ë‚˜ ë³€ì¡°ê°€ ë¶ˆê°€ëŠ¥í•˜ê²Œ ë³´ì¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ì•ì— ì†Œê°œí•œ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì ìš©í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤. í˜„ì¬ ì‚¼ì„±ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë°©ì‹ìœ¼ë¡œ ë‚œë…í™”ëœ ì•±(e.g. ì—ìŠ¤ì› ëª¨ë°”ì¼ ë°©ë¬¸ê° ì•±)ì„ ë¶„ì„í•´ë³´ë©´ R.smali íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤. ì´ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰í•˜ë©´ ëœë‹¤. ì•ì˜ ë‚´ìš©ê³¼ ë‹¤ë¥¸ ë¶€ë¶„ë§Œ ì„¤ëª…í•œë‹¤.Put R$xml into App.smalië‚œë…í™” ì†”ë£¨ì…˜ì´ ì ìš©ëœ ì•±ì€ R.smali íŒŒì¼ ëŒ€ì‹  App.smali íŒŒì¼ì´ ì¡´ì¬í•œë‹¤. ì´ë¦„ë§Œ ë°”ë€Œì—ˆì„ ë¿ ë‚´ìš©ì€ ê°™ê¸° ë•Œë¬¸ì— ì•ì—ì„œ í–ˆë˜ ë°©ë²•ê³¼ ë™ì¼í•˜ê²Œ R$xmlì„ annotationsì— ì¶”ê°€í•œë‹¤. (xml í–‰ì„ ì¶”ê°€í•˜ë©´ì„œ ì•ì˜ í•­ëª©ì¸ MsgHandler ë’¤ì— ì‰¼í‘œ(,)ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ìŠìœ¼ë©´ ì•ˆëœë‹¤.)Modify R$xml.smali#static fieldsì— network_security_configì˜ ì£¼ì†Œë¥¼ í• ë‹¹ í•´ì¤€ë‹¤. ë‹¤ë¥¸ ì ì€ ë³„ë„ì˜ ì£¼ì†Œë¥¼ í• ë‹¹í•´ì£¼ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì ì´ë‹¤. ì´ ë‚´ìš©ì—ì„œ ê°•ì¡°í•˜ê³ ì í•˜ëŠ” ì ì€ ë³„ë„ì˜ ë£¨íŒ…(rooting) ì—†ì´ ì•ˆë“œë¡œì´ë“œ API 24 ë²„ì „ì˜ ì¸ì¦ì„œ ê´€ë ¨ ë³´ì•ˆ ê¸°ëŠ¥ì„ ìš°íšŒí•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ì•ˆë“œë¡œì´ë“œ ìš´ì˜ì²´ì œì˜ ë£¨íŒ…ì´ ì–´ë ¤ì›Œì§€ê³  ìˆëŠ” ì‹œì ì— ëª¨ë°”ì¼ ì•± ë³´ì•ˆì ê²€ì„ ìœ„í•´ í•„ìš”í•œ ê¸°ìˆ ì´ë¼ í•  ìˆ˜ ìˆë‹¤.PDF ë‹¤ìš´ë¡œë“œThanks to Hailey@Kakao"
  },
  
  {
    "title": "Smart Contract Vulnerabilities Basic 2",
    "url": "/posts/SmartContractVulnerabilitiesBasic2/",
    "categories": "Security, Blockchain",
    "tags": "blockchain, ethereum, smartcontract",
    "date": "2018-04-09 00:00:00 +0900",
    





    
    "snippet": "5. Forcing ether to a contractì†”ë¦¬ë””í‹°(Solidity)ì˜ selfdestruct í•¨ìˆ˜ëŠ” ë‘ ê°€ì§€ ì‘ì—…ì„ í•œë‹¤. ì»¨íŠ¸ë™íŠ¸(Contract)ì— í•´ë‹¹í•˜ëŠ” ì£¼ì†Œì˜ ë°”ì´íŠ¸ ì½”ë“œë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì‚­ì œí•˜ì—¬ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê³ , ì»¨íŠ¸ë™íŠ¸ì˜ ëª¨ë“  ìê¸ˆì€ ì§€ì •ëœ ì£¼ì†Œë¡œ ë³´ë‚´ì¤€ë‹¤. ì¦‰, ë¸”ë¡ì²´ì¸ì—ì„œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì½”ë“œë¥¼ ì œê±°í•˜ëŠ” í•¨ìˆ˜ë‹¤. í•˜ì§€ë§Œ...",
    "content": "5. Forcing ether to a contractì†”ë¦¬ë””í‹°(Solidity)ì˜ selfdestruct í•¨ìˆ˜ëŠ” ë‘ ê°€ì§€ ì‘ì—…ì„ í•œë‹¤. ì»¨íŠ¸ë™íŠ¸(Contract)ì— í•´ë‹¹í•˜ëŠ” ì£¼ì†Œì˜ ë°”ì´íŠ¸ ì½”ë“œë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì‚­ì œí•˜ì—¬ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê³ , ì»¨íŠ¸ë™íŠ¸ì˜ ëª¨ë“  ìê¸ˆì€ ì§€ì •ëœ ì£¼ì†Œë¡œ ë³´ë‚´ì¤€ë‹¤. ì¦‰, ë¸”ë¡ì²´ì¸ì—ì„œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì½”ë“œë¥¼ ì œê±°í•˜ëŠ” í•¨ìˆ˜ë‹¤. í•˜ì§€ë§Œ íŠ¹ë³„í•œ ê²½ìš°ê°€ ìˆë‹¤. ì§€ì •ëœ ì£¼ì†Œê°€ ì»¨íŠ¸ë™íŠ¸ë¼ë©´, í•´ë‹¹ ì»¨íŠ¸ë™íŠ¸ì˜ fallbackí•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.Fallback Functionì†”ë¦¬ë””í‹°ì—ì„œ ì»¨íŠ¸ë™íŠ¸ëŠ” ì¸ì(arguments), ë¦¬í„´(return) ê·¸ë¦¬ê³  ì´ë¦„ì´ ì—†ëŠ” í•¨ìˆ˜ë¥¼ í•˜ë‚˜ ê°€ì§€ê³  ìˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ì–´ë–¤ ë°ì´í„°ë‚˜ í•¨ìˆ˜ í˜¸ì¶œ ì—†ì´ ì»¨íŠ¸ë™íŠ¸ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ì‹¤í–‰ëœë‹¤. ê·¸ë¦¬ê³  ì´ í•¨ìˆ˜ê°€ payable ì¸ ê²½ìš° ì»¨íŠ¸ë™íŠ¸ëŠ” ì´ë”(Ether)ë¥¼ ë°›ì„ ìˆ˜ ìˆê³ , ì»¨íŠ¸ë™íŠ¸ì— ì´ë”ë¥¼ ë³´ë‚¼ ê²½ìš°ì— ì´ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤. ì´ í•¨ìˆ˜ë¥¼ Fallback Function(í•¨ìˆ˜)ì´ë¼ê³  ë¶€ë¥¸ë‹¤.ì»¨íŠ¸ë™íŠ¸ì˜ í•¨ìˆ˜ê°€ í•´ë‹¹ ì»¨íŠ¸ë™íŠ¸ì˜ ì”ì•¡ì´ ì¼ì • ê¸ˆì•¡ ì´ìƒì¸ì§€ ì´í•˜ì¸ì§€ í™•ì¸í•˜ëŠ” ì¡°ê±´ë¬¸ì´ ìˆë‹¤ë©´, ê·¸ ì¡°ê±´ë¬¸ì€ ì ì¬ì ìœ¼ë¡œ ìš°íšŒë  ìˆ˜ ìˆë‹¤.ì˜¤ë¥¸ìª½ ì½”ë“œë¥¼ ë³´ì. Fallback í•¨ìˆ˜ì— ìˆëŠ” revert1í•¨ìˆ˜ë¡œ ì¸í•´, ì´ ì»¨íŠ¸ë™íŠ¸ëŠ” ì´ë”(Ether)ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ì—†ë‹¤. í•˜ì§€ë§Œ, ì´ ì»¨íŠ¸ë™íŠ¸ë¥¼ ëŒ€ìƒìœ¼ë¡œ selfdestruct í•œë‹¤ë©´, fallback í•¨ìˆ˜ëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. ê²°ê³¼ì ìœ¼ë¡œ, ì”ì•¡ì€ 0ë³´ë‹¤ í° ìƒíƒœê°€ ë  ìˆ˜ ìˆê³ , ê³µê²©ìëŠ” onlyNonZeroBalance í•¨ìˆ˜ì˜ require ë¬¸ì„ ìš°íšŒí•  ìˆ˜ ìˆê²Œ ëœë‹¤.Mitigationì»¨íŠ¸ë™íŠ¸ì˜ ì”ê³ ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì„ ë³´í˜¸ ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.6. Call to the Unknown, Dos with Unexpected revertì´ ì·¨ì•½ì ì€ King of the Ether ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì—ì„œ ë°œê²¬ë˜ì—ˆë‹¤.ê³µê²©ìëŠ” ì•ˆì „í•˜ì§€ ì•Šì€ ì»¨íŠ¸ë™íŠ¸ì— ì¶©ë¶„í•œ ì–‘ì˜ ì´ë”(Ether)ë¥¼ ë³´ë‚´ ìì‹ ì´ ë¦¬ë”ì„ì„ ì£¼ì¥í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ, ë¦¬ë”ì„ì„ ì£¼ì¥í•˜ë ¤ê³  í•˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì˜ íŠ¸ëœì ì…˜ì€ ê³µê²©ìì˜ ì»¨íŠ¸ë™íŠ¸ì— ìˆëŠ” revert í•¨ìˆ˜ì— ì˜í•´ ì·¨ì†Œë  ìˆ˜ ìˆë‹¤.ë‹¨ìˆœí•œ ê³µê²©ì´ê¸´ í•˜ì§€ë§Œ, ì´ ë•Œë¬¸ì— ì»¨íŠ¸ë™íŠ¸ì—” ì˜êµ¬ì ì¸ ì„œë¹„ìŠ¤ ê±°ë¶€(Denial of Service)ê°€ ë°œìƒí•˜ì—¬ ì“¸ëª¨ì—†ê²Œ ëœë‹¤. í°ì§€ ì‚¬ê¸° ì»¨íŠ¸ë™íŠ¸(ponzi scheme contracts) ì—ì„œ ë™ì¼í•œ íŒ¨í„´ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤.7. Short Address Attackì´ ê³µê²©ì€ GolemíŒ€ì— ì˜í•´ ë°œê²¬ë˜ì—ˆê³  ë‹¤ìŒ ê¸°ì‚¬ì— ì˜ ì†Œê°œë˜ì–´ ìˆë‹¤. ì´ ì·¨ì•½ì ìœ¼ë¡œ ê³µê²©ìëŠ” transfer ê¸°ëŠ¥ì„ ì•…ìš©í•˜ì—¬ í—ˆìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë§ì€ ì–‘ì˜ ERC20 í† í°ì„ ì¶œê¸ˆí•  ìˆ˜ ìˆë‹¤.ì´ ë²„ê·¸ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ë¨¼ì € 10000ê°œì˜ í† í°ì´ ë“¤ì–´ìˆëŠ” ì§€ê°‘ì„ ê°€ì§€ê³  ìˆëŠ” ê±°ë˜ì†Œì™€ ì´ ê±°ë˜ì†Œì˜ ì§€ê°‘ì— 32ê°œì˜ í† í°ì„ ê°€ì§€ê³  ìˆëŠ” ì‚¬ìš©ìê°€ ìˆë‹¤ê³  ìƒê°í•´ë³´ì. ê·¸ë¦¬ê³  ì‚¬ìš©ìì˜ ì£¼ì†ŒëŠ” 0x12345600(ì£¼ì†Œì˜ ëìë¦¬ê°€ 0ìœ¼ë¡œ ëë‚œë‹¤.)ì´ë¼ê³  ê°€ì •í•´ë³´ì.ì‚¬ìš©ì(ì´í•˜ ê³µê²©ì)ëŠ” ì”ê³ ì— ìˆëŠ” í† í°ì˜ ì–‘ë³´ë‹¤ ë” ë§ì€ ì–‘ì˜ í† í°ì„ ì¶œê¸ˆí•˜ë ¤ê³  í•œë‹¤. ê³µê²©ìëŠ” ê±°ë˜ì†Œì— ê°€ì„œ í† í° ì¶œê¸ˆ ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤. ê·¸ë¦¬ê³  ê³µê²©ìì˜ ì£¼ì†Œì—ì„œ 0ì„ ì œì™¸í•œ ê°’ì„ ì…ë ¥í•œë‹¤. (ê³µê²©ìì˜ ì£¼ì†Œ ê¸¸ì´ê°€ ì˜ëª»ë˜ì—ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ê±°ë˜ì†ŒëŠ” ì…ë ¥ê°’ ê²€ì¦ì„ í•˜ì§€ ì•Šê³  ê±°ë˜ë¥¼ ì§„í–‰ì‹œí‚¨ë‹¤.)ê·¸ëŸ° ë‹¤ìŒ, EVMì€ í•¨ìˆ˜ì˜ ì„œëª…ê³¼ ì¸ìë¡œ ì‹¤í–‰ë˜ëŠ” íŠ¸ëœì ì…˜ì˜ ì…ë ¥ê°’ì„ ê³„ì‚°í•œë‹¤.ERC20ì˜ transfer í•¨ìˆ˜ëŠ” transfer(address to, uint256 amount)ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰ëœë‹¤.The vulnerabilityìì„¸íˆ ì‚´í´ë³´ë©´, íŠ¸ëœì ì…˜ì˜ ê¸¸ì´ê°€ 2ë°”ì´íŠ¸ ë” ì§§ë‹¤. ì´ëŸ° ê²½ìš° EVMì€ íŠ¸ëœì ì…˜ì˜ ë§ˆì§€ë§‰ì— 0ì„ ì±„ì›Œì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•œë‹¤.ì´ë ‡ê²Œ í•˜ë©´ ê±°ë˜ì†Œì— 32ê°œì˜ í† í°ë§Œ ê°€ì§€ê³  ìˆëŠ” ê³µê²©ìëŠ” í›¨ì”¬ ë” ë§ì€ ì–‘ì˜ í† í°(8192ê°œ)ì„ ì™„ë²½í•˜ê²Œ ì •ìƒì ì¸ íŠ¸ëœì ì…˜ìœ¼ë¡œ ë§Œë“¤ì–´ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ì´ ê³µê²©ì€ ë³´ë‚´ëŠ” ì‚¬ëŒì˜ ê³„ì¢Œ(ê±°ë˜ì†Œì˜ ì§€ê°‘ ê³„ì¢Œ)ì— ì¶©ë¶„í•œ ì–‘ì˜ í† í°ì´ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì— ê¸°ì´ˆí•œë‹¤.Mitigation  msg.dataì˜ í¬ê¸°ê°€ ì˜ëª»ë˜ì—ˆë‹¤ë©´ ì˜ˆì™¸ì²˜ë¦¬  ê±°ë˜ì†ŒëŠ” ë°˜ë“œì‹œ ì…ë ¥ê°’ ê²€ì¦í•œë‹¤PLUS, CVE DetailsCVE Detailsì—ì„œ ì´ë”ë¦¬ì›€ ê´€ë ¨ ì·¨ì•½ì ì„ ê²€ìƒ‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì˜¨ë‹¤.ëª¨ë‘ 2018ë…„ 1ì›” CVEë¡œ ë“±ë¡ë˜ì—ˆê³ , 4ì›” 1ì¼ ê¸°ì¤€ìœ¼ë¡œ ì¼ê³±ê°œì˜ ê¶Œí•œ ìš°íšŒ(Authentication Bypass)ì™€ ë‘ê°œì˜ DoS ì·¨ì•½ì ì´ ìˆë‹¤. ì•ì„œ ì„¤ëª…í•œ ì·¨ì•½ì ë“¤ê³¼ ì¡°ê¸ˆ ë‹¤ë¥¸ ë‚´ìš©ì´ì§€ë§Œ, ìš”ì•½í•˜ìë©´ cpp-ethereumì˜ JSON-RPCë¥¼ ì§€ì›í•˜ëŠ” ëª‡ê°€ì§€ APIì— ê³µê²© ê°€ëŠ¥í•œ ê¶Œí•œ ê´€ë ¨ ì·¨ì•½ì ì´ ìˆì—ˆë‹¤.ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ê°€ ì—†ê±°ë‚˜ ì˜ë¯¸ë¥¼ ê°–ê¸° í˜ë“  ì»¨ì†Œí‹°ì›€(Consortium) ë¸”ë¡ì²´ì¸ì´ë‚˜ í”„ë¼ì´ë¹—(Private) ë¸”ë¡ì²´ì¸(i.e. NexLedger) ëª¨ì˜í•´í‚¹ ì‹œ JSON-RPCëŠ” ìœ ì‹¬íˆ ì‚´í´ë´ì•¼ í•  ë¶€ë¶„ì´ ë  ê²ƒìœ¼ë¡œ ìƒê°ëœë‹¤. ì˜ ê¸°ì–µí•´ë‘ì.  1 ê³µì»¨íŠ¸ë™íŠ¸ì˜ ëª¨ë“  ìƒíƒœ ë³€í™”ë¥¼ ë˜ëŒë¦°ë‹¤. ê·¸ë¦¬ê³  í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì‚¬ëŒ(Caller)ì—ê²Œ ì´ë”(Ether)ë¥¼ ë˜ëŒë ¤ ì¤€ë‹¤."
  },
  
  {
    "title": "Smart Contract Vulnerabilities Basic 1",
    "url": "/posts/SmartContractVulnerabilitiesBasic1/",
    "categories": "Security, Blockchain",
    "tags": "blockchain, ethereum, smartcontract",
    "date": "2018-04-02 00:00:00 +0900",
    





    
    "snippet": "ë¸”ë¡ì²´ì¸ ê¸°ìˆ ì„ ì´ìš©í•œ ì‹œìŠ¤í…œì´ í™œë°œí•˜ê²Œ ë§Œë“¤ì–´ì§€ê³  ìˆë‹¤. ìì—°ìŠ¤ëŸ½ê²Œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸(Smart Contract)ì˜ ìˆ˜ìš”ê°€ ëŠ˜ì–´ë‚˜ê³  ìˆê³ , í˜„ì¬ê¹Œì§€ëŠ” ì´ë”ë¦¬ì›€(Ethereum)ì„ ì´ìš©í•˜ëŠ” ê²½ìš°ê°€ ê°€ì¥ ë§ì•„ë³´ì¸ë‹¤. ë„¥ìŠ¤ë ˆì €(NexLedger)ë„ ì´ë”ë¦¬ì›€ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ê³  ìˆë‹¤. ë„¥ìŠ¤ë ˆì € í˜¹ì€ ë‹¤ë¥¸ ì´ë¦„ì˜ ë¸”ë¡ì²´ì¸ ì·¨ì•½ì  ì ê²€ì„ ìœ„í•´ ì´ë”ë¦¬ì›€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™...",
    "content": "ë¸”ë¡ì²´ì¸ ê¸°ìˆ ì„ ì´ìš©í•œ ì‹œìŠ¤í…œì´ í™œë°œí•˜ê²Œ ë§Œë“¤ì–´ì§€ê³  ìˆë‹¤. ìì—°ìŠ¤ëŸ½ê²Œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸(Smart Contract)ì˜ ìˆ˜ìš”ê°€ ëŠ˜ì–´ë‚˜ê³  ìˆê³ , í˜„ì¬ê¹Œì§€ëŠ” ì´ë”ë¦¬ì›€(Ethereum)ì„ ì´ìš©í•˜ëŠ” ê²½ìš°ê°€ ê°€ì¥ ë§ì•„ë³´ì¸ë‹¤. ë„¥ìŠ¤ë ˆì €(NexLedger)ë„ ì´ë”ë¦¬ì›€ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ê³  ìˆë‹¤. ë„¥ìŠ¤ë ˆì € í˜¹ì€ ë‹¤ë¥¸ ì´ë¦„ì˜ ë¸”ë¡ì²´ì¸ ì·¨ì•½ì  ì ê²€ì„ ìœ„í•´ ì´ë”ë¦¬ì›€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì˜ ê¸°ë³¸ì ì¸ ì·¨ì•½ì ê³¼ ëŒ€ì‘ë°©ë²•ì„ ì•Œì•„ë³´ì.ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì‘ì„±í•  ë•Œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì†”ë¦¬ë””í‹°ì˜ ëŒ€í‘œì ì¸ ì·¨ì•½ì  7ê°€ì§€ì™€ ëŒ€ì‘ ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì.1. Overflow and Underflowì˜¤ë²„í”Œë¡œìš°(Overflow)ëŠ” ì‚¬ì „ì ì¸ ì˜ë¯¸ë¡œ ë„˜ì³ íë¥¸ë‹¤ëŠ” ëœ»ì„ ê°€ì§„ë‹¤. ì˜¤ë²„í”Œë¡œìš°ì˜ ì¢…ë¥˜ì—” ì—¬ëŸ¬ê°€ì§€ê°€ ìˆëŠ”ë°, ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ì •ìˆ˜ ì˜¤ë²„í”Œë¡œìš°(Integer Overflow)ë¡œ ì˜ˆë¥¼ ë“¤ìë©´, ì •ìˆ˜í˜• ë³€ìˆ˜ê°€ ë‹´ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€ê°’ì„ ë„˜ì–´ ì¦ê°€í•  ë•Œ ë°œìƒí•œë‹¤. ì†”ë¦¬ë””í‹°ëŠ” 256ë¹„íŠ¸ ìˆ«ì(2256-1)ê¹Œì§€ ë‹¤ë£¨ê³  ìˆê³ , ìµœëŒ€ê°’ë³´ë‹¤ 1 ì¦ê°€í•œ ê°’ì€ 0ì´ ëœë‹¤.ì–¸ë”í”Œë¡œìš°(Underflow)ëŠ” ë°˜ëŒ€ë¡œ unsigned(ìì—°ìˆ˜ ë²”ìœ„) ë³€ìˆ˜ì˜ ê°’ì´ 0ë³´ë‹¤ ì‘ì•„ì§ˆ ë•Œ ë°œìƒí•˜ë©°, 0ë³´ë‹¤ ì‘ì•„ì§„ ë³€ìˆ˜ì˜ ê°’ì€ ë³€ìˆ˜ì˜ ìµœëŒ€ê°’ì„ ê°–ê²Œ ëœë‹¤. ë‘ ê°€ì§€ ëª¨ë‘ ìœ„í—˜í•˜ì§€ë§Œ ì–¸ë”í”Œë¡œìš°ê°€ ì¼ì–´ë‚  ê°€ëŠ¥ì„±ì´ ì¢€ ë” í¬ë‹¤.ì˜ˆë¥¼ ë“¤ì–´ í† í°(Token) 10ê°œë¥¼ ê°€ì§€ê³  ìˆëŠ” ì‚¬ìš©ì AëŠ” ì•…ì˜ì ìœ¼ë¡œ 11ê°œì˜ í† í°ì„ ì‚¬ìš©í•˜ë ¤ê³  í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ ì½”ë“œì—ì„œ ì´ ì·¨ì•½ì ì„ í™•ì¸í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ê³µê²©ìëŠ” ìì‹ ì´ ê°€ì§€ê³  ìˆëŠ” í† í°(10ê°œ)ë³´ë‹¤ ë” ë§ì€ í† í°ì„ ì†Œë¹„1í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ê³µê²©ìì˜ í† í°ì€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ìµœëŒ€í•œì˜ ê°œìˆ˜(2256-1)ë§Œí¼ ëŠ˜ì–´ë‚œë‹¤.Mitigationì§ì ‘ ì…ë ¥ê°’ ê²€ì¦(Validation)ì„ í•´ì£¼ë©´ ëœë‹¤. í•˜ì§€ë§Œ ìš”ì¦˜ì—” OpenZeppelinì˜  SafeMathë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤.2. Visibilityí•¨ìˆ˜ì˜ ê°€ì‹œì„±2(Visibility)ì— ëŒ€í•´ì„œ ëª¨ë¥´ëŠ” ì‚¬ëŒì€ ì—†ì„ ê²ƒì´ë‹¤. ì†”ë¦¬ë””í‹°ì—ë„ ë™ì¼í•œ ê°œë…ì´ ìˆë‹¤. ì·¨ì•½ì ê³¼ ê´€ë ¨ì´ ìˆëŠ” ì¤‘ìš”í•œ ì ‘ê·¼ ì œì–´ìë¥¼ ë¨¼ì € ì•Œì•„ë³´ì. Public í•¨ìˆ˜ëŠ” ì»¨íŠ¸ë™íŠ¸ ë‚´ë¶€ì˜ í•¨ìˆ˜, ìƒì†ëœ(inherited) ì»¨íŠ¸ë™íŠ¸ì˜ í•¨ìˆ˜ ë˜ëŠ” ì™¸ë¶€ ì‚¬ìš©ì ë“± ëˆ„êµ¬ë‚˜ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. External í•¨ìˆ˜ëŠ” ì™¸ë¶€ì—ì„œë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. ì»¨íŠ¸ë™íŠ¸ ë‚´ë¶€ì˜ ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ì€ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤. 2017ë…„ 7ì›” Visibility ì·¨ì•½ì ìœ¼ë¡œ ì¸í•œ Parity Wallet í•´í‚¹ìœ¼ë¡œ 3ì²œë§Œ ë‹¬ëŸ¬ ì†ì‹¤ì˜¤ë¥¸ìª½ì˜ ì½”ë“œë¥¼ ë³´ë©´ cannotBeCalled í•¨ìˆ˜ëŠ” External í•¨ìˆ˜ê³ , canBeCalledí•¨ìˆ˜ëŠ” Public í•¨ìˆ˜ë‹¤. cannotBeCalledí•¨ìˆ˜ëŠ” ì™¸ë¶€ ê°€ì‹œì„±(External Visibility)ë•Œë¬¸ì— ì»¨íŠ¸ë™íŠ¸ ë‚´ ë‹¤ë¥¸ í•¨ìˆ˜(testExternal)ì— ì˜í•´ í˜¸ì¶œë  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ì»´íŒŒì¼ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ cannotBeCalled í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ ì»¨íŠ¸ë™íŠ¸ì— ì˜í•´ í˜¸ì¶œë  ìˆ˜ ìˆë‹¤.Mitigationìš©ë„ì— ë§ì¶”ì–´ Public ëŒ€ì‹  Private í•¨ìˆ˜ì™€ Internal í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. Private í•¨ìˆ˜ëŠ”  ì˜¤ì§ ì»¨íŠ¸ë™íŠ¸ ë‚´ë¶€ì—ì„œë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. Internal í•¨ìˆ˜ëŠ” ì¡°ê¸ˆ ëœ ì œí•œì ì¸ë°, ë¶€ëª¨ë¡œë¶€í„° ìƒì†ëœ ì»¨íŠ¸ë™íŠ¸ëŠ” ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì™¸ë¶€ ì»¨íŠ¸ë™íŠ¸ì—ì„œ í˜¸ì¶œí•  ì¼ì´ ì—†ë‹¤ë©´, Private ë˜ëŠ” Internal í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.3. Delegatecallì†”ë¦¬ë””í‹°ëŠ” ë©”ì‹œì§€ í˜¸ì¶œ3(Message Call)ì„ í†µí•´ ì»¨íŠ¸ë™íŠ¸ë¥¼ ì œì–´í•œë‹¤. DelegatecallëŠ” ê·¸ ì¤‘ í•˜ë‚˜ë¡œ, ë‹¤ë¥¸ì ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ìˆëŠ” ì»¨íŠ¸ë™íŠ¸ì˜ ì»¨í…ìŠ¤íŠ¸(Context)ì—ì„œ ëŒ€ìƒ ì£¼ì†Œì˜ ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤ëŠ” ì ê³¼ msg.senderì™€ msg.valueì˜ ê°’ì´ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì´ë‹¤. ì»¨íŠ¸ë™íŠ¸ê°€ ëŸ°íƒ€ì„(runtime)ì— ë‹¤ë¥¸ ì£¼ì†Œì˜ ì½”ë“œë¥¼ ë™ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•œë‹¤. ìŠ¤í† ë¦¬ì§€, í˜„ì¬ ì£¼ì†Œ ê·¸ë¦¬ê³  ì”ì•¡ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì»¨íŠ¸ë™íŠ¸ì—ì„œ ê°€ì ¸ì˜¤ì§€ë§Œ, ì½”ë“œëŠ” í˜¸ì¶œë˜ê³  ìˆëŠ” ì£¼ì†Œì—ì„œ ê°€ì ¸ì˜¨ë‹¤.ì½”ë“œ ì¸ì ì…˜(Code Injection)ê³¼ ë¹„ìŠ·í•œ ê°œë…ì´ë¼ ìƒê°í•˜ë©´ ì¡°ê¸ˆ ì‰¬ìš¸ ìˆ˜ ìˆë‹¤.ë” ë‚˜ì€ ì´í•´ë¥¼ ìœ„í•´ ì§ì ‘ ì†”ë¦¬ë””í‹°ë¡œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ êµ¬í˜„í•´ë³´ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ë‹¤.DelegateCall í•¨ìˆ˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ êµ¬í˜„í•˜ê³  ì½”ë“œë¥¼ ëª¨ë“ˆí™”(modularization)í•˜ê¸° ìœ„í•œ ê²ƒì´ê¸° ë•Œë¬¸ì— ë§¤ìš° ìœ ìš©í•˜ë‹¤. í•˜ì§€ë§Œ ê·¼ë³¸ì ìœ¼ë¡œ, ëˆ„êµ¬ë‚˜ ì›í•˜ëŠ” ì½”ë“œë¥¼ ì»¨íŠ¸ë™íŠ¸ì—ì„œ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤.ë‹¤ìŒ ì½”ë“œë¥¼ ë³´ì. ê³µê²©ìëŠ” Delegate ì»¨íŠ¸ë™íŠ¸ì˜ í•¨ìˆ˜ pwnì„ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ”ë°, ì´ ì»¨íŠ¸ë™íŠ¸ëŠ” Delegation ì»¨íŠ¸ë™íŠ¸ì— ì†í•´ ìˆê¸° ë•Œë¬¸ì— ì´ ì»¨íŠ¸ë™íŠ¸ì˜ ì†Œìœ ê¶Œì„ ì£¼ì¥í•  ìˆ˜ ìˆë‹¤.Parity wallet í•´í‚¹ì€ ì•ˆì „í•˜ì§€ ì•Šì€ visibilityì™€ ë¹„ì •ìƒì ì¸ ë°ì´í„°ì— ëŒ€í•œ delegatecall ì´ ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆì—ˆë‹¤. Delegatecallë¡œ êµ¬í˜„ëœ ì·¨ì•½í•œ ì»¨íŠ¸ë™íŠ¸ì˜ í•¨ìˆ˜ì™€ ì†Œìœ ê¶Œì„ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ì»¨íŠ¸ë™íŠ¸ê°€ ê³µê°œë˜ì–´ ìˆì—ˆë‹¤. ê³µê²©ìëŠ” msg.data í•„ë“œë¥¼ ì‘ì„±í•´ ì·¨ì•½í•œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆì—ˆë‹¤.msg.data í•„ë“œì— í¬í•¨ë  ë‚´ìš©ì€ í˜¸ì¶œí•˜ê³ ì í•˜ëŠ” í•¨ìˆ˜ì˜ ì„œëª…ì´ë‹¤. ì—¬ê¸°ì„œ ì„œëª…ì€ í•¨ìˆ˜ í”„ë¡œí† íƒ€ì…ì˜ SHA3 í•´ì‹œ ê°’ì˜ ì²˜ìŒ 8 ë°”ì´íŠ¸ë¥¼ ì˜ë¯¸í•œë‹¤.4. Re-entrancy, DAO í•´í‚¹ì†”ë¦¬ë””í‹°ì˜ call í•¨ìˆ˜ëŠ” valueì™€ í•¨ê»˜ í˜¸ì¶œë  ë•Œ, _amount ë§Œí¼ msg.senderì—ê²Œ ì´ë”(Ether)ì™€ ê°€ìŠ¤4(gas)ë¥¼ ì „ë‹¬í•œë‹¤. ë‹¤ìŒ ì½”ë“œ ìŠ¤ë‹ˆí«(snippet)ì—ì„ , senderì˜ ì”ì•¡ì„ ì‹¤ì œë¡œ ì¤„ì´ê¸° ìœ„í•´ í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤.ê°„ë‹¨íˆ ë§í•˜ìë©´, ë‚´ê°€ ë‚´ ì€í–‰ ê³„ì¢Œì— ìˆëŠ” ëˆì˜ ì¶œê¸ˆì„ ìš”ì²­í•œ ìƒíƒœì—ì„œ, ì€í–‰ì›ì´ ë‚´ ê³„ì¢Œì˜ ì”ê³ ë¥¼ ì¤„ì´ê¸° ì „ì— ë‹¤ì‹œ ì¶œê¸ˆ ìš”ì²­ì„ í•œë‹¤. ì€í–‰ì›ì€ ë‚´ ê³„ì¢Œì˜ ì”ê³ ë¥¼ ì¤„ì´ì§€ ëª»í•œ ì±„ ê³„ì†í•´ì„œ ëˆì„ ì¶œê¸ˆí•´ì¤€ë‹¤. ì´ ê³¼ì •ì„ ë°˜ë³µí•´ ê³„ì†í•´ì„œ ëˆì„ ë°›ëŠ” ê²ƒì´ë‹¤.â€œ500ì›ì„ ì¶œê¸ˆí•  ìˆ˜ ìˆì„ê¹Œìš”? ì ì‹œë§Œìš”, ê·¸ ì „ì—.. 500ì›ì„ ì¶œê¸ˆí•  ìˆ˜ ìˆì„ê¹Œìš”?â€ê³„ì¢Œì˜ ì”ê³ ëŠ” ë°”ë‹¥ë‚˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì¶œê¸ˆ ìš”ì²­ì„ í•  ì—ë„ˆì§€(Gas)ê°€ ì—†ì„ ë•Œê¹Œì§€ ê³„ì†í•´ì„œ 500ì›ì„ ë°˜ë³µí•´ì„œ ì¶œê¸ˆí•  ìˆ˜ ìˆë‹¤. ì‹œì‘ ë‹¨ê³„ì—ì„œ ë‹¨ í•œë²ˆ ê³„ì¢Œ ì”ê³ ì— 500ì› ì´ìƒì˜ ì”ì•¡ì´ ë‚¨ì•„ ìˆëŠ”ì§€ í™•ì¸í•˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆì—ˆê¸° ë•Œë¬¸ì— ì´ ê³µê²©ì´ ê°€ëŠ¥í–ˆë‹¤.Mitigationëˆì´ ì „ë‹¬ë˜ê¸° ì „ì— senderì˜ ê³„ì¢Œë¥¼ ì¤„ì´ë©´ ëœë‹¤. ë³‘ë ¬ í”„ë¡œê·¸ë˜ë°ì„ ë‹¤ë£¨ëŠ” ì‚¬ëŒë“¤ì—ê²Œ ìµìˆ™í•œ ë˜ ë‹¤ë¥¸ í•´ê²°ë°©ë²•ì€ ë®¤í…ìŠ¤5(mutex)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ëª¨ë“  ì¢…ë¥˜ì˜ ë ˆì´ìŠ¤ ì»¨ë””ì…˜(race condition) ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.í˜„ì¬, require(msg.sender.transfer(_value)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì´ëŸ° ì¢…ë¥˜ì˜ ìƒí™©ì„ í•´ê²°í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì´ë‹¤.  1 ê³µê²©ìëŠ” ì–¸ë”í”Œë¡œìš°(Underflow) ì·¨ì•½ì ìœ¼ë¡œ í† í°ì˜ ê°œìˆ˜ê°€ 0ê°œì¸ ìƒíƒœì—ì„œ ì†Œë¹„í•  ê²½ìš°, í† í°ì´ 2256-1ê°œë¡œ ëŠ˜ì–´ë‚˜ëŠ” ê²ƒì„ ì•Œê³ ìˆë‹¤.  2 í´ë˜ìŠ¤ì™€ í´ë˜ìŠ¤ ë§´ë²„(ë³€ìˆ˜ ë˜ëŠ” í•¨ìˆ˜)ì˜ ì‚¬ìš©ë²”ìœ„ë¥¼ ê²°ì •. ì ‘ê·¼ ì œì–´ì.  3 ì»¨íŠ¸ë™íŠ¸ê°€ ë‹¤ë¥¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ EOAë¡œ ì´ë”(Ether)ë¥¼ ë³´ë‚¼ ë•Œ ì‚¬ìš©.  4 íŠ¸ëœì ì…˜ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ìˆ˜ìˆ˜ë£Œ ë‹¨ìœ„. EVMì—ì„œ Bytecodeë¥¼ ì‹¤í–‰í•  ë•Œ ê°€ìŠ¤(Gas)ë¥¼ ì§€ë¶ˆí•´ì•¼ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŒ.  5 ê³µìœ ëœ ìì›ì„ ì—¬ëŸ¬ ìŠ¤ë ˆë“œ(Thread)ê°€ ë™ì‹œì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ë§‰ìŒ. ì—¬ëŸ¬ í’€ ë…¸ë“œê°€ ë™ì‹œì— ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë°”ì´íŠ¸ ì½”ë“œ(Bytecode)ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤."
  },
  
  {
    "title": "How to smell out in-house coin miners",
    "url": "/posts/HowToSmellOutInHouseCoinMiners/",
    "categories": "Security, Blockchain",
    "tags": "blockchain, mining, coin",
    "date": "2018-03-12 00:00:00 +0900",
    





    
    "snippet": "ëŒ€ë‹¤ìˆ˜ ì¼ë³¸ì¸ë“¤ì€ íšŒì‚¬ì—ì„œ íœ´ëŒ€í°ì„ ì¶©ì „í•˜ëŠ” í–‰ìœ„ë¥¼ â€˜ì „ê¸°ë¥¼ í›”ì¹˜ëŠ” ì¼â€™ì´ë¼ê³  ìƒê°í•˜ì—¬ ì´ë¥¼ ì—„ê²©íˆ ì œì¬í•œë‹¤ê³  í•œë‹¤. ë‹¤ë§Œ, ì¼ë³¸ì˜ ê²½ìš° í•œêµ­ê³¼ ë‹¬ë¦¬ ì—…ë¬´ìš© ìŠ¤ë§ˆíŠ¸í°ì„ ì§€ê¸‰í•˜ëŠ” ê²ƒì´ ë³´í¸ì ì´ë‹¤. ì•”í˜¸í™”íë¥¼ ìƒê°í•´ë³´ì. ì§ì›ì´ íšŒì‚¬ì˜ ìì›ì„ ì´ìš©í•˜ì—¬ ì•”í˜¸í™”í ì±„êµ´(Mining)ì„ í•œë‹¤ë©´ ì´ëŠ” ìš©ì¸ë  ìˆ˜ ìˆì„ê¹Œ? ì¸ì • ë¬¸í™”ë¥¼ ê³µìœ í•˜ëŠ” í•œêµ­ì—ì„œ íœ´ëŒ€í° ì¶©ì „...",
    "content": "ëŒ€ë‹¤ìˆ˜ ì¼ë³¸ì¸ë“¤ì€ íšŒì‚¬ì—ì„œ íœ´ëŒ€í°ì„ ì¶©ì „í•˜ëŠ” í–‰ìœ„ë¥¼ â€˜ì „ê¸°ë¥¼ í›”ì¹˜ëŠ” ì¼â€™ì´ë¼ê³  ìƒê°í•˜ì—¬ ì´ë¥¼ ì—„ê²©íˆ ì œì¬í•œë‹¤ê³  í•œë‹¤. ë‹¤ë§Œ, ì¼ë³¸ì˜ ê²½ìš° í•œêµ­ê³¼ ë‹¬ë¦¬ ì—…ë¬´ìš© ìŠ¤ë§ˆíŠ¸í°ì„ ì§€ê¸‰í•˜ëŠ” ê²ƒì´ ë³´í¸ì ì´ë‹¤. ì•”í˜¸í™”íë¥¼ ìƒê°í•´ë³´ì. ì§ì›ì´ íšŒì‚¬ì˜ ìì›ì„ ì´ìš©í•˜ì—¬ ì•”í˜¸í™”í ì±„êµ´(Mining)ì„ í•œë‹¤ë©´ ì´ëŠ” ìš©ì¸ë  ìˆ˜ ìˆì„ê¹Œ? ì¸ì • ë¬¸í™”ë¥¼ ê³µìœ í•˜ëŠ” í•œêµ­ì—ì„œ íœ´ëŒ€í° ì¶©ì „ ì •ë„ëŠ” ë„ˆê·¸ëŸ¬ì´ ë„˜ì–´ê°ˆ ìˆ˜ ìˆì§€ë§Œ, ìƒë‹¹í•œ ì–‘ì˜ ì „ë ¥ì„ í•„ìš”ë¡œ í•˜ëŠ” ì±„êµ´ì€ ì´ì•¼ê¸°ê°€ ë‹¤ë¥¼ ê²ƒì´ë‹¤.ìµœê·¼ ì•”í˜¸í™”í ì±„êµ´ ì•…ì„±ì½”ë“œê°€ ìœ í¬ë˜ì–´ í° ë¬¸ì œê°€ ë˜ì—ˆë‹¤. ì´ ë¬¸ì œëŠ” ì§ì›ì´ ì§ì ‘ ì±„êµ´ì„ í•˜ëŠ” ë¬¸ì œë³´ë‹¤ ë” ì‹¬ê°í•œ ë¬¸ì œë‹¤. ë§ì€ ìˆ˜ì˜ ì„œë²„ì™€ PCë¥¼ ê°ì—¼ì‹œí‚¬ ìˆ˜ ìˆê³ , ìƒë‹¹í•œ ì–‘ì˜ ì „ê¸°ë¥¼ ì‚¬ìš©í•  ë¿ë§Œ ì•„ë‹ˆë¼ íšŒì‚¬ì—ì„œ ìš´ì˜í•˜ê³  ìˆëŠ” ì„œë¹„ìŠ¤ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤. ì´ëŠ” ê³§ íšŒì‚¬ì˜ ì´ìµ(Profit)ì— ì ì§€ ì•Šì€ ë¬¸ì œë¥¼ ê°€ì ¸ì˜¨ë‹¤.  ì‚¬ë‚´ PC ì„±ëŠ¥ì€ ëŒ€ë¶€ë¶„ ë¬¸ì„œ ì‘ì—…ì— ì í•©í•œ ìˆ˜ì¤€ì´ê¸° ë•Œë¬¸ì— ì‚¬ë‚´ ì•”í˜¸í™”í ì±„êµ´ì€ CPU Mining ìœ¼ë¡œ ì§„í–‰ëœë‹¤. GPU ë˜ëŠ” ASICì„ ì´ìš©í•œ ì±„êµ´ì— ë¹„í•´ íš¨ìœ¨ì´ ë¬´ì²™ ë‚®ì€ í¸ì´ì§€ë§Œ, ë…¸ëŠë‹ˆ ì—¼ë¶ˆ ì™¸ëŠ”ê²Œ ë‚«ì§€ ì•Šì€ê°€.CPU MiningíšŒì‚¬ì—ì„œ ì•”í˜¸í™”í ì±„êµ´ì„ í•˜ëŠ” ê²½ìš° ëŒ€ë¶€ë¶„ CPUë¥¼ ì´ìš©í•œ ì±„êµ´ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤. ê³ ì„±ëŠ¥ì˜ GPUë‚˜ ASIC ì¥ë¹„ë¥¼ ì´ìš©í•œ ì±„êµ´ì´ ì¼ë°˜ì ì´ì§€ë§Œ ì§ì› PCë‚˜ ì„œë²„ì— ê³ ì„±ëŠ¥ì˜ GPUê°€ ì—†ê¸° ë•Œë¬¸ì´ë‹¤. CPUë¥¼ ì´ìš©í•´ ì±„êµ´í•  ìˆ˜ ìˆëŠ” ì½”ì¸ì€ ë””ì§€ë°”ì´íŠ¸(Digibyte-Skein, DGB), ëª¨ë„¤ë¡œ(XMR), ZCash(ZEC), ZCoin(XZC) ë“±ì´ ìˆë‹¤.Stratum Mining Protocolì±„êµ´ í”„ë¡œê·¸ë¨ ì‚¬ìš©ë²•ì„ ë³´ë©´ stratum+tcp ë¼ëŠ” ìŠ¤í‚´(scheme)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.cpuminer í”„ë¡œê·¸ë¨ì„ ì´ìš©í•œ Zcoin ì±„êµ´ ëª…ë ¹cpuminer.exe -a lyra2z -o stratum+tcp://miningpooladdress.com:1234 -u username.workername -p xstratumì€ ì¼ë°˜ì ì¸ TCP ì†Œì¼“ì— JSON-RPC ë©”ì‹œì§€ë¡œ ì¸ì½”ë”©ëœ í˜ì´ë¡œë“œë¥¼ ë‹´ì•„ ì‚¬ìš©í•˜ëŠ” ì±„êµ´ í”„ë¡œí† ì½œì´ë‹¤. ì•”í˜¸í™”íì˜ ì¢…ë¥˜ì™€ ìƒê´€ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.JSON-RPC ë©”ì‹œì§€ì— ë‹´ê¸°ëŠ” ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  method: í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ì‚¬ì´ì— í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ ëª…  params: í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŒŒë¼ë¯¸í„°í†µì‹ í•˜ëŠ” ë‚´ìš©ì˜ ëŒ€ë¶€ë¶„ì€ â€œmethodâ€ì™€ â€œparamsâ€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒìœ¼ë¡œ ë¶„ì„í•  ìˆ˜ ìˆë‹¤.Communicationì‹¤ì œë¡œ í†µì‹ í•˜ëŠ” ë‚´ìš©ì„ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.MitigationíŒ¨í‚· íƒì§€ ê·œì¹™(Rule) ì„¤ì •ì±„êµ´ í”„ë¡œê·¸ë¨ì€ ì„œë²„(ì±„êµ´ í’€)ì™€ í†µì‹ í•  ë•Œ stratum+tcp ë¼ëŠ” íŠ¹ì´í•œ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ì•ì„œ ì•Œì•„ë³¸ ë°”ì™€ ê°™ì´, mining.subscribe ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„(ì±„êµ´ í’€)ì™€ í†µì‹ ì„ ì‹œì‘í•œë‹¤.IDS ë˜ëŠ” IPSì˜ íƒì§€ ê·œì¹™(Rule)ì— mining.subscribe, mining.authorize ê·¸ë¦¬ê³  mining.notify ë“±ì„ ì¶”ê°€í•œë‹¤ë©´ íšŒì‚¬ ë‚´ì—ì„œ ì±„êµ´í•˜ëŠ” í–‰ìœ„ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤. ì•…ì„±ì½”ë“œì— ì˜í•´ ì‚¬ìš©ì(ë˜ëŠ” ì§ì›) ëª¨ë¥´ê²Œ PCë‚˜ ì„œë²„ì—ì„œ ì±„êµ´ í”„ë¡œê·¸ë¨ì´ ë™ì‘í•˜ëŠ” ê²ƒë„ ì°¨ë‹¨í•  ìˆ˜ ìˆë‹¤.  ì„œë²„ì™€ ì—°ê²°ë˜ì§€ ëª»í•œ ì±„êµ´ í”„ë¡œê·¸ë¨ì€ CPUë¥¼ ì´ìš©í•œ ì±„êµ´ì„ ì‹œì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. - CPU ì ìœ ìœ¨ì„ ë†’ì´ì§€ ì•ŠëŠ”ë‹¤.í¬íŠ¸ ê·¸ë¦¬ê³  ì„œë²„(ì±„êµ´ í’€) ì°¨ë‹¨ì„œë²„(ì±„êµ´ í’€)ëŠ” ì±„êµ´ì„ ìœ„í•´ ë‹¤ì–‘í•œ í¬íŠ¸ë¥¼ ì§€ì›í•œë‹¤. í•œêµ­ì—ì„œ ê°€ì¥ ìœ ëª…í•œ ì„œë²„(ì±„êµ´ í’€)ì¸ ë§ˆì´ë‹í’€í—ˆë¸Œ(https://miningpoolhub.com)ëŠ” 12xxx, 17xxx ê·¸ë¦¬ê³  20xxxë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤. íšŒì‚¬ ì •ì±…ì— ì˜í•´ 80 ë˜ëŠ” 443ë²ˆ í¬íŠ¸ë¥¼ ì œì™¸í•œ ì•„ì›ƒë°”ìš´ë“œ(outbound) íŠ¸ë˜í”½ì€ ì°¨ë‹¨ë˜ê¸° ë•Œë¬¸ì— ì´ ì„œë²„ë¥¼ ì´ìš©í•´ ì±„êµ´í•  ìˆ˜ ì—†ë‹¤.ì±„êµ´ ì•…ì„±ì½”ë“œëŠ” ì´ë¥¼ ìš°íšŒí•˜ì—¬ 80 ë˜ëŠ” 443ë²ˆ í¬íŠ¸ë¥¼ ì´ìš©í•œ ì±„êµ´ì„ ì‹œë„í•œë‹¤. í¬ë¦½í†  í’€(https://monero.crypto-pool.fr)ì€ ë‹¤ì–‘í•œ ì±„êµ´ í¬íŠ¸ë¥¼ ì§€ì›í•˜ê³  ìˆê³ , ëª¨ë„¤ë¡œ(XMR) ì±„êµ´ í’€ ì¤‘ ê°€ì¥ ìœ ëª…í•œ ì„œë²„ë‹¤.í¬ë¦½í†  í’€(crypto-pool)ê³¼ ê°™ì€ ì„œë²„(ì±„êµ´ í’€)ì— ëŒ€í•œ í†µì‹ ì„ ì°¨ë‹¨í•˜ì—¬ ì‚¬ë‚´ ì±„êµ´ í–‰ìœ„ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤. ë¬¼ë¡ , ì•…ì„±ì½”ë“œì— ì˜í•´ ë™ì‘í•˜ëŠ” ì±„êµ´ í”„ë¡œê·¸ë¨ë„ ì°¨ë‹¨í•  ìˆ˜ ìˆë‹¤.ë§ˆì§€ë§‰ìœ¼ë¡œ SSL í”„ë¡œí† ì½œì„ ì´ìš©í•´ ì±„êµ´í•˜ëŠ” ê²½ìš°ë„ ìˆëŠ”ë°, ë§ˆì°¬ê°€ì§€ë¡œ ì±„êµ´ì„ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í”„ë¡œí† ì½œì¸ stratum+tcpë¥¼ ì‚¬ìš©í•  ìˆ˜ ë°–ì— ì—†ê¸° ë•Œë¬¸ì— ëŒ€ì‘ ë°©ë²•ì€ ë™ì¼í•˜ë‹¤.  ì°¸ê³  : ì „ì„¸ê³„ ì±„êµ´ í’€ ì„œë²„ì— ëŒ€í•œ ì‹¤ì‹œê°„ ì •ë³´ ì•Œë¦¼ ì‚¬ì´íŠ¸ https://investoon.com/"
  }
  
]

